function rp(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();function np(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var td={exports:{}},$i={},rd={exports:{}},D={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ps=Symbol.for("react.element"),sp=Symbol.for("react.portal"),ip=Symbol.for("react.fragment"),ap=Symbol.for("react.strict_mode"),op=Symbol.for("react.profiler"),lp=Symbol.for("react.provider"),up=Symbol.for("react.context"),cp=Symbol.for("react.forward_ref"),dp=Symbol.for("react.suspense"),hp=Symbol.for("react.memo"),fp=Symbol.for("react.lazy"),su=Symbol.iterator;function pp(e){return e===null||typeof e!="object"?null:(e=su&&e[su]||e["@@iterator"],typeof e=="function"?e:null)}var nd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},sd=Object.assign,id={};function nn(e,t,r){this.props=e,this.context=t,this.refs=id,this.updater=r||nd}nn.prototype.isReactComponent={};nn.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};nn.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function ad(){}ad.prototype=nn.prototype;function tl(e,t,r){this.props=e,this.context=t,this.refs=id,this.updater=r||nd}var rl=tl.prototype=new ad;rl.constructor=tl;sd(rl,nn.prototype);rl.isPureReactComponent=!0;var iu=Array.isArray,od=Object.prototype.hasOwnProperty,nl={current:null},ld={key:!0,ref:!0,__self:!0,__source:!0};function ud(e,t,r){var n,s={},i=null,a=null;if(t!=null)for(n in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(i=""+t.key),t)od.call(t,n)&&!ld.hasOwnProperty(n)&&(s[n]=t[n]);var o=arguments.length-2;if(o===1)s.children=r;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];s.children=l}if(e&&e.defaultProps)for(n in o=e.defaultProps,o)s[n]===void 0&&(s[n]=o[n]);return{$$typeof:ps,type:e,key:i,ref:a,props:s,_owner:nl.current}}function mp(e,t){return{$$typeof:ps,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function sl(e){return typeof e=="object"&&e!==null&&e.$$typeof===ps}function gp(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var au=/\/+/g;function ua(e,t){return typeof e=="object"&&e!==null&&e.key!=null?gp(""+e.key):t.toString(36)}function Js(e,t,r,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case ps:case sp:a=!0}}if(a)return a=e,s=s(a),e=n===""?"."+ua(a,0):n,iu(s)?(r="",e!=null&&(r=e.replace(au,"$&/")+"/"),Js(s,t,r,"",function(u){return u})):s!=null&&(sl(s)&&(s=mp(s,r+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(au,"$&/")+"/")+e)),t.push(s)),1;if(a=0,n=n===""?".":n+":",iu(e))for(var o=0;o<e.length;o++){i=e[o];var l=n+ua(i,o);a+=Js(i,t,r,l,s)}else if(l=pp(e),typeof l=="function")for(e=l.call(e),o=0;!(i=e.next()).done;)i=i.value,l=n+ua(i,o++),a+=Js(i,t,r,l,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Ss(e,t,r){if(e==null)return e;var n=[],s=0;return Js(e,n,"","",function(i){return t.call(r,i,s++)}),n}function vp(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var xe={current:null},Ys={transition:null},yp={ReactCurrentDispatcher:xe,ReactCurrentBatchConfig:Ys,ReactCurrentOwner:nl};function cd(){throw Error("act(...) is not supported in production builds of React.")}D.Children={map:Ss,forEach:function(e,t,r){Ss(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Ss(e,function(){t++}),t},toArray:function(e){return Ss(e,function(t){return t})||[]},only:function(e){if(!sl(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};D.Component=nn;D.Fragment=ip;D.Profiler=op;D.PureComponent=tl;D.StrictMode=ap;D.Suspense=dp;D.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yp;D.act=cd;D.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=sd({},e.props),s=e.key,i=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,a=nl.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(l in t)od.call(t,l)&&!ld.hasOwnProperty(l)&&(n[l]=t[l]===void 0&&o!==void 0?o[l]:t[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];n.children=o}return{$$typeof:ps,type:e.type,key:s,ref:i,props:n,_owner:a}};D.createContext=function(e){return e={$$typeof:up,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:lp,_context:e},e.Consumer=e};D.createElement=ud;D.createFactory=function(e){var t=ud.bind(null,e);return t.type=e,t};D.createRef=function(){return{current:null}};D.forwardRef=function(e){return{$$typeof:cp,render:e}};D.isValidElement=sl;D.lazy=function(e){return{$$typeof:fp,_payload:{_status:-1,_result:e},_init:vp}};D.memo=function(e,t){return{$$typeof:hp,type:e,compare:t===void 0?null:t}};D.startTransition=function(e){var t=Ys.transition;Ys.transition={};try{e()}finally{Ys.transition=t}};D.unstable_act=cd;D.useCallback=function(e,t){return xe.current.useCallback(e,t)};D.useContext=function(e){return xe.current.useContext(e)};D.useDebugValue=function(){};D.useDeferredValue=function(e){return xe.current.useDeferredValue(e)};D.useEffect=function(e,t){return xe.current.useEffect(e,t)};D.useId=function(){return xe.current.useId()};D.useImperativeHandle=function(e,t,r){return xe.current.useImperativeHandle(e,t,r)};D.useInsertionEffect=function(e,t){return xe.current.useInsertionEffect(e,t)};D.useLayoutEffect=function(e,t){return xe.current.useLayoutEffect(e,t)};D.useMemo=function(e,t){return xe.current.useMemo(e,t)};D.useReducer=function(e,t,r){return xe.current.useReducer(e,t,r)};D.useRef=function(e){return xe.current.useRef(e)};D.useState=function(e){return xe.current.useState(e)};D.useSyncExternalStore=function(e,t,r){return xe.current.useSyncExternalStore(e,t,r)};D.useTransition=function(){return xe.current.useTransition()};D.version="18.3.1";rd.exports=D;var k=rd.exports;const dd=np(k),wp=rp({__proto__:null,default:dd},[k]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _p=k,xp=Symbol.for("react.element"),kp=Symbol.for("react.fragment"),Sp=Object.prototype.hasOwnProperty,bp=_p.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ep={key:!0,ref:!0,__self:!0,__source:!0};function hd(e,t,r){var n,s={},i=null,a=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(n in t)Sp.call(t,n)&&!Ep.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:xp,type:e,key:i,ref:a,props:s,_owner:bp.current}}$i.Fragment=kp;$i.jsx=hd;$i.jsxs=hd;td.exports=$i;var d=td.exports,Ha={},fd={exports:{}},Ie={},pd={exports:{}},md={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(T,I){var L=T.length;T.push(I);e:for(;0<L;){var Z=L-1>>>1,oe=T[Z];if(0<s(oe,I))T[Z]=I,T[L]=oe,L=Z;else break e}}function r(T){return T.length===0?null:T[0]}function n(T){if(T.length===0)return null;var I=T[0],L=T.pop();if(L!==I){T[0]=L;e:for(var Z=0,oe=T.length,xs=oe>>>1;Z<xs;){var Gt=2*(Z+1)-1,la=T[Gt],Jt=Gt+1,ks=T[Jt];if(0>s(la,L))Jt<oe&&0>s(ks,la)?(T[Z]=ks,T[Jt]=L,Z=Jt):(T[Z]=la,T[Gt]=L,Z=Gt);else if(Jt<oe&&0>s(ks,L))T[Z]=ks,T[Jt]=L,Z=Jt;else break e}}return I}function s(T,I){var L=T.sortIndex-I.sortIndex;return L!==0?L:T.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var a=Date,o=a.now();e.unstable_now=function(){return a.now()-o}}var l=[],u=[],c=1,h=null,f=3,m=!1,y=!1,w=!1,_=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(T){for(var I=r(u);I!==null;){if(I.callback===null)n(u);else if(I.startTime<=T)n(u),I.sortIndex=I.expirationTime,t(l,I);else break;I=r(u)}}function x(T){if(w=!1,g(T),!y)if(r(l)!==null)y=!0,aa(E);else{var I=r(u);I!==null&&oa(x,I.startTime-T)}}function E(T,I){y=!1,w&&(w=!1,v(N),N=-1),m=!0;var L=f;try{for(g(I),h=r(l);h!==null&&(!(h.expirationTime>I)||T&&!We());){var Z=h.callback;if(typeof Z=="function"){h.callback=null,f=h.priorityLevel;var oe=Z(h.expirationTime<=I);I=e.unstable_now(),typeof oe=="function"?h.callback=oe:h===r(l)&&n(l),g(I)}else n(l);h=r(l)}if(h!==null)var xs=!0;else{var Gt=r(u);Gt!==null&&oa(x,Gt.startTime-I),xs=!1}return xs}finally{h=null,f=L,m=!1}}var S=!1,j=null,N=-1,z=5,$=-1;function We(){return!(e.unstable_now()-$<z)}function cn(){if(j!==null){var T=e.unstable_now();$=T;var I=!0;try{I=j(!0,T)}finally{I?dn():(S=!1,j=null)}}else S=!1}var dn;if(typeof p=="function")dn=function(){p(cn)};else if(typeof MessageChannel<"u"){var nu=new MessageChannel,tp=nu.port2;nu.port1.onmessage=cn,dn=function(){tp.postMessage(null)}}else dn=function(){_(cn,0)};function aa(T){j=T,S||(S=!0,dn())}function oa(T,I){N=_(function(){T(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(T){T.callback=null},e.unstable_continueExecution=function(){y||m||(y=!0,aa(E))},e.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<T?Math.floor(1e3/T):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(T){switch(f){case 1:case 2:case 3:var I=3;break;default:I=f}var L=f;f=I;try{return T()}finally{f=L}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(T,I){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var L=f;f=T;try{return I()}finally{f=L}},e.unstable_scheduleCallback=function(T,I,L){var Z=e.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?Z+L:Z):L=Z,T){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=L+oe,T={id:c++,callback:I,priorityLevel:T,startTime:L,expirationTime:oe,sortIndex:-1},L>Z?(T.sortIndex=L,t(u,T),r(l)===null&&T===r(u)&&(w?(v(N),N=-1):w=!0,oa(x,L-Z))):(T.sortIndex=oe,t(l,T),y||m||(y=!0,aa(E))),T},e.unstable_shouldYield=We,e.unstable_wrapCallback=function(T){var I=f;return function(){var L=f;f=I;try{return T.apply(this,arguments)}finally{f=L}}}})(md);pd.exports=md;var jp=pd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cp=k,Ae=jp;function b(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gd=new Set,Fn={};function gr(e,t){Yr(e,t),Yr(e+"Capture",t)}function Yr(e,t){for(Fn[e]=t,e=0;e<t.length;e++)gd.add(t[e])}var ht=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ka=Object.prototype.hasOwnProperty,Tp=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ou={},lu={};function Np(e){return Ka.call(lu,e)?!0:Ka.call(ou,e)?!1:Tp.test(e)?lu[e]=!0:(ou[e]=!0,!1)}function Op(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Pp(e,t,r,n){if(t===null||typeof t>"u"||Op(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ke(e,t,r,n,s,i,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var pe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){pe[e]=new ke(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];pe[t]=new ke(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){pe[e]=new ke(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){pe[e]=new ke(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){pe[e]=new ke(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){pe[e]=new ke(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){pe[e]=new ke(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){pe[e]=new ke(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){pe[e]=new ke(e,5,!1,e.toLowerCase(),null,!1,!1)});var il=/[\-:]([a-z])/g;function al(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(il,al);pe[t]=new ke(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(il,al);pe[t]=new ke(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(il,al);pe[t]=new ke(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){pe[e]=new ke(e,1,!1,e.toLowerCase(),null,!1,!1)});pe.xlinkHref=new ke("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){pe[e]=new ke(e,1,!1,e.toLowerCase(),null,!0,!0)});function ol(e,t,r,n){var s=pe.hasOwnProperty(t)?pe[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Pp(t,r,s,n)&&(r=null),n||s===null?Np(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var gt=Cp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,bs=Symbol.for("react.element"),Or=Symbol.for("react.portal"),Pr=Symbol.for("react.fragment"),ll=Symbol.for("react.strict_mode"),Ga=Symbol.for("react.profiler"),vd=Symbol.for("react.provider"),yd=Symbol.for("react.context"),ul=Symbol.for("react.forward_ref"),Ja=Symbol.for("react.suspense"),Ya=Symbol.for("react.suspense_list"),cl=Symbol.for("react.memo"),kt=Symbol.for("react.lazy"),wd=Symbol.for("react.offscreen"),uu=Symbol.iterator;function hn(e){return e===null||typeof e!="object"?null:(e=uu&&e[uu]||e["@@iterator"],typeof e=="function"?e:null)}var Y=Object.assign,ca;function En(e){if(ca===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);ca=t&&t[1]||""}return`
`+ca+e}var da=!1;function ha(e,t){if(!e||da)return"";da=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=n.stack.split(`
`),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(a!==1||o!==1)do if(a--,o--,0>o||s[a]!==i[o]){var l=`
`+s[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=a&&0<=o);break}}}finally{da=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?En(e):""}function Rp(e){switch(e.tag){case 5:return En(e.type);case 16:return En("Lazy");case 13:return En("Suspense");case 19:return En("SuspenseList");case 0:case 2:case 15:return e=ha(e.type,!1),e;case 11:return e=ha(e.type.render,!1),e;case 1:return e=ha(e.type,!0),e;default:return""}}function Qa(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Pr:return"Fragment";case Or:return"Portal";case Ga:return"Profiler";case ll:return"StrictMode";case Ja:return"Suspense";case Ya:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case yd:return(e.displayName||"Context")+".Consumer";case vd:return(e._context.displayName||"Context")+".Provider";case ul:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case cl:return t=e.displayName||null,t!==null?t:Qa(e.type)||"Memo";case kt:t=e._payload,e=e._init;try{return Qa(e(t))}catch{}}return null}function Ap(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(t);case 8:return t===ll?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Bt(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function _d(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ip(e){var t=_d(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){n=""+a,i.call(this,a)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Es(e){e._valueTracker||(e._valueTracker=Ip(e))}function xd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=_d(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function oi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Xa(e,t){var r=t.checked;return Y({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function cu(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Bt(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function kd(e,t){t=t.checked,t!=null&&ol(e,"checked",t,!1)}function Za(e,t){kd(e,t);var r=Bt(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?eo(e,t.type,r):t.hasOwnProperty("defaultValue")&&eo(e,t.type,Bt(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function du(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function eo(e,t,r){(t!=="number"||oi(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var jn=Array.isArray;function Wr(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Bt(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function to(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(b(91));return Y({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function hu(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(b(92));if(jn(r)){if(1<r.length)throw Error(b(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Bt(r)}}function Sd(e,t){var r=Bt(t.value),n=Bt(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function fu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function bd(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ro(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?bd(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var js,Ed=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(js=js||document.createElement("div"),js.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=js.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Wn(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Pn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Lp=["Webkit","ms","Moz","O"];Object.keys(Pn).forEach(function(e){Lp.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Pn[t]=Pn[e]})});function jd(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Pn.hasOwnProperty(e)&&Pn[e]?(""+t).trim():t+"px"}function Cd(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=jd(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var Dp=Y({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function no(e,t){if(t){if(Dp[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(b(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(b(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(b(61))}if(t.style!=null&&typeof t.style!="object")throw Error(b(62))}}function so(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var io=null;function dl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ao=null,qr=null,Vr=null;function pu(e){if(e=vs(e)){if(typeof ao!="function")throw Error(b(280));var t=e.stateNode;t&&(t=Fi(t),ao(e.stateNode,e.type,t))}}function Td(e){qr?Vr?Vr.push(e):Vr=[e]:qr=e}function Nd(){if(qr){var e=qr,t=Vr;if(Vr=qr=null,pu(e),t)for(e=0;e<t.length;e++)pu(t[e])}}function Od(e,t){return e(t)}function Pd(){}var fa=!1;function Rd(e,t,r){if(fa)return e(t,r);fa=!0;try{return Od(e,t,r)}finally{fa=!1,(qr!==null||Vr!==null)&&(Pd(),Nd())}}function qn(e,t){var r=e.stateNode;if(r===null)return null;var n=Fi(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(b(231,t,typeof r));return r}var oo=!1;if(ht)try{var fn={};Object.defineProperty(fn,"passive",{get:function(){oo=!0}}),window.addEventListener("test",fn,fn),window.removeEventListener("test",fn,fn)}catch{oo=!1}function $p(e,t,r,n,s,i,a,o,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(c){this.onError(c)}}var Rn=!1,li=null,ui=!1,lo=null,Up={onError:function(e){Rn=!0,li=e}};function Mp(e,t,r,n,s,i,a,o,l){Rn=!1,li=null,$p.apply(Up,arguments)}function zp(e,t,r,n,s,i,a,o,l){if(Mp.apply(this,arguments),Rn){if(Rn){var u=li;Rn=!1,li=null}else throw Error(b(198));ui||(ui=!0,lo=u)}}function vr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Ad(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function mu(e){if(vr(e)!==e)throw Error(b(188))}function Bp(e){var t=e.alternate;if(!t){if(t=vr(e),t===null)throw Error(b(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return mu(s),e;if(i===n)return mu(s),t;i=i.sibling}throw Error(b(188))}if(r.return!==n.return)r=s,n=i;else{for(var a=!1,o=s.child;o;){if(o===r){a=!0,r=s,n=i;break}if(o===n){a=!0,n=s,r=i;break}o=o.sibling}if(!a){for(o=i.child;o;){if(o===r){a=!0,r=i,n=s;break}if(o===n){a=!0,n=i,r=s;break}o=o.sibling}if(!a)throw Error(b(189))}}if(r.alternate!==n)throw Error(b(190))}if(r.tag!==3)throw Error(b(188));return r.stateNode.current===r?e:t}function Id(e){return e=Bp(e),e!==null?Ld(e):null}function Ld(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Ld(e);if(t!==null)return t;e=e.sibling}return null}var Dd=Ae.unstable_scheduleCallback,gu=Ae.unstable_cancelCallback,Fp=Ae.unstable_shouldYield,Wp=Ae.unstable_requestPaint,ee=Ae.unstable_now,qp=Ae.unstable_getCurrentPriorityLevel,hl=Ae.unstable_ImmediatePriority,$d=Ae.unstable_UserBlockingPriority,ci=Ae.unstable_NormalPriority,Vp=Ae.unstable_LowPriority,Ud=Ae.unstable_IdlePriority,Ui=null,nt=null;function Hp(e){if(nt&&typeof nt.onCommitFiberRoot=="function")try{nt.onCommitFiberRoot(Ui,e,void 0,(e.current.flags&128)===128)}catch{}}var Qe=Math.clz32?Math.clz32:Jp,Kp=Math.log,Gp=Math.LN2;function Jp(e){return e>>>=0,e===0?32:31-(Kp(e)/Gp|0)|0}var Cs=64,Ts=4194304;function Cn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function di(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,i=e.pingedLanes,a=r&268435455;if(a!==0){var o=a&~s;o!==0?n=Cn(o):(i&=a,i!==0&&(n=Cn(i)))}else a=r&~s,a!==0?n=Cn(a):i!==0&&(n=Cn(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Qe(t),s=1<<r,n|=e[r],t&=~s;return n}function Yp(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qp(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-Qe(i),o=1<<a,l=s[a];l===-1?(!(o&r)||o&n)&&(s[a]=Yp(o,t)):l<=t&&(e.expiredLanes|=o),i&=~o}}function uo(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Md(){var e=Cs;return Cs<<=1,!(Cs&4194240)&&(Cs=64),e}function pa(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function ms(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Qe(t),e[t]=r}function Xp(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-Qe(r),i=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~i}}function fl(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Qe(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var F=0;function zd(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Bd,pl,Fd,Wd,qd,co=!1,Ns=[],Pt=null,Rt=null,At=null,Vn=new Map,Hn=new Map,Et=[],Zp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vu(e,t){switch(e){case"focusin":case"focusout":Pt=null;break;case"dragenter":case"dragleave":Rt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Vn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hn.delete(t.pointerId)}}function pn(e,t,r,n,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},t!==null&&(t=vs(t),t!==null&&pl(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function em(e,t,r,n,s){switch(t){case"focusin":return Pt=pn(Pt,e,t,r,n,s),!0;case"dragenter":return Rt=pn(Rt,e,t,r,n,s),!0;case"mouseover":return At=pn(At,e,t,r,n,s),!0;case"pointerover":var i=s.pointerId;return Vn.set(i,pn(Vn.get(i)||null,e,t,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Hn.set(i,pn(Hn.get(i)||null,e,t,r,n,s)),!0}return!1}function Vd(e){var t=sr(e.target);if(t!==null){var r=vr(t);if(r!==null){if(t=r.tag,t===13){if(t=Ad(r),t!==null){e.blockedOn=t,qd(e.priority,function(){Fd(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Qs(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=ho(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);io=n,r.target.dispatchEvent(n),io=null}else return t=vs(r),t!==null&&pl(t),e.blockedOn=r,!1;t.shift()}return!0}function yu(e,t,r){Qs(e)&&r.delete(t)}function tm(){co=!1,Pt!==null&&Qs(Pt)&&(Pt=null),Rt!==null&&Qs(Rt)&&(Rt=null),At!==null&&Qs(At)&&(At=null),Vn.forEach(yu),Hn.forEach(yu)}function mn(e,t){e.blockedOn===t&&(e.blockedOn=null,co||(co=!0,Ae.unstable_scheduleCallback(Ae.unstable_NormalPriority,tm)))}function Kn(e){function t(s){return mn(s,e)}if(0<Ns.length){mn(Ns[0],e);for(var r=1;r<Ns.length;r++){var n=Ns[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Pt!==null&&mn(Pt,e),Rt!==null&&mn(Rt,e),At!==null&&mn(At,e),Vn.forEach(t),Hn.forEach(t),r=0;r<Et.length;r++)n=Et[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Et.length&&(r=Et[0],r.blockedOn===null);)Vd(r),r.blockedOn===null&&Et.shift()}var Hr=gt.ReactCurrentBatchConfig,hi=!0;function rm(e,t,r,n){var s=F,i=Hr.transition;Hr.transition=null;try{F=1,ml(e,t,r,n)}finally{F=s,Hr.transition=i}}function nm(e,t,r,n){var s=F,i=Hr.transition;Hr.transition=null;try{F=4,ml(e,t,r,n)}finally{F=s,Hr.transition=i}}function ml(e,t,r,n){if(hi){var s=ho(e,t,r,n);if(s===null)ba(e,t,n,fi,r),vu(e,n);else if(em(s,e,t,r,n))n.stopPropagation();else if(vu(e,n),t&4&&-1<Zp.indexOf(e)){for(;s!==null;){var i=vs(s);if(i!==null&&Bd(i),i=ho(e,t,r,n),i===null&&ba(e,t,n,fi,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else ba(e,t,n,null,r)}}var fi=null;function ho(e,t,r,n){if(fi=null,e=dl(n),e=sr(e),e!==null)if(t=vr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Ad(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return fi=e,null}function Hd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(qp()){case hl:return 1;case $d:return 4;case ci:case Vp:return 16;case Ud:return 536870912;default:return 16}default:return 16}}var Tt=null,gl=null,Xs=null;function Kd(){if(Xs)return Xs;var e,t=gl,r=t.length,n,s="value"in Tt?Tt.value:Tt.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var a=r-e;for(n=1;n<=a&&t[r-n]===s[i-n];n++);return Xs=s.slice(e,1<n?1-n:void 0)}function Zs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Os(){return!0}function wu(){return!1}function Le(e){function t(r,n,s,i,a){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Os:wu,this.isPropagationStopped=wu,this}return Y(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Os)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Os)},persist:function(){},isPersistent:Os}),t}var sn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vl=Le(sn),gs=Y({},sn,{view:0,detail:0}),sm=Le(gs),ma,ga,gn,Mi=Y({},gs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==gn&&(gn&&e.type==="mousemove"?(ma=e.screenX-gn.screenX,ga=e.screenY-gn.screenY):ga=ma=0,gn=e),ma)},movementY:function(e){return"movementY"in e?e.movementY:ga}}),_u=Le(Mi),im=Y({},Mi,{dataTransfer:0}),am=Le(im),om=Y({},gs,{relatedTarget:0}),va=Le(om),lm=Y({},sn,{animationName:0,elapsedTime:0,pseudoElement:0}),um=Le(lm),cm=Y({},sn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),dm=Le(cm),hm=Y({},sn,{data:0}),xu=Le(hm),fm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=mm[e])?!!t[e]:!1}function yl(){return gm}var vm=Y({},gs,{key:function(e){if(e.key){var t=fm[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Zs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?pm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yl,charCode:function(e){return e.type==="keypress"?Zs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Zs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ym=Le(vm),wm=Y({},Mi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ku=Le(wm),_m=Y({},gs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yl}),xm=Le(_m),km=Y({},sn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Sm=Le(km),bm=Y({},Mi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Em=Le(bm),jm=[9,13,27,32],wl=ht&&"CompositionEvent"in window,An=null;ht&&"documentMode"in document&&(An=document.documentMode);var Cm=ht&&"TextEvent"in window&&!An,Gd=ht&&(!wl||An&&8<An&&11>=An),Su=" ",bu=!1;function Jd(e,t){switch(e){case"keyup":return jm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Rr=!1;function Tm(e,t){switch(e){case"compositionend":return Yd(t);case"keypress":return t.which!==32?null:(bu=!0,Su);case"textInput":return e=t.data,e===Su&&bu?null:e;default:return null}}function Nm(e,t){if(Rr)return e==="compositionend"||!wl&&Jd(e,t)?(e=Kd(),Xs=gl=Tt=null,Rr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Gd&&t.locale!=="ko"?null:t.data;default:return null}}var Om={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Eu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Om[e.type]:t==="textarea"}function Qd(e,t,r,n){Td(n),t=pi(t,"onChange"),0<t.length&&(r=new vl("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var In=null,Gn=null;function Pm(e){lh(e,0)}function zi(e){var t=Lr(e);if(xd(t))return e}function Rm(e,t){if(e==="change")return t}var Xd=!1;if(ht){var ya;if(ht){var wa="oninput"in document;if(!wa){var ju=document.createElement("div");ju.setAttribute("oninput","return;"),wa=typeof ju.oninput=="function"}ya=wa}else ya=!1;Xd=ya&&(!document.documentMode||9<document.documentMode)}function Cu(){In&&(In.detachEvent("onpropertychange",Zd),Gn=In=null)}function Zd(e){if(e.propertyName==="value"&&zi(Gn)){var t=[];Qd(t,Gn,e,dl(e)),Rd(Pm,t)}}function Am(e,t,r){e==="focusin"?(Cu(),In=t,Gn=r,In.attachEvent("onpropertychange",Zd)):e==="focusout"&&Cu()}function Im(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return zi(Gn)}function Lm(e,t){if(e==="click")return zi(t)}function Dm(e,t){if(e==="input"||e==="change")return zi(t)}function $m(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ze=typeof Object.is=="function"?Object.is:$m;function Jn(e,t){if(Ze(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Ka.call(t,s)||!Ze(e[s],t[s]))return!1}return!0}function Tu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Nu(e,t){var r=Tu(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Tu(r)}}function eh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?eh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function th(){for(var e=window,t=oi();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=oi(e.document)}return t}function _l(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Um(e){var t=th(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&eh(r.ownerDocument.documentElement,r)){if(n!==null&&_l(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!e.extend&&i>n&&(s=n,n=i,i=s),s=Nu(r,i);var a=Nu(r,n);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Mm=ht&&"documentMode"in document&&11>=document.documentMode,Ar=null,fo=null,Ln=null,po=!1;function Ou(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;po||Ar==null||Ar!==oi(n)||(n=Ar,"selectionStart"in n&&_l(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Ln&&Jn(Ln,n)||(Ln=n,n=pi(fo,"onSelect"),0<n.length&&(t=new vl("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Ar)))}function Ps(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Ir={animationend:Ps("Animation","AnimationEnd"),animationiteration:Ps("Animation","AnimationIteration"),animationstart:Ps("Animation","AnimationStart"),transitionend:Ps("Transition","TransitionEnd")},_a={},rh={};ht&&(rh=document.createElement("div").style,"AnimationEvent"in window||(delete Ir.animationend.animation,delete Ir.animationiteration.animation,delete Ir.animationstart.animation),"TransitionEvent"in window||delete Ir.transitionend.transition);function Bi(e){if(_a[e])return _a[e];if(!Ir[e])return e;var t=Ir[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in rh)return _a[e]=t[r];return e}var nh=Bi("animationend"),sh=Bi("animationiteration"),ih=Bi("animationstart"),ah=Bi("transitionend"),oh=new Map,Pu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qt(e,t){oh.set(e,t),gr(t,[e])}for(var xa=0;xa<Pu.length;xa++){var ka=Pu[xa],zm=ka.toLowerCase(),Bm=ka[0].toUpperCase()+ka.slice(1);qt(zm,"on"+Bm)}qt(nh,"onAnimationEnd");qt(sh,"onAnimationIteration");qt(ih,"onAnimationStart");qt("dblclick","onDoubleClick");qt("focusin","onFocus");qt("focusout","onBlur");qt(ah,"onTransitionEnd");Yr("onMouseEnter",["mouseout","mouseover"]);Yr("onMouseLeave",["mouseout","mouseover"]);Yr("onPointerEnter",["pointerout","pointerover"]);Yr("onPointerLeave",["pointerout","pointerover"]);gr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));gr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));gr("onBeforeInput",["compositionend","keypress","textInput","paste"]);gr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));gr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));gr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fm=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tn));function Ru(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,zp(n,t,void 0,e),e.currentTarget=null}function lh(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var a=n.length-1;0<=a;a--){var o=n[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;Ru(s,o,u),i=l}else for(a=0;a<n.length;a++){if(o=n[a],l=o.instance,u=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;Ru(s,o,u),i=l}}}if(ui)throw e=lo,ui=!1,lo=null,e}function V(e,t){var r=t[wo];r===void 0&&(r=t[wo]=new Set);var n=e+"__bubble";r.has(n)||(uh(t,e,2,!1),r.add(n))}function Sa(e,t,r){var n=0;t&&(n|=4),uh(r,e,n,t)}var Rs="_reactListening"+Math.random().toString(36).slice(2);function Yn(e){if(!e[Rs]){e[Rs]=!0,gd.forEach(function(r){r!=="selectionchange"&&(Fm.has(r)||Sa(r,!1,e),Sa(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Rs]||(t[Rs]=!0,Sa("selectionchange",!1,t))}}function uh(e,t,r,n){switch(Hd(t)){case 1:var s=rm;break;case 4:s=nm;break;default:s=ml}r=s.bind(null,t,r,e),s=void 0,!oo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function ba(e,t,r,n,s){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var o=n.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(a===4)for(a=n.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;a=a.return}for(;o!==null;){if(a=sr(o),a===null)return;if(l=a.tag,l===5||l===6){n=i=a;continue e}o=o.parentNode}}n=n.return}Rd(function(){var u=i,c=dl(r),h=[];e:{var f=oh.get(e);if(f!==void 0){var m=vl,y=e;switch(e){case"keypress":if(Zs(r)===0)break e;case"keydown":case"keyup":m=ym;break;case"focusin":y="focus",m=va;break;case"focusout":y="blur",m=va;break;case"beforeblur":case"afterblur":m=va;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=_u;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=am;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=xm;break;case nh:case sh:case ih:m=um;break;case ah:m=Sm;break;case"scroll":m=sm;break;case"wheel":m=Em;break;case"copy":case"cut":case"paste":m=dm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=ku}var w=(t&4)!==0,_=!w&&e==="scroll",v=w?f!==null?f+"Capture":null:f;w=[];for(var p=u,g;p!==null;){g=p;var x=g.stateNode;if(g.tag===5&&x!==null&&(g=x,v!==null&&(x=qn(p,v),x!=null&&w.push(Qn(p,x,g)))),_)break;p=p.return}0<w.length&&(f=new m(f,y,null,r,c),h.push({event:f,listeners:w}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",f&&r!==io&&(y=r.relatedTarget||r.fromElement)&&(sr(y)||y[ft]))break e;if((m||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,m?(y=r.relatedTarget||r.toElement,m=u,y=y?sr(y):null,y!==null&&(_=vr(y),y!==_||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=u),m!==y)){if(w=_u,x="onMouseLeave",v="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(w=ku,x="onPointerLeave",v="onPointerEnter",p="pointer"),_=m==null?f:Lr(m),g=y==null?f:Lr(y),f=new w(x,p+"leave",m,r,c),f.target=_,f.relatedTarget=g,x=null,sr(c)===u&&(w=new w(v,p+"enter",y,r,c),w.target=g,w.relatedTarget=_,x=w),_=x,m&&y)t:{for(w=m,v=y,p=0,g=w;g;g=wr(g))p++;for(g=0,x=v;x;x=wr(x))g++;for(;0<p-g;)w=wr(w),p--;for(;0<g-p;)v=wr(v),g--;for(;p--;){if(w===v||v!==null&&w===v.alternate)break t;w=wr(w),v=wr(v)}w=null}else w=null;m!==null&&Au(h,f,m,w,!1),y!==null&&_!==null&&Au(h,_,y,w,!0)}}e:{if(f=u?Lr(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var E=Rm;else if(Eu(f))if(Xd)E=Dm;else{E=Im;var S=Am}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(E=Lm);if(E&&(E=E(e,u))){Qd(h,E,r,c);break e}S&&S(e,f,u),e==="focusout"&&(S=f._wrapperState)&&S.controlled&&f.type==="number"&&eo(f,"number",f.value)}switch(S=u?Lr(u):window,e){case"focusin":(Eu(S)||S.contentEditable==="true")&&(Ar=S,fo=u,Ln=null);break;case"focusout":Ln=fo=Ar=null;break;case"mousedown":po=!0;break;case"contextmenu":case"mouseup":case"dragend":po=!1,Ou(h,r,c);break;case"selectionchange":if(Mm)break;case"keydown":case"keyup":Ou(h,r,c)}var j;if(wl)e:{switch(e){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Rr?Jd(e,r)&&(N="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(N="onCompositionStart");N&&(Gd&&r.locale!=="ko"&&(Rr||N!=="onCompositionStart"?N==="onCompositionEnd"&&Rr&&(j=Kd()):(Tt=c,gl="value"in Tt?Tt.value:Tt.textContent,Rr=!0)),S=pi(u,N),0<S.length&&(N=new xu(N,e,null,r,c),h.push({event:N,listeners:S}),j?N.data=j:(j=Yd(r),j!==null&&(N.data=j)))),(j=Cm?Tm(e,r):Nm(e,r))&&(u=pi(u,"onBeforeInput"),0<u.length&&(c=new xu("onBeforeInput","beforeinput",null,r,c),h.push({event:c,listeners:u}),c.data=j))}lh(h,t)})}function Qn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function pi(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=qn(e,r),i!=null&&n.unshift(Qn(e,i,s)),i=qn(e,t),i!=null&&n.push(Qn(e,i,s))),e=e.return}return n}function wr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Au(e,t,r,n,s){for(var i=t._reactName,a=[];r!==null&&r!==n;){var o=r,l=o.alternate,u=o.stateNode;if(l!==null&&l===n)break;o.tag===5&&u!==null&&(o=u,s?(l=qn(r,i),l!=null&&a.unshift(Qn(r,l,o))):s||(l=qn(r,i),l!=null&&a.push(Qn(r,l,o)))),r=r.return}a.length!==0&&e.push({event:t,listeners:a})}var Wm=/\r\n?/g,qm=/\u0000|\uFFFD/g;function Iu(e){return(typeof e=="string"?e:""+e).replace(Wm,`
`).replace(qm,"")}function As(e,t,r){if(t=Iu(t),Iu(e)!==t&&r)throw Error(b(425))}function mi(){}var mo=null,go=null;function vo(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var yo=typeof setTimeout=="function"?setTimeout:void 0,Vm=typeof clearTimeout=="function"?clearTimeout:void 0,Lu=typeof Promise=="function"?Promise:void 0,Hm=typeof queueMicrotask=="function"?queueMicrotask:typeof Lu<"u"?function(e){return Lu.resolve(null).then(e).catch(Km)}:yo;function Km(e){setTimeout(function(){throw e})}function Ea(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),Kn(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Kn(t)}function It(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Du(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var an=Math.random().toString(36).slice(2),rt="__reactFiber$"+an,Xn="__reactProps$"+an,ft="__reactContainer$"+an,wo="__reactEvents$"+an,Gm="__reactListeners$"+an,Jm="__reactHandles$"+an;function sr(e){var t=e[rt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[ft]||r[rt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Du(e);e!==null;){if(r=e[rt])return r;e=Du(e)}return t}e=r,r=e.parentNode}return null}function vs(e){return e=e[rt]||e[ft],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Lr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(b(33))}function Fi(e){return e[Xn]||null}var _o=[],Dr=-1;function Vt(e){return{current:e}}function H(e){0>Dr||(e.current=_o[Dr],_o[Dr]=null,Dr--)}function q(e,t){Dr++,_o[Dr]=e.current,e.current=t}var Ft={},ye=Vt(Ft),Ee=Vt(!1),dr=Ft;function Qr(e,t){var r=e.type.contextTypes;if(!r)return Ft;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function je(e){return e=e.childContextTypes,e!=null}function gi(){H(Ee),H(ye)}function $u(e,t,r){if(ye.current!==Ft)throw Error(b(168));q(ye,t),q(Ee,r)}function ch(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(b(108,Ap(e)||"Unknown",s));return Y({},r,n)}function vi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ft,dr=ye.current,q(ye,e),q(Ee,Ee.current),!0}function Uu(e,t,r){var n=e.stateNode;if(!n)throw Error(b(169));r?(e=ch(e,t,dr),n.__reactInternalMemoizedMergedChildContext=e,H(Ee),H(ye),q(ye,e)):H(Ee),q(Ee,r)}var lt=null,Wi=!1,ja=!1;function dh(e){lt===null?lt=[e]:lt.push(e)}function Ym(e){Wi=!0,dh(e)}function Ht(){if(!ja&&lt!==null){ja=!0;var e=0,t=F;try{var r=lt;for(F=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}lt=null,Wi=!1}catch(s){throw lt!==null&&(lt=lt.slice(e+1)),Dd(hl,Ht),s}finally{F=t,ja=!1}}return null}var $r=[],Ur=0,yi=null,wi=0,De=[],$e=0,hr=null,ut=1,ct="";function Xt(e,t){$r[Ur++]=wi,$r[Ur++]=yi,yi=e,wi=t}function hh(e,t,r){De[$e++]=ut,De[$e++]=ct,De[$e++]=hr,hr=e;var n=ut;e=ct;var s=32-Qe(n)-1;n&=~(1<<s),r+=1;var i=32-Qe(t)+s;if(30<i){var a=s-s%5;i=(n&(1<<a)-1).toString(32),n>>=a,s-=a,ut=1<<32-Qe(t)+s|r<<s|n,ct=i+e}else ut=1<<i|r<<s|n,ct=e}function xl(e){e.return!==null&&(Xt(e,1),hh(e,1,0))}function kl(e){for(;e===yi;)yi=$r[--Ur],$r[Ur]=null,wi=$r[--Ur],$r[Ur]=null;for(;e===hr;)hr=De[--$e],De[$e]=null,ct=De[--$e],De[$e]=null,ut=De[--$e],De[$e]=null}var Re=null,Pe=null,K=!1,Ye=null;function fh(e,t){var r=Ue(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Mu(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Re=e,Pe=It(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Re=e,Pe=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=hr!==null?{id:ut,overflow:ct}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Ue(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Re=e,Pe=null,!0):!1;default:return!1}}function xo(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ko(e){if(K){var t=Pe;if(t){var r=t;if(!Mu(e,t)){if(xo(e))throw Error(b(418));t=It(r.nextSibling);var n=Re;t&&Mu(e,t)?fh(n,r):(e.flags=e.flags&-4097|2,K=!1,Re=e)}}else{if(xo(e))throw Error(b(418));e.flags=e.flags&-4097|2,K=!1,Re=e}}}function zu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Re=e}function Is(e){if(e!==Re)return!1;if(!K)return zu(e),K=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!vo(e.type,e.memoizedProps)),t&&(t=Pe)){if(xo(e))throw ph(),Error(b(418));for(;t;)fh(e,t),t=It(t.nextSibling)}if(zu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(b(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Pe=It(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Pe=null}}else Pe=Re?It(e.stateNode.nextSibling):null;return!0}function ph(){for(var e=Pe;e;)e=It(e.nextSibling)}function Xr(){Pe=Re=null,K=!1}function Sl(e){Ye===null?Ye=[e]:Ye.push(e)}var Qm=gt.ReactCurrentBatchConfig;function vn(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(b(309));var n=r.stateNode}if(!n)throw Error(b(147,e));var s=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(a){var o=s.refs;a===null?delete o[i]:o[i]=a},t._stringRef=i,t)}if(typeof e!="string")throw Error(b(284));if(!r._owner)throw Error(b(290,e))}return e}function Ls(e,t){throw e=Object.prototype.toString.call(t),Error(b(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Bu(e){var t=e._init;return t(e._payload)}function mh(e){function t(v,p){if(e){var g=v.deletions;g===null?(v.deletions=[p],v.flags|=16):g.push(p)}}function r(v,p){if(!e)return null;for(;p!==null;)t(v,p),p=p.sibling;return null}function n(v,p){for(v=new Map;p!==null;)p.key!==null?v.set(p.key,p):v.set(p.index,p),p=p.sibling;return v}function s(v,p){return v=Ut(v,p),v.index=0,v.sibling=null,v}function i(v,p,g){return v.index=g,e?(g=v.alternate,g!==null?(g=g.index,g<p?(v.flags|=2,p):g):(v.flags|=2,p)):(v.flags|=1048576,p)}function a(v){return e&&v.alternate===null&&(v.flags|=2),v}function o(v,p,g,x){return p===null||p.tag!==6?(p=Aa(g,v.mode,x),p.return=v,p):(p=s(p,g),p.return=v,p)}function l(v,p,g,x){var E=g.type;return E===Pr?c(v,p,g.props.children,x,g.key):p!==null&&(p.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===kt&&Bu(E)===p.type)?(x=s(p,g.props),x.ref=vn(v,p,g),x.return=v,x):(x=ai(g.type,g.key,g.props,null,v.mode,x),x.ref=vn(v,p,g),x.return=v,x)}function u(v,p,g,x){return p===null||p.tag!==4||p.stateNode.containerInfo!==g.containerInfo||p.stateNode.implementation!==g.implementation?(p=Ia(g,v.mode,x),p.return=v,p):(p=s(p,g.children||[]),p.return=v,p)}function c(v,p,g,x,E){return p===null||p.tag!==7?(p=ur(g,v.mode,x,E),p.return=v,p):(p=s(p,g),p.return=v,p)}function h(v,p,g){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Aa(""+p,v.mode,g),p.return=v,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case bs:return g=ai(p.type,p.key,p.props,null,v.mode,g),g.ref=vn(v,null,p),g.return=v,g;case Or:return p=Ia(p,v.mode,g),p.return=v,p;case kt:var x=p._init;return h(v,x(p._payload),g)}if(jn(p)||hn(p))return p=ur(p,v.mode,g,null),p.return=v,p;Ls(v,p)}return null}function f(v,p,g,x){var E=p!==null?p.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return E!==null?null:o(v,p,""+g,x);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case bs:return g.key===E?l(v,p,g,x):null;case Or:return g.key===E?u(v,p,g,x):null;case kt:return E=g._init,f(v,p,E(g._payload),x)}if(jn(g)||hn(g))return E!==null?null:c(v,p,g,x,null);Ls(v,g)}return null}function m(v,p,g,x,E){if(typeof x=="string"&&x!==""||typeof x=="number")return v=v.get(g)||null,o(p,v,""+x,E);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case bs:return v=v.get(x.key===null?g:x.key)||null,l(p,v,x,E);case Or:return v=v.get(x.key===null?g:x.key)||null,u(p,v,x,E);case kt:var S=x._init;return m(v,p,g,S(x._payload),E)}if(jn(x)||hn(x))return v=v.get(g)||null,c(p,v,x,E,null);Ls(p,x)}return null}function y(v,p,g,x){for(var E=null,S=null,j=p,N=p=0,z=null;j!==null&&N<g.length;N++){j.index>N?(z=j,j=null):z=j.sibling;var $=f(v,j,g[N],x);if($===null){j===null&&(j=z);break}e&&j&&$.alternate===null&&t(v,j),p=i($,p,N),S===null?E=$:S.sibling=$,S=$,j=z}if(N===g.length)return r(v,j),K&&Xt(v,N),E;if(j===null){for(;N<g.length;N++)j=h(v,g[N],x),j!==null&&(p=i(j,p,N),S===null?E=j:S.sibling=j,S=j);return K&&Xt(v,N),E}for(j=n(v,j);N<g.length;N++)z=m(j,v,N,g[N],x),z!==null&&(e&&z.alternate!==null&&j.delete(z.key===null?N:z.key),p=i(z,p,N),S===null?E=z:S.sibling=z,S=z);return e&&j.forEach(function(We){return t(v,We)}),K&&Xt(v,N),E}function w(v,p,g,x){var E=hn(g);if(typeof E!="function")throw Error(b(150));if(g=E.call(g),g==null)throw Error(b(151));for(var S=E=null,j=p,N=p=0,z=null,$=g.next();j!==null&&!$.done;N++,$=g.next()){j.index>N?(z=j,j=null):z=j.sibling;var We=f(v,j,$.value,x);if(We===null){j===null&&(j=z);break}e&&j&&We.alternate===null&&t(v,j),p=i(We,p,N),S===null?E=We:S.sibling=We,S=We,j=z}if($.done)return r(v,j),K&&Xt(v,N),E;if(j===null){for(;!$.done;N++,$=g.next())$=h(v,$.value,x),$!==null&&(p=i($,p,N),S===null?E=$:S.sibling=$,S=$);return K&&Xt(v,N),E}for(j=n(v,j);!$.done;N++,$=g.next())$=m(j,v,N,$.value,x),$!==null&&(e&&$.alternate!==null&&j.delete($.key===null?N:$.key),p=i($,p,N),S===null?E=$:S.sibling=$,S=$);return e&&j.forEach(function(cn){return t(v,cn)}),K&&Xt(v,N),E}function _(v,p,g,x){if(typeof g=="object"&&g!==null&&g.type===Pr&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case bs:e:{for(var E=g.key,S=p;S!==null;){if(S.key===E){if(E=g.type,E===Pr){if(S.tag===7){r(v,S.sibling),p=s(S,g.props.children),p.return=v,v=p;break e}}else if(S.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===kt&&Bu(E)===S.type){r(v,S.sibling),p=s(S,g.props),p.ref=vn(v,S,g),p.return=v,v=p;break e}r(v,S);break}else t(v,S);S=S.sibling}g.type===Pr?(p=ur(g.props.children,v.mode,x,g.key),p.return=v,v=p):(x=ai(g.type,g.key,g.props,null,v.mode,x),x.ref=vn(v,p,g),x.return=v,v=x)}return a(v);case Or:e:{for(S=g.key;p!==null;){if(p.key===S)if(p.tag===4&&p.stateNode.containerInfo===g.containerInfo&&p.stateNode.implementation===g.implementation){r(v,p.sibling),p=s(p,g.children||[]),p.return=v,v=p;break e}else{r(v,p);break}else t(v,p);p=p.sibling}p=Ia(g,v.mode,x),p.return=v,v=p}return a(v);case kt:return S=g._init,_(v,p,S(g._payload),x)}if(jn(g))return y(v,p,g,x);if(hn(g))return w(v,p,g,x);Ls(v,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,p!==null&&p.tag===6?(r(v,p.sibling),p=s(p,g),p.return=v,v=p):(r(v,p),p=Aa(g,v.mode,x),p.return=v,v=p),a(v)):r(v,p)}return _}var Zr=mh(!0),gh=mh(!1),_i=Vt(null),xi=null,Mr=null,bl=null;function El(){bl=Mr=xi=null}function jl(e){var t=_i.current;H(_i),e._currentValue=t}function So(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Kr(e,t){xi=e,bl=Mr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(be=!0),e.firstContext=null)}function ze(e){var t=e._currentValue;if(bl!==e)if(e={context:e,memoizedValue:t,next:null},Mr===null){if(xi===null)throw Error(b(308));Mr=e,xi.dependencies={lanes:0,firstContext:e}}else Mr=Mr.next=e;return t}var ir=null;function Cl(e){ir===null?ir=[e]:ir.push(e)}function vh(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,Cl(t)):(r.next=s.next,s.next=r),t.interleaved=r,pt(e,n)}function pt(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var St=!1;function Tl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yh(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function dt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Lt(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,U&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,pt(e,r)}return s=n.interleaved,s===null?(t.next=t,Cl(n)):(t.next=s.next,s.next=t),n.interleaved=t,pt(e,r)}function ei(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,fl(e,r)}}function Fu(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=a:i=i.next=a,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function ki(e,t,r,n){var s=e.updateQueue;St=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var l=o,u=l.next;l.next=null,a===null?i=u:a.next=u,a=l;var c=e.alternate;c!==null&&(c=c.updateQueue,o=c.lastBaseUpdate,o!==a&&(o===null?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;a=0,c=u=l=null,o=i;do{var f=o.lane,m=o.eventTime;if((n&f)===f){c!==null&&(c=c.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var y=e,w=o;switch(f=t,m=r,w.tag){case 1:if(y=w.payload,typeof y=="function"){h=y.call(m,h,f);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=w.payload,f=typeof y=="function"?y.call(m,h,f):y,f==null)break e;h=Y({},h,f);break e;case 2:St=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,f=s.effects,f===null?s.effects=[o]:f.push(o))}else m={eventTime:m,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},c===null?(u=c=m,l=h):c=c.next=m,a|=f;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;f=o,o=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(c===null&&(l=h),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=c,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);pr|=a,e.lanes=a,e.memoizedState=h}}function Wu(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(b(191,s));s.call(n)}}}var ys={},st=Vt(ys),Zn=Vt(ys),es=Vt(ys);function ar(e){if(e===ys)throw Error(b(174));return e}function Nl(e,t){switch(q(es,t),q(Zn,e),q(st,ys),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ro(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ro(t,e)}H(st),q(st,t)}function en(){H(st),H(Zn),H(es)}function wh(e){ar(es.current);var t=ar(st.current),r=ro(t,e.type);t!==r&&(q(Zn,e),q(st,r))}function Ol(e){Zn.current===e&&(H(st),H(Zn))}var G=Vt(0);function Si(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ca=[];function Pl(){for(var e=0;e<Ca.length;e++)Ca[e]._workInProgressVersionPrimary=null;Ca.length=0}var ti=gt.ReactCurrentDispatcher,Ta=gt.ReactCurrentBatchConfig,fr=0,J=null,ie=null,le=null,bi=!1,Dn=!1,ts=0,Xm=0;function me(){throw Error(b(321))}function Rl(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Ze(e[r],t[r]))return!1;return!0}function Al(e,t,r,n,s,i){if(fr=i,J=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ti.current=e===null||e.memoizedState===null?rg:ng,e=r(n,s),Dn){i=0;do{if(Dn=!1,ts=0,25<=i)throw Error(b(301));i+=1,le=ie=null,t.updateQueue=null,ti.current=sg,e=r(n,s)}while(Dn)}if(ti.current=Ei,t=ie!==null&&ie.next!==null,fr=0,le=ie=J=null,bi=!1,t)throw Error(b(300));return e}function Il(){var e=ts!==0;return ts=0,e}function tt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return le===null?J.memoizedState=le=e:le=le.next=e,le}function Be(){if(ie===null){var e=J.alternate;e=e!==null?e.memoizedState:null}else e=ie.next;var t=le===null?J.memoizedState:le.next;if(t!==null)le=t,ie=e;else{if(e===null)throw Error(b(310));ie=e,e={memoizedState:ie.memoizedState,baseState:ie.baseState,baseQueue:ie.baseQueue,queue:ie.queue,next:null},le===null?J.memoizedState=le=e:le=le.next=e}return le}function rs(e,t){return typeof t=="function"?t(e):t}function Na(e){var t=Be(),r=t.queue;if(r===null)throw Error(b(311));r.lastRenderedReducer=e;var n=ie,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var o=a=null,l=null,u=i;do{var c=u.lane;if((fr&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=h,a=n):l=l.next=h,J.lanes|=c,pr|=c}u=u.next}while(u!==null&&u!==i);l===null?a=n:l.next=o,Ze(n,t.memoizedState)||(be=!0),t.memoizedState=n,t.baseState=a,t.baseQueue=l,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do i=s.lane,J.lanes|=i,pr|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Oa(e){var t=Be(),r=t.queue;if(r===null)throw Error(b(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var a=s=s.next;do i=e(i,a.action),a=a.next;while(a!==s);Ze(i,t.memoizedState)||(be=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function _h(){}function xh(e,t){var r=J,n=Be(),s=t(),i=!Ze(n.memoizedState,s);if(i&&(n.memoizedState=s,be=!0),n=n.queue,Ll(bh.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||le!==null&&le.memoizedState.tag&1){if(r.flags|=2048,ns(9,Sh.bind(null,r,n,s,t),void 0,null),ue===null)throw Error(b(349));fr&30||kh(r,t,s)}return s}function kh(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=J.updateQueue,t===null?(t={lastEffect:null,stores:null},J.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Sh(e,t,r,n){t.value=r,t.getSnapshot=n,Eh(t)&&jh(e)}function bh(e,t,r){return r(function(){Eh(t)&&jh(e)})}function Eh(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Ze(e,r)}catch{return!0}}function jh(e){var t=pt(e,1);t!==null&&Xe(t,e,1,-1)}function qu(e){var t=tt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:rs,lastRenderedState:e},t.queue=e,e=e.dispatch=tg.bind(null,J,e),[t.memoizedState,e]}function ns(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=J.updateQueue,t===null?(t={lastEffect:null,stores:null},J.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Ch(){return Be().memoizedState}function ri(e,t,r,n){var s=tt();J.flags|=e,s.memoizedState=ns(1|t,r,void 0,n===void 0?null:n)}function qi(e,t,r,n){var s=Be();n=n===void 0?null:n;var i=void 0;if(ie!==null){var a=ie.memoizedState;if(i=a.destroy,n!==null&&Rl(n,a.deps)){s.memoizedState=ns(t,r,i,n);return}}J.flags|=e,s.memoizedState=ns(1|t,r,i,n)}function Vu(e,t){return ri(8390656,8,e,t)}function Ll(e,t){return qi(2048,8,e,t)}function Th(e,t){return qi(4,2,e,t)}function Nh(e,t){return qi(4,4,e,t)}function Oh(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Ph(e,t,r){return r=r!=null?r.concat([e]):null,qi(4,4,Oh.bind(null,t,e),r)}function Dl(){}function Rh(e,t){var r=Be();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Rl(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Ah(e,t){var r=Be();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Rl(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Ih(e,t,r){return fr&21?(Ze(r,t)||(r=Md(),J.lanes|=r,pr|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,be=!0),e.memoizedState=r)}function Zm(e,t){var r=F;F=r!==0&&4>r?r:4,e(!0);var n=Ta.transition;Ta.transition={};try{e(!1),t()}finally{F=r,Ta.transition=n}}function Lh(){return Be().memoizedState}function eg(e,t,r){var n=$t(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Dh(e))$h(t,r);else if(r=vh(e,t,r,n),r!==null){var s=_e();Xe(r,e,n,s),Uh(r,t,n)}}function tg(e,t,r){var n=$t(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Dh(e))$h(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var a=t.lastRenderedState,o=i(a,r);if(s.hasEagerState=!0,s.eagerState=o,Ze(o,a)){var l=t.interleaved;l===null?(s.next=s,Cl(t)):(s.next=l.next,l.next=s),t.interleaved=s;return}}catch{}finally{}r=vh(e,t,s,n),r!==null&&(s=_e(),Xe(r,e,n,s),Uh(r,t,n))}}function Dh(e){var t=e.alternate;return e===J||t!==null&&t===J}function $h(e,t){Dn=bi=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Uh(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,fl(e,r)}}var Ei={readContext:ze,useCallback:me,useContext:me,useEffect:me,useImperativeHandle:me,useInsertionEffect:me,useLayoutEffect:me,useMemo:me,useReducer:me,useRef:me,useState:me,useDebugValue:me,useDeferredValue:me,useTransition:me,useMutableSource:me,useSyncExternalStore:me,useId:me,unstable_isNewReconciler:!1},rg={readContext:ze,useCallback:function(e,t){return tt().memoizedState=[e,t===void 0?null:t],e},useContext:ze,useEffect:Vu,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,ri(4194308,4,Oh.bind(null,t,e),r)},useLayoutEffect:function(e,t){return ri(4194308,4,e,t)},useInsertionEffect:function(e,t){return ri(4,2,e,t)},useMemo:function(e,t){var r=tt();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=tt();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=eg.bind(null,J,e),[n.memoizedState,e]},useRef:function(e){var t=tt();return e={current:e},t.memoizedState=e},useState:qu,useDebugValue:Dl,useDeferredValue:function(e){return tt().memoizedState=e},useTransition:function(){var e=qu(!1),t=e[0];return e=Zm.bind(null,e[1]),tt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=J,s=tt();if(K){if(r===void 0)throw Error(b(407));r=r()}else{if(r=t(),ue===null)throw Error(b(349));fr&30||kh(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,Vu(bh.bind(null,n,i,e),[e]),n.flags|=2048,ns(9,Sh.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=tt(),t=ue.identifierPrefix;if(K){var r=ct,n=ut;r=(n&~(1<<32-Qe(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=ts++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Xm++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ng={readContext:ze,useCallback:Rh,useContext:ze,useEffect:Ll,useImperativeHandle:Ph,useInsertionEffect:Th,useLayoutEffect:Nh,useMemo:Ah,useReducer:Na,useRef:Ch,useState:function(){return Na(rs)},useDebugValue:Dl,useDeferredValue:function(e){var t=Be();return Ih(t,ie.memoizedState,e)},useTransition:function(){var e=Na(rs)[0],t=Be().memoizedState;return[e,t]},useMutableSource:_h,useSyncExternalStore:xh,useId:Lh,unstable_isNewReconciler:!1},sg={readContext:ze,useCallback:Rh,useContext:ze,useEffect:Ll,useImperativeHandle:Ph,useInsertionEffect:Th,useLayoutEffect:Nh,useMemo:Ah,useReducer:Oa,useRef:Ch,useState:function(){return Oa(rs)},useDebugValue:Dl,useDeferredValue:function(e){var t=Be();return ie===null?t.memoizedState=e:Ih(t,ie.memoizedState,e)},useTransition:function(){var e=Oa(rs)[0],t=Be().memoizedState;return[e,t]},useMutableSource:_h,useSyncExternalStore:xh,useId:Lh,unstable_isNewReconciler:!1};function He(e,t){if(e&&e.defaultProps){t=Y({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function bo(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Y({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Vi={isMounted:function(e){return(e=e._reactInternals)?vr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=_e(),s=$t(e),i=dt(n,s);i.payload=t,r!=null&&(i.callback=r),t=Lt(e,i,s),t!==null&&(Xe(t,e,s,n),ei(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=_e(),s=$t(e),i=dt(n,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Lt(e,i,s),t!==null&&(Xe(t,e,s,n),ei(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=_e(),n=$t(e),s=dt(r,n);s.tag=2,t!=null&&(s.callback=t),t=Lt(e,s,n),t!==null&&(Xe(t,e,n,r),ei(t,e,n))}};function Hu(e,t,r,n,s,i,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,a):t.prototype&&t.prototype.isPureReactComponent?!Jn(r,n)||!Jn(s,i):!0}function Mh(e,t,r){var n=!1,s=Ft,i=t.contextType;return typeof i=="object"&&i!==null?i=ze(i):(s=je(t)?dr:ye.current,n=t.contextTypes,i=(n=n!=null)?Qr(e,s):Ft),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Vi,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Ku(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Vi.enqueueReplaceState(t,t.state,null)}function Eo(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},Tl(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=ze(i):(i=je(t)?dr:ye.current,s.context=Qr(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(bo(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Vi.enqueueReplaceState(s,s.state,null),ki(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function tn(e,t){try{var r="",n=t;do r+=Rp(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Pa(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function jo(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var ig=typeof WeakMap=="function"?WeakMap:Map;function zh(e,t,r){r=dt(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Ci||(Ci=!0,Do=n),jo(e,t)},r}function Bh(e,t,r){r=dt(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){jo(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){jo(e,t),typeof n!="function"&&(Dt===null?Dt=new Set([this]):Dt.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),r}function Gu(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new ig;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=wg.bind(null,e,t,r),t.then(e,e))}function Ju(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Yu(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=dt(-1,1),t.tag=2,Lt(r,t,1))),r.lanes|=1),e)}var ag=gt.ReactCurrentOwner,be=!1;function we(e,t,r,n){t.child=e===null?gh(t,null,r,n):Zr(t,e.child,r,n)}function Qu(e,t,r,n,s){r=r.render;var i=t.ref;return Kr(t,s),n=Al(e,t,r,n,i,s),r=Il(),e!==null&&!be?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,mt(e,t,s)):(K&&r&&xl(t),t.flags|=1,we(e,t,n,s),t.child)}function Xu(e,t,r,n,s){if(e===null){var i=r.type;return typeof i=="function"&&!ql(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,Fh(e,t,i,n,s)):(e=ai(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var a=i.memoizedProps;if(r=r.compare,r=r!==null?r:Jn,r(a,n)&&e.ref===t.ref)return mt(e,t,s)}return t.flags|=1,e=Ut(i,n),e.ref=t.ref,e.return=t,t.child=e}function Fh(e,t,r,n,s){if(e!==null){var i=e.memoizedProps;if(Jn(i,n)&&e.ref===t.ref)if(be=!1,t.pendingProps=n=i,(e.lanes&s)!==0)e.flags&131072&&(be=!0);else return t.lanes=e.lanes,mt(e,t,s)}return Co(e,t,r,n,s)}function Wh(e,t,r){var n=t.pendingProps,s=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},q(Br,Ne),Ne|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,q(Br,Ne),Ne|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,q(Br,Ne),Ne|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,q(Br,Ne),Ne|=n;return we(e,t,s,r),t.child}function qh(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Co(e,t,r,n,s){var i=je(r)?dr:ye.current;return i=Qr(t,i),Kr(t,s),r=Al(e,t,r,n,i,s),n=Il(),e!==null&&!be?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,mt(e,t,s)):(K&&n&&xl(t),t.flags|=1,we(e,t,r,s),t.child)}function Zu(e,t,r,n,s){if(je(r)){var i=!0;vi(t)}else i=!1;if(Kr(t,s),t.stateNode===null)ni(e,t),Mh(t,r,n),Eo(t,r,n,s),n=!0;else if(e===null){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,u=r.contextType;typeof u=="object"&&u!==null?u=ze(u):(u=je(r)?dr:ye.current,u=Qr(t,u));var c=r.getDerivedStateFromProps,h=typeof c=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==n||l!==u)&&Ku(t,a,n,u),St=!1;var f=t.memoizedState;a.state=f,ki(t,n,a,s),l=t.memoizedState,o!==n||f!==l||Ee.current||St?(typeof c=="function"&&(bo(t,r,c,n),l=t.memoizedState),(o=St||Hu(t,r,o,n,f,l,u))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),a.props=n,a.state=l,a.context=u,n=o):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{a=t.stateNode,yh(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:He(t.type,o),a.props=u,h=t.pendingProps,f=a.context,l=r.contextType,typeof l=="object"&&l!==null?l=ze(l):(l=je(r)?dr:ye.current,l=Qr(t,l));var m=r.getDerivedStateFromProps;(c=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==h||f!==l)&&Ku(t,a,n,l),St=!1,f=t.memoizedState,a.state=f,ki(t,n,a,s);var y=t.memoizedState;o!==h||f!==y||Ee.current||St?(typeof m=="function"&&(bo(t,r,m,n),y=t.memoizedState),(u=St||Hu(t,r,u,n,f,y,l)||!1)?(c||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,y,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,y,l)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=y),a.props=n,a.state=y,a.context=l,n=u):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return To(e,t,r,n,i,s)}function To(e,t,r,n,s,i){qh(e,t);var a=(t.flags&128)!==0;if(!n&&!a)return s&&Uu(t,r,!1),mt(e,t,i);n=t.stateNode,ag.current=t;var o=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&a?(t.child=Zr(t,e.child,null,i),t.child=Zr(t,null,o,i)):we(e,t,o,i),t.memoizedState=n.state,s&&Uu(t,r,!0),t.child}function Vh(e){var t=e.stateNode;t.pendingContext?$u(e,t.pendingContext,t.pendingContext!==t.context):t.context&&$u(e,t.context,!1),Nl(e,t.containerInfo)}function ec(e,t,r,n,s){return Xr(),Sl(s),t.flags|=256,we(e,t,r,n),t.child}var No={dehydrated:null,treeContext:null,retryLane:0};function Oo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Hh(e,t,r){var n=t.pendingProps,s=G.current,i=!1,a=(t.flags&128)!==0,o;if((o=a)||(o=e!==null&&e.memoizedState===null?!1:(s&2)!==0),o?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),q(G,s&1),e===null)return ko(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=n.children,e=n.fallback,i?(n=t.mode,i=t.child,a={mode:"hidden",children:a},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Gi(a,n,0,null),e=ur(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Oo(r),t.memoizedState=No,e):$l(t,a));if(s=e.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return og(e,t,a,n,o,s,r);if(i){i=n.fallback,a=t.mode,s=e.child,o=s.sibling;var l={mode:"hidden",children:n.children};return!(a&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=l,t.deletions=null):(n=Ut(s,l),n.subtreeFlags=s.subtreeFlags&14680064),o!==null?i=Ut(o,i):(i=ur(i,a,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,a=e.child.memoizedState,a=a===null?Oo(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=e.childLanes&~r,t.memoizedState=No,n}return i=e.child,e=i.sibling,n=Ut(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function $l(e,t){return t=Gi({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ds(e,t,r,n){return n!==null&&Sl(n),Zr(t,e.child,null,r),e=$l(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function og(e,t,r,n,s,i,a){if(r)return t.flags&256?(t.flags&=-257,n=Pa(Error(b(422))),Ds(e,t,a,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=Gi({mode:"visible",children:n.children},s,0,null),i=ur(i,s,a,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&Zr(t,e.child,null,a),t.child.memoizedState=Oo(a),t.memoizedState=No,i);if(!(t.mode&1))return Ds(e,t,a,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var o=n.dgst;return n=o,i=Error(b(419)),n=Pa(i,n,void 0),Ds(e,t,a,n)}if(o=(a&e.childLanes)!==0,be||o){if(n=ue,n!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,pt(e,s),Xe(n,e,s,-1))}return Wl(),n=Pa(Error(b(421))),Ds(e,t,a,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=_g.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Pe=It(s.nextSibling),Re=t,K=!0,Ye=null,e!==null&&(De[$e++]=ut,De[$e++]=ct,De[$e++]=hr,ut=e.id,ct=e.overflow,hr=t),t=$l(t,n.children),t.flags|=4096,t)}function tc(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),So(e.return,t,r)}function Ra(e,t,r,n,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function Kh(e,t,r){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if(we(e,t,n.children,r),n=G.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&tc(e,r,t);else if(e.tag===19)tc(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(q(G,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&Si(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),Ra(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Si(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}Ra(t,!0,r,null,i);break;case"together":Ra(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ni(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function mt(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),pr|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(b(153));if(t.child!==null){for(e=t.child,r=Ut(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Ut(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function lg(e,t,r){switch(t.tag){case 3:Vh(t),Xr();break;case 5:wh(t);break;case 1:je(t.type)&&vi(t);break;case 4:Nl(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;q(_i,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(q(G,G.current&1),t.flags|=128,null):r&t.child.childLanes?Hh(e,t,r):(q(G,G.current&1),e=mt(e,t,r),e!==null?e.sibling:null);q(G,G.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return Kh(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),q(G,G.current),n)break;return null;case 22:case 23:return t.lanes=0,Wh(e,t,r)}return mt(e,t,r)}var Gh,Po,Jh,Yh;Gh=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Po=function(){};Jh=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,ar(st.current);var i=null;switch(r){case"input":s=Xa(e,s),n=Xa(e,n),i=[];break;case"select":s=Y({},s,{value:void 0}),n=Y({},n,{value:void 0}),i=[];break;case"textarea":s=to(e,s),n=to(e,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=mi)}no(r,n);var a;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var o=s[u];for(a in o)o.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Fn.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var l=n[u];if(o=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(r||(r={}),r[a]=l[a])}else r||(i||(i=[]),i.push(u,r)),r=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Fn.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&V("scroll",e),i||o===l||(i=[])):(i=i||[]).push(u,l))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};Yh=function(e,t,r,n){r!==n&&(t.flags|=4)};function yn(e,t){if(!K)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function ge(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function ug(e,t,r){var n=t.pendingProps;switch(kl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ge(t),null;case 1:return je(t.type)&&gi(),ge(t),null;case 3:return n=t.stateNode,en(),H(Ee),H(ye),Pl(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Is(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ye!==null&&(Mo(Ye),Ye=null))),Po(e,t),ge(t),null;case 5:Ol(t);var s=ar(es.current);if(r=t.type,e!==null&&t.stateNode!=null)Jh(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(b(166));return ge(t),null}if(e=ar(st.current),Is(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[rt]=t,n[Xn]=i,e=(t.mode&1)!==0,r){case"dialog":V("cancel",n),V("close",n);break;case"iframe":case"object":case"embed":V("load",n);break;case"video":case"audio":for(s=0;s<Tn.length;s++)V(Tn[s],n);break;case"source":V("error",n);break;case"img":case"image":case"link":V("error",n),V("load",n);break;case"details":V("toggle",n);break;case"input":cu(n,i),V("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},V("invalid",n);break;case"textarea":hu(n,i),V("invalid",n)}no(r,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var o=i[a];a==="children"?typeof o=="string"?n.textContent!==o&&(i.suppressHydrationWarning!==!0&&As(n.textContent,o,e),s=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&As(n.textContent,o,e),s=["children",""+o]):Fn.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&V("scroll",n)}switch(r){case"input":Es(n),du(n,i,!0);break;case"textarea":Es(n),fu(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=mi)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=bd(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=a.createElement(r,{is:n.is}):(e=a.createElement(r),r==="select"&&(a=e,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):e=a.createElementNS(e,r),e[rt]=t,e[Xn]=n,Gh(e,t,!1,!1),t.stateNode=e;e:{switch(a=so(r,n),r){case"dialog":V("cancel",e),V("close",e),s=n;break;case"iframe":case"object":case"embed":V("load",e),s=n;break;case"video":case"audio":for(s=0;s<Tn.length;s++)V(Tn[s],e);s=n;break;case"source":V("error",e),s=n;break;case"img":case"image":case"link":V("error",e),V("load",e),s=n;break;case"details":V("toggle",e),s=n;break;case"input":cu(e,n),s=Xa(e,n),V("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=Y({},n,{value:void 0}),V("invalid",e);break;case"textarea":hu(e,n),s=to(e,n),V("invalid",e);break;default:s=n}no(r,s),o=s;for(i in o)if(o.hasOwnProperty(i)){var l=o[i];i==="style"?Cd(e,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Ed(e,l)):i==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Wn(e,l):typeof l=="number"&&Wn(e,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Fn.hasOwnProperty(i)?l!=null&&i==="onScroll"&&V("scroll",e):l!=null&&ol(e,i,l,a))}switch(r){case"input":Es(e),du(e,n,!1);break;case"textarea":Es(e),fu(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Bt(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?Wr(e,!!n.multiple,i,!1):n.defaultValue!=null&&Wr(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=mi)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ge(t),null;case 6:if(e&&t.stateNode!=null)Yh(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(b(166));if(r=ar(es.current),ar(st.current),Is(t)){if(n=t.stateNode,r=t.memoizedProps,n[rt]=t,(i=n.nodeValue!==r)&&(e=Re,e!==null))switch(e.tag){case 3:As(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&As(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[rt]=t,t.stateNode=n}return ge(t),null;case 13:if(H(G),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(K&&Pe!==null&&t.mode&1&&!(t.flags&128))ph(),Xr(),t.flags|=98560,i=!1;else if(i=Is(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(b(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(b(317));i[rt]=t}else Xr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ge(t),i=!1}else Ye!==null&&(Mo(Ye),Ye=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||G.current&1?ae===0&&(ae=3):Wl())),t.updateQueue!==null&&(t.flags|=4),ge(t),null);case 4:return en(),Po(e,t),e===null&&Yn(t.stateNode.containerInfo),ge(t),null;case 10:return jl(t.type._context),ge(t),null;case 17:return je(t.type)&&gi(),ge(t),null;case 19:if(H(G),i=t.memoizedState,i===null)return ge(t),null;if(n=(t.flags&128)!==0,a=i.rendering,a===null)if(n)yn(i,!1);else{if(ae!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Si(e),a!==null){for(t.flags|=128,yn(i,!1),n=a.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,e=a.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return q(G,G.current&1|2),t.child}e=e.sibling}i.tail!==null&&ee()>rn&&(t.flags|=128,n=!0,yn(i,!1),t.lanes=4194304)}else{if(!n)if(e=Si(a),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),yn(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!K)return ge(t),null}else 2*ee()-i.renderingStartTime>rn&&r!==1073741824&&(t.flags|=128,n=!0,yn(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(r=i.last,r!==null?r.sibling=a:t.child=a,i.last=a)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=ee(),t.sibling=null,r=G.current,q(G,n?r&1|2:r&1),t):(ge(t),null);case 22:case 23:return Fl(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Ne&1073741824&&(ge(t),t.subtreeFlags&6&&(t.flags|=8192)):ge(t),null;case 24:return null;case 25:return null}throw Error(b(156,t.tag))}function cg(e,t){switch(kl(t),t.tag){case 1:return je(t.type)&&gi(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return en(),H(Ee),H(ye),Pl(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ol(t),null;case 13:if(H(G),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(b(340));Xr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return H(G),null;case 4:return en(),null;case 10:return jl(t.type._context),null;case 22:case 23:return Fl(),null;case 24:return null;default:return null}}var $s=!1,ve=!1,dg=typeof WeakSet=="function"?WeakSet:Set,C=null;function zr(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){X(e,t,n)}else r.current=null}function Ro(e,t,r){try{r()}catch(n){X(e,t,n)}}var rc=!1;function hg(e,t){if(mo=hi,e=th(),_l(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var a=0,o=-1,l=-1,u=0,c=0,h=e,f=null;t:for(;;){for(var m;h!==r||s!==0&&h.nodeType!==3||(o=a+s),h!==i||n!==0&&h.nodeType!==3||(l=a+n),h.nodeType===3&&(a+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===e)break t;if(f===r&&++u===s&&(o=a),f===i&&++c===n&&(l=a),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}r=o===-1||l===-1?null:{start:o,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(go={focusedElem:e,selectionRange:r},hi=!1,C=t;C!==null;)if(t=C,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,C=e;else for(;C!==null;){t=C;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var w=y.memoizedProps,_=y.memoizedState,v=t.stateNode,p=v.getSnapshotBeforeUpdate(t.elementType===t.type?w:He(t.type,w),_);v.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var g=t.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(b(163))}}catch(x){X(t,t.return,x)}if(e=t.sibling,e!==null){e.return=t.return,C=e;break}C=t.return}return y=rc,rc=!1,y}function $n(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Ro(t,r,i)}s=s.next}while(s!==n)}}function Hi(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Ao(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Qh(e){var t=e.alternate;t!==null&&(e.alternate=null,Qh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[rt],delete t[Xn],delete t[wo],delete t[Gm],delete t[Jm])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Xh(e){return e.tag===5||e.tag===3||e.tag===4}function nc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Xh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Io(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=mi));else if(n!==4&&(e=e.child,e!==null))for(Io(e,t,r),e=e.sibling;e!==null;)Io(e,t,r),e=e.sibling}function Lo(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Lo(e,t,r),e=e.sibling;e!==null;)Lo(e,t,r),e=e.sibling}var he=null,Ge=!1;function wt(e,t,r){for(r=r.child;r!==null;)Zh(e,t,r),r=r.sibling}function Zh(e,t,r){if(nt&&typeof nt.onCommitFiberUnmount=="function")try{nt.onCommitFiberUnmount(Ui,r)}catch{}switch(r.tag){case 5:ve||zr(r,t);case 6:var n=he,s=Ge;he=null,wt(e,t,r),he=n,Ge=s,he!==null&&(Ge?(e=he,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):he.removeChild(r.stateNode));break;case 18:he!==null&&(Ge?(e=he,r=r.stateNode,e.nodeType===8?Ea(e.parentNode,r):e.nodeType===1&&Ea(e,r),Kn(e)):Ea(he,r.stateNode));break;case 4:n=he,s=Ge,he=r.stateNode.containerInfo,Ge=!0,wt(e,t,r),he=n,Ge=s;break;case 0:case 11:case 14:case 15:if(!ve&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Ro(r,t,a),s=s.next}while(s!==n)}wt(e,t,r);break;case 1:if(!ve&&(zr(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){X(r,t,o)}wt(e,t,r);break;case 21:wt(e,t,r);break;case 22:r.mode&1?(ve=(n=ve)||r.memoizedState!==null,wt(e,t,r),ve=n):wt(e,t,r);break;default:wt(e,t,r)}}function sc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new dg),t.forEach(function(n){var s=xg.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function qe(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,a=t,o=a;e:for(;o!==null;){switch(o.tag){case 5:he=o.stateNode,Ge=!1;break e;case 3:he=o.stateNode.containerInfo,Ge=!0;break e;case 4:he=o.stateNode.containerInfo,Ge=!0;break e}o=o.return}if(he===null)throw Error(b(160));Zh(i,a,s),he=null,Ge=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){X(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)ef(t,e),t=t.sibling}function ef(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(qe(t,e),et(e),n&4){try{$n(3,e,e.return),Hi(3,e)}catch(w){X(e,e.return,w)}try{$n(5,e,e.return)}catch(w){X(e,e.return,w)}}break;case 1:qe(t,e),et(e),n&512&&r!==null&&zr(r,r.return);break;case 5:if(qe(t,e),et(e),n&512&&r!==null&&zr(r,r.return),e.flags&32){var s=e.stateNode;try{Wn(s,"")}catch(w){X(e,e.return,w)}}if(n&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,a=r!==null?r.memoizedProps:i,o=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&kd(s,i),so(o,a);var u=so(o,i);for(a=0;a<l.length;a+=2){var c=l[a],h=l[a+1];c==="style"?Cd(s,h):c==="dangerouslySetInnerHTML"?Ed(s,h):c==="children"?Wn(s,h):ol(s,c,h,u)}switch(o){case"input":Za(s,i);break;case"textarea":Sd(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Wr(s,!!i.multiple,m,!1):f!==!!i.multiple&&(i.defaultValue!=null?Wr(s,!!i.multiple,i.defaultValue,!0):Wr(s,!!i.multiple,i.multiple?[]:"",!1))}s[Xn]=i}catch(w){X(e,e.return,w)}}break;case 6:if(qe(t,e),et(e),n&4){if(e.stateNode===null)throw Error(b(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(w){X(e,e.return,w)}}break;case 3:if(qe(t,e),et(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Kn(t.containerInfo)}catch(w){X(e,e.return,w)}break;case 4:qe(t,e),et(e);break;case 13:qe(t,e),et(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(zl=ee())),n&4&&sc(e);break;case 22:if(c=r!==null&&r.memoizedState!==null,e.mode&1?(ve=(u=ve)||c,qe(t,e),ve=u):qe(t,e),et(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for(C=e,c=e.child;c!==null;){for(h=C=c;C!==null;){switch(f=C,m=f.child,f.tag){case 0:case 11:case 14:case 15:$n(4,f,f.return);break;case 1:zr(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){n=f,r=f.return;try{t=n,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(w){X(n,r,w)}}break;case 5:zr(f,f.return);break;case 22:if(f.memoizedState!==null){ac(h);continue}}m!==null?(m.return=f,C=m):ac(h)}c=c.sibling}e:for(c=null,h=e;;){if(h.tag===5){if(c===null){c=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=h.stateNode,l=h.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=jd("display",a))}catch(w){X(e,e.return,w)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(w){X(e,e.return,w)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:qe(t,e),et(e),n&4&&sc(e);break;case 21:break;default:qe(t,e),et(e)}}function et(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Xh(r)){var n=r;break e}r=r.return}throw Error(b(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Wn(s,""),n.flags&=-33);var i=nc(e);Lo(e,i,s);break;case 3:case 4:var a=n.stateNode.containerInfo,o=nc(e);Io(e,o,a);break;default:throw Error(b(161))}}catch(l){X(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function fg(e,t,r){C=e,tf(e)}function tf(e,t,r){for(var n=(e.mode&1)!==0;C!==null;){var s=C,i=s.child;if(s.tag===22&&n){var a=s.memoizedState!==null||$s;if(!a){var o=s.alternate,l=o!==null&&o.memoizedState!==null||ve;o=$s;var u=ve;if($s=a,(ve=l)&&!u)for(C=s;C!==null;)a=C,l=a.child,a.tag===22&&a.memoizedState!==null?oc(s):l!==null?(l.return=a,C=l):oc(s);for(;i!==null;)C=i,tf(i),i=i.sibling;C=s,$s=o,ve=u}ic(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,C=i):ic(e)}}function ic(e){for(;C!==null;){var t=C;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ve||Hi(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!ve)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:He(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Wu(t,i,n);break;case 3:var a=t.updateQueue;if(a!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Wu(t,a,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&Kn(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(b(163))}ve||t.flags&512&&Ao(t)}catch(f){X(t,t.return,f)}}if(t===e){C=null;break}if(r=t.sibling,r!==null){r.return=t.return,C=r;break}C=t.return}}function ac(e){for(;C!==null;){var t=C;if(t===e){C=null;break}var r=t.sibling;if(r!==null){r.return=t.return,C=r;break}C=t.return}}function oc(e){for(;C!==null;){var t=C;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Hi(4,t)}catch(l){X(t,r,l)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(l){X(t,s,l)}}var i=t.return;try{Ao(t)}catch(l){X(t,i,l)}break;case 5:var a=t.return;try{Ao(t)}catch(l){X(t,a,l)}}}catch(l){X(t,t.return,l)}if(t===e){C=null;break}var o=t.sibling;if(o!==null){o.return=t.return,C=o;break}C=t.return}}var pg=Math.ceil,ji=gt.ReactCurrentDispatcher,Ul=gt.ReactCurrentOwner,Me=gt.ReactCurrentBatchConfig,U=0,ue=null,ne=null,fe=0,Ne=0,Br=Vt(0),ae=0,ss=null,pr=0,Ki=0,Ml=0,Un=null,Se=null,zl=0,rn=1/0,at=null,Ci=!1,Do=null,Dt=null,Us=!1,Nt=null,Ti=0,Mn=0,$o=null,si=-1,ii=0;function _e(){return U&6?ee():si!==-1?si:si=ee()}function $t(e){return e.mode&1?U&2&&fe!==0?fe&-fe:Qm.transition!==null?(ii===0&&(ii=Md()),ii):(e=F,e!==0||(e=window.event,e=e===void 0?16:Hd(e.type)),e):1}function Xe(e,t,r,n){if(50<Mn)throw Mn=0,$o=null,Error(b(185));ms(e,r,n),(!(U&2)||e!==ue)&&(e===ue&&(!(U&2)&&(Ki|=r),ae===4&&jt(e,fe)),Ce(e,n),r===1&&U===0&&!(t.mode&1)&&(rn=ee()+500,Wi&&Ht()))}function Ce(e,t){var r=e.callbackNode;Qp(e,t);var n=di(e,e===ue?fe:0);if(n===0)r!==null&&gu(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&gu(r),t===1)e.tag===0?Ym(lc.bind(null,e)):dh(lc.bind(null,e)),Hm(function(){!(U&6)&&Ht()}),r=null;else{switch(zd(n)){case 1:r=hl;break;case 4:r=$d;break;case 16:r=ci;break;case 536870912:r=Ud;break;default:r=ci}r=cf(r,rf.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function rf(e,t){if(si=-1,ii=0,U&6)throw Error(b(327));var r=e.callbackNode;if(Gr()&&e.callbackNode!==r)return null;var n=di(e,e===ue?fe:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Ni(e,n);else{t=n;var s=U;U|=2;var i=sf();(ue!==e||fe!==t)&&(at=null,rn=ee()+500,lr(e,t));do try{vg();break}catch(o){nf(e,o)}while(!0);El(),ji.current=i,U=s,ne!==null?t=0:(ue=null,fe=0,t=ae)}if(t!==0){if(t===2&&(s=uo(e),s!==0&&(n=s,t=Uo(e,s))),t===1)throw r=ss,lr(e,0),jt(e,n),Ce(e,ee()),r;if(t===6)jt(e,n);else{if(s=e.current.alternate,!(n&30)&&!mg(s)&&(t=Ni(e,n),t===2&&(i=uo(e),i!==0&&(n=i,t=Uo(e,i))),t===1))throw r=ss,lr(e,0),jt(e,n),Ce(e,ee()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(b(345));case 2:Zt(e,Se,at);break;case 3:if(jt(e,n),(n&130023424)===n&&(t=zl+500-ee(),10<t)){if(di(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){_e(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=yo(Zt.bind(null,e,Se,at),t);break}Zt(e,Se,at);break;case 4:if(jt(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var a=31-Qe(n);i=1<<a,a=t[a],a>s&&(s=a),n&=~i}if(n=s,n=ee()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*pg(n/1960))-n,10<n){e.timeoutHandle=yo(Zt.bind(null,e,Se,at),n);break}Zt(e,Se,at);break;case 5:Zt(e,Se,at);break;default:throw Error(b(329))}}}return Ce(e,ee()),e.callbackNode===r?rf.bind(null,e):null}function Uo(e,t){var r=Un;return e.current.memoizedState.isDehydrated&&(lr(e,t).flags|=256),e=Ni(e,t),e!==2&&(t=Se,Se=r,t!==null&&Mo(t)),e}function Mo(e){Se===null?Se=e:Se.push.apply(Se,e)}function mg(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!Ze(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function jt(e,t){for(t&=~Ml,t&=~Ki,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Qe(t),n=1<<r;e[r]=-1,t&=~n}}function lc(e){if(U&6)throw Error(b(327));Gr();var t=di(e,0);if(!(t&1))return Ce(e,ee()),null;var r=Ni(e,t);if(e.tag!==0&&r===2){var n=uo(e);n!==0&&(t=n,r=Uo(e,n))}if(r===1)throw r=ss,lr(e,0),jt(e,t),Ce(e,ee()),r;if(r===6)throw Error(b(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Zt(e,Se,at),Ce(e,ee()),null}function Bl(e,t){var r=U;U|=1;try{return e(t)}finally{U=r,U===0&&(rn=ee()+500,Wi&&Ht())}}function mr(e){Nt!==null&&Nt.tag===0&&!(U&6)&&Gr();var t=U;U|=1;var r=Me.transition,n=F;try{if(Me.transition=null,F=1,e)return e()}finally{F=n,Me.transition=r,U=t,!(U&6)&&Ht()}}function Fl(){Ne=Br.current,H(Br)}function lr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Vm(r)),ne!==null)for(r=ne.return;r!==null;){var n=r;switch(kl(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&gi();break;case 3:en(),H(Ee),H(ye),Pl();break;case 5:Ol(n);break;case 4:en();break;case 13:H(G);break;case 19:H(G);break;case 10:jl(n.type._context);break;case 22:case 23:Fl()}r=r.return}if(ue=e,ne=e=Ut(e.current,null),fe=Ne=t,ae=0,ss=null,Ml=Ki=pr=0,Se=Un=null,ir!==null){for(t=0;t<ir.length;t++)if(r=ir[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var a=i.next;i.next=s,n.next=a}r.pending=n}ir=null}return e}function nf(e,t){do{var r=ne;try{if(El(),ti.current=Ei,bi){for(var n=J.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}bi=!1}if(fr=0,le=ie=J=null,Dn=!1,ts=0,Ul.current=null,r===null||r.return===null){ae=1,ss=t,ne=null;break}e:{var i=e,a=r.return,o=r,l=t;if(t=fe,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=o,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var m=Ju(a);if(m!==null){m.flags&=-257,Yu(m,a,o,i,t),m.mode&1&&Gu(i,u,t),t=m,l=u;var y=t.updateQueue;if(y===null){var w=new Set;w.add(l),t.updateQueue=w}else y.add(l);break e}else{if(!(t&1)){Gu(i,u,t),Wl();break e}l=Error(b(426))}}else if(K&&o.mode&1){var _=Ju(a);if(_!==null){!(_.flags&65536)&&(_.flags|=256),Yu(_,a,o,i,t),Sl(tn(l,o));break e}}i=l=tn(l,o),ae!==4&&(ae=2),Un===null?Un=[i]:Un.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var v=zh(i,l,t);Fu(i,v);break e;case 1:o=l;var p=i.type,g=i.stateNode;if(!(i.flags&128)&&(typeof p.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Dt===null||!Dt.has(g)))){i.flags|=65536,t&=-t,i.lanes|=t;var x=Bh(i,o,t);Fu(i,x);break e}}i=i.return}while(i!==null)}of(r)}catch(E){t=E,ne===r&&r!==null&&(ne=r=r.return);continue}break}while(!0)}function sf(){var e=ji.current;return ji.current=Ei,e===null?Ei:e}function Wl(){(ae===0||ae===3||ae===2)&&(ae=4),ue===null||!(pr&268435455)&&!(Ki&268435455)||jt(ue,fe)}function Ni(e,t){var r=U;U|=2;var n=sf();(ue!==e||fe!==t)&&(at=null,lr(e,t));do try{gg();break}catch(s){nf(e,s)}while(!0);if(El(),U=r,ji.current=n,ne!==null)throw Error(b(261));return ue=null,fe=0,ae}function gg(){for(;ne!==null;)af(ne)}function vg(){for(;ne!==null&&!Fp();)af(ne)}function af(e){var t=uf(e.alternate,e,Ne);e.memoizedProps=e.pendingProps,t===null?of(e):ne=t,Ul.current=null}function of(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=cg(r,t),r!==null){r.flags&=32767,ne=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ae=6,ne=null;return}}else if(r=ug(r,t,Ne),r!==null){ne=r;return}if(t=t.sibling,t!==null){ne=t;return}ne=t=e}while(t!==null);ae===0&&(ae=5)}function Zt(e,t,r){var n=F,s=Me.transition;try{Me.transition=null,F=1,yg(e,t,r,n)}finally{Me.transition=s,F=n}return null}function yg(e,t,r,n){do Gr();while(Nt!==null);if(U&6)throw Error(b(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(b(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(Xp(e,i),e===ue&&(ne=ue=null,fe=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Us||(Us=!0,cf(ci,function(){return Gr(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Me.transition,Me.transition=null;var a=F;F=1;var o=U;U|=4,Ul.current=null,hg(e,r),ef(r,e),Um(go),hi=!!mo,go=mo=null,e.current=r,fg(r),Wp(),U=o,F=a,Me.transition=i}else e.current=r;if(Us&&(Us=!1,Nt=e,Ti=s),i=e.pendingLanes,i===0&&(Dt=null),Hp(r.stateNode),Ce(e,ee()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Ci)throw Ci=!1,e=Do,Do=null,e;return Ti&1&&e.tag!==0&&Gr(),i=e.pendingLanes,i&1?e===$o?Mn++:(Mn=0,$o=e):Mn=0,Ht(),null}function Gr(){if(Nt!==null){var e=zd(Ti),t=Me.transition,r=F;try{if(Me.transition=null,F=16>e?16:e,Nt===null)var n=!1;else{if(e=Nt,Nt=null,Ti=0,U&6)throw Error(b(331));var s=U;for(U|=4,C=e.current;C!==null;){var i=C,a=i.child;if(C.flags&16){var o=i.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for(C=u;C!==null;){var c=C;switch(c.tag){case 0:case 11:case 15:$n(8,c,i)}var h=c.child;if(h!==null)h.return=c,C=h;else for(;C!==null;){c=C;var f=c.sibling,m=c.return;if(Qh(c),c===u){C=null;break}if(f!==null){f.return=m,C=f;break}C=m}}}var y=i.alternate;if(y!==null){var w=y.child;if(w!==null){y.child=null;do{var _=w.sibling;w.sibling=null,w=_}while(w!==null)}}C=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,C=a;else e:for(;C!==null;){if(i=C,i.flags&2048)switch(i.tag){case 0:case 11:case 15:$n(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,C=v;break e}C=i.return}}var p=e.current;for(C=p;C!==null;){a=C;var g=a.child;if(a.subtreeFlags&2064&&g!==null)g.return=a,C=g;else e:for(a=p;C!==null;){if(o=C,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Hi(9,o)}}catch(E){X(o,o.return,E)}if(o===a){C=null;break e}var x=o.sibling;if(x!==null){x.return=o.return,C=x;break e}C=o.return}}if(U=s,Ht(),nt&&typeof nt.onPostCommitFiberRoot=="function")try{nt.onPostCommitFiberRoot(Ui,e)}catch{}n=!0}return n}finally{F=r,Me.transition=t}}return!1}function uc(e,t,r){t=tn(r,t),t=zh(e,t,1),e=Lt(e,t,1),t=_e(),e!==null&&(ms(e,1,t),Ce(e,t))}function X(e,t,r){if(e.tag===3)uc(e,e,r);else for(;t!==null;){if(t.tag===3){uc(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Dt===null||!Dt.has(n))){e=tn(r,e),e=Bh(t,e,1),t=Lt(t,e,1),e=_e(),t!==null&&(ms(t,1,e),Ce(t,e));break}}t=t.return}}function wg(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=_e(),e.pingedLanes|=e.suspendedLanes&r,ue===e&&(fe&r)===r&&(ae===4||ae===3&&(fe&130023424)===fe&&500>ee()-zl?lr(e,0):Ml|=r),Ce(e,t)}function lf(e,t){t===0&&(e.mode&1?(t=Ts,Ts<<=1,!(Ts&130023424)&&(Ts=4194304)):t=1);var r=_e();e=pt(e,t),e!==null&&(ms(e,t,r),Ce(e,r))}function _g(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),lf(e,r)}function xg(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(b(314))}n!==null&&n.delete(t),lf(e,r)}var uf;uf=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ee.current)be=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return be=!1,lg(e,t,r);be=!!(e.flags&131072)}else be=!1,K&&t.flags&1048576&&hh(t,wi,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;ni(e,t),e=t.pendingProps;var s=Qr(t,ye.current);Kr(t,r),s=Al(null,t,n,e,s,r);var i=Il();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,je(n)?(i=!0,vi(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Tl(t),s.updater=Vi,t.stateNode=s,s._reactInternals=t,Eo(t,n,e,r),t=To(null,t,n,!0,i,r)):(t.tag=0,K&&i&&xl(t),we(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(ni(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=Sg(n),e=He(n,e),s){case 0:t=Co(null,t,n,e,r);break e;case 1:t=Zu(null,t,n,e,r);break e;case 11:t=Qu(null,t,n,e,r);break e;case 14:t=Xu(null,t,n,He(n.type,e),r);break e}throw Error(b(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:He(n,s),Co(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:He(n,s),Zu(e,t,n,s,r);case 3:e:{if(Vh(t),e===null)throw Error(b(387));n=t.pendingProps,i=t.memoizedState,s=i.element,yh(e,t),ki(t,n,null,r);var a=t.memoizedState;if(n=a.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=tn(Error(b(423)),t),t=ec(e,t,n,r,s);break e}else if(n!==s){s=tn(Error(b(424)),t),t=ec(e,t,n,r,s);break e}else for(Pe=It(t.stateNode.containerInfo.firstChild),Re=t,K=!0,Ye=null,r=gh(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Xr(),n===s){t=mt(e,t,r);break e}we(e,t,n,r)}t=t.child}return t;case 5:return wh(t),e===null&&ko(t),n=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,a=s.children,vo(n,s)?a=null:i!==null&&vo(n,i)&&(t.flags|=32),qh(e,t),we(e,t,a,r),t.child;case 6:return e===null&&ko(t),null;case 13:return Hh(e,t,r);case 4:return Nl(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Zr(t,null,n,r):we(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:He(n,s),Qu(e,t,n,s,r);case 7:return we(e,t,t.pendingProps,r),t.child;case 8:return we(e,t,t.pendingProps.children,r),t.child;case 12:return we(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,a=s.value,q(_i,n._currentValue),n._currentValue=a,i!==null)if(Ze(i.value,a)){if(i.children===s.children&&!Ee.current){t=mt(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var o=i.dependencies;if(o!==null){a=i.child;for(var l=o.firstContext;l!==null;){if(l.context===n){if(i.tag===1){l=dt(-1,r&-r),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),So(i.return,r,t),o.lanes|=r;break}l=l.next}}else if(i.tag===10)a=i.type===t.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(b(341));a.lanes|=r,o=a.alternate,o!==null&&(o.lanes|=r),So(a,r,t),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}we(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,Kr(t,r),s=ze(s),n=n(s),t.flags|=1,we(e,t,n,r),t.child;case 14:return n=t.type,s=He(n,t.pendingProps),s=He(n.type,s),Xu(e,t,n,s,r);case 15:return Fh(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:He(n,s),ni(e,t),t.tag=1,je(n)?(e=!0,vi(t)):e=!1,Kr(t,r),Mh(t,n,s),Eo(t,n,s,r),To(null,t,n,!0,e,r);case 19:return Kh(e,t,r);case 22:return Wh(e,t,r)}throw Error(b(156,t.tag))};function cf(e,t){return Dd(e,t)}function kg(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ue(e,t,r,n){return new kg(e,t,r,n)}function ql(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Sg(e){if(typeof e=="function")return ql(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ul)return 11;if(e===cl)return 14}return 2}function Ut(e,t){var r=e.alternate;return r===null?(r=Ue(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function ai(e,t,r,n,s,i){var a=2;if(n=e,typeof e=="function")ql(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Pr:return ur(r.children,s,i,t);case ll:a=8,s|=8;break;case Ga:return e=Ue(12,r,t,s|2),e.elementType=Ga,e.lanes=i,e;case Ja:return e=Ue(13,r,t,s),e.elementType=Ja,e.lanes=i,e;case Ya:return e=Ue(19,r,t,s),e.elementType=Ya,e.lanes=i,e;case wd:return Gi(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case vd:a=10;break e;case yd:a=9;break e;case ul:a=11;break e;case cl:a=14;break e;case kt:a=16,n=null;break e}throw Error(b(130,e==null?e:typeof e,""))}return t=Ue(a,r,t,s),t.elementType=e,t.type=n,t.lanes=i,t}function ur(e,t,r,n){return e=Ue(7,e,n,t),e.lanes=r,e}function Gi(e,t,r,n){return e=Ue(22,e,n,t),e.elementType=wd,e.lanes=r,e.stateNode={isHidden:!1},e}function Aa(e,t,r){return e=Ue(6,e,null,t),e.lanes=r,e}function Ia(e,t,r){return t=Ue(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function bg(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pa(0),this.expirationTimes=pa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pa(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Vl(e,t,r,n,s,i,a,o,l){return e=new bg(e,t,r,o,l),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Ue(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Tl(i),e}function Eg(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Or,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function df(e){if(!e)return Ft;e=e._reactInternals;e:{if(vr(e)!==e||e.tag!==1)throw Error(b(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(je(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(b(171))}if(e.tag===1){var r=e.type;if(je(r))return ch(e,r,t)}return t}function hf(e,t,r,n,s,i,a,o,l){return e=Vl(r,n,!0,e,s,i,a,o,l),e.context=df(null),r=e.current,n=_e(),s=$t(r),i=dt(n,s),i.callback=t??null,Lt(r,i,s),e.current.lanes=s,ms(e,s,n),Ce(e,n),e}function Ji(e,t,r,n){var s=t.current,i=_e(),a=$t(s);return r=df(r),t.context===null?t.context=r:t.pendingContext=r,t=dt(i,a),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Lt(s,t,a),e!==null&&(Xe(e,s,a,i),ei(e,s,a)),a}function Oi(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function cc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Hl(e,t){cc(e,t),(e=e.alternate)&&cc(e,t)}function jg(){return null}var ff=typeof reportError=="function"?reportError:function(e){console.error(e)};function Kl(e){this._internalRoot=e}Yi.prototype.render=Kl.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(b(409));Ji(e,t,null,null)};Yi.prototype.unmount=Kl.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;mr(function(){Ji(null,e,null,null)}),t[ft]=null}};function Yi(e){this._internalRoot=e}Yi.prototype.unstable_scheduleHydration=function(e){if(e){var t=Wd();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Et.length&&t!==0&&t<Et[r].priority;r++);Et.splice(r,0,e),r===0&&Vd(e)}};function Gl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Qi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function dc(){}function Cg(e,t,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var u=Oi(a);i.call(u)}}var a=hf(t,n,e,0,null,!1,!1,"",dc);return e._reactRootContainer=a,e[ft]=a.current,Yn(e.nodeType===8?e.parentNode:e),mr(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var o=n;n=function(){var u=Oi(l);o.call(u)}}var l=Vl(e,0,!1,null,null,!1,!1,"",dc);return e._reactRootContainer=l,e[ft]=l.current,Yn(e.nodeType===8?e.parentNode:e),mr(function(){Ji(t,l,r,n)}),l}function Xi(e,t,r,n,s){var i=r._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var o=s;s=function(){var l=Oi(a);o.call(l)}}Ji(t,a,e,s)}else a=Cg(r,t,e,s,n);return Oi(a)}Bd=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Cn(t.pendingLanes);r!==0&&(fl(t,r|1),Ce(t,ee()),!(U&6)&&(rn=ee()+500,Ht()))}break;case 13:mr(function(){var n=pt(e,1);if(n!==null){var s=_e();Xe(n,e,1,s)}}),Hl(e,1)}};pl=function(e){if(e.tag===13){var t=pt(e,134217728);if(t!==null){var r=_e();Xe(t,e,134217728,r)}Hl(e,134217728)}};Fd=function(e){if(e.tag===13){var t=$t(e),r=pt(e,t);if(r!==null){var n=_e();Xe(r,e,t,n)}Hl(e,t)}};Wd=function(){return F};qd=function(e,t){var r=F;try{return F=e,t()}finally{F=r}};ao=function(e,t,r){switch(t){case"input":if(Za(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=Fi(n);if(!s)throw Error(b(90));xd(n),Za(n,s)}}}break;case"textarea":Sd(e,r);break;case"select":t=r.value,t!=null&&Wr(e,!!r.multiple,t,!1)}};Od=Bl;Pd=mr;var Tg={usingClientEntryPoint:!1,Events:[vs,Lr,Fi,Td,Nd,Bl]},wn={findFiberByHostInstance:sr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ng={bundleType:wn.bundleType,version:wn.version,rendererPackageName:wn.rendererPackageName,rendererConfig:wn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Id(e),e===null?null:e.stateNode},findFiberByHostInstance:wn.findFiberByHostInstance||jg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ms=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ms.isDisabled&&Ms.supportsFiber)try{Ui=Ms.inject(Ng),nt=Ms}catch{}}Ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Tg;Ie.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Gl(t))throw Error(b(200));return Eg(e,t,null,r)};Ie.createRoot=function(e,t){if(!Gl(e))throw Error(b(299));var r=!1,n="",s=ff;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Vl(e,1,!1,null,null,r,!1,n,s),e[ft]=t.current,Yn(e.nodeType===8?e.parentNode:e),new Kl(t)};Ie.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(b(188)):(e=Object.keys(e).join(","),Error(b(268,e)));return e=Id(t),e=e===null?null:e.stateNode,e};Ie.flushSync=function(e){return mr(e)};Ie.hydrate=function(e,t,r){if(!Qi(t))throw Error(b(200));return Xi(null,e,t,!0,r)};Ie.hydrateRoot=function(e,t,r){if(!Gl(e))throw Error(b(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",a=ff;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),t=hf(t,null,e,1,r??null,s,!1,i,a),e[ft]=t.current,Yn(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new Yi(t)};Ie.render=function(e,t,r){if(!Qi(t))throw Error(b(200));return Xi(null,e,t,!1,r)};Ie.unmountComponentAtNode=function(e){if(!Qi(e))throw Error(b(40));return e._reactRootContainer?(mr(function(){Xi(null,null,e,!1,function(){e._reactRootContainer=null,e[ft]=null})}),!0):!1};Ie.unstable_batchedUpdates=Bl;Ie.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Qi(r))throw Error(b(200));if(e==null||e._reactInternals===void 0)throw Error(b(38));return Xi(e,t,r,!1,n)};Ie.version="18.3.1-next-f1338f8080-20240426";function pf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(pf)}catch(e){console.error(e)}}pf(),fd.exports=Ie;var Og=fd.exports,hc=Og;Ha.createRoot=hc.createRoot,Ha.hydrateRoot=hc.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function is(){return is=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},is.apply(this,arguments)}var Ot;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ot||(Ot={}));const fc="popstate";function Pg(e){e===void 0&&(e={});function t(n,s){let{pathname:i,search:a,hash:o}=n.location;return zo("",{pathname:i,search:a,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Pi(s)}return Ag(t,r,null,e)}function te(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Jl(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Rg(){return Math.random().toString(36).substr(2,8)}function pc(e,t){return{usr:e.state,key:e.key,idx:t}}function zo(e,t,r,n){return r===void 0&&(r=null),is({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?on(t):t,{state:r,key:t&&t.key||n||Rg()})}function Pi(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function on(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function Ag(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,a=s.history,o=Ot.Pop,l=null,u=c();u==null&&(u=0,a.replaceState(is({},a.state,{idx:u}),""));function c(){return(a.state||{idx:null}).idx}function h(){o=Ot.Pop;let _=c(),v=_==null?null:_-u;u=_,l&&l({action:o,location:w.location,delta:v})}function f(_,v){o=Ot.Push;let p=zo(w.location,_,v);u=c()+1;let g=pc(p,u),x=w.createHref(p);try{a.pushState(g,"",x)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;s.location.assign(x)}i&&l&&l({action:o,location:w.location,delta:1})}function m(_,v){o=Ot.Replace;let p=zo(w.location,_,v);u=c();let g=pc(p,u),x=w.createHref(p);a.replaceState(g,"",x),i&&l&&l({action:o,location:w.location,delta:0})}function y(_){let v=s.location.origin!=="null"?s.location.origin:s.location.href,p=typeof _=="string"?_:Pi(_);return p=p.replace(/ $/,"%20"),te(v,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,v)}let w={get action(){return o},get location(){return e(s,a)},listen(_){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(fc,h),l=_,()=>{s.removeEventListener(fc,h),l=null}},createHref(_){return t(s,_)},createURL:y,encodeLocation(_){let v=y(_);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:m,go(_){return a.go(_)}};return w}var mc;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(mc||(mc={}));function Ig(e,t,r){return r===void 0&&(r="/"),Lg(e,t,r)}function Lg(e,t,r,n){let s=typeof t=="string"?on(t):t,i=Yl(s.pathname||"/",r);if(i==null)return null;let a=mf(e);Dg(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let u=Gg(i);o=Vg(a[l],u)}return o}function mf(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,a,o)=>{let l={relativePath:o===void 0?i.path||"":o,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};l.relativePath.startsWith("/")&&(te(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let u=Mt([n,l.relativePath]),c=r.concat(l);i.children&&i.children.length>0&&(te(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),mf(i.children,t,c,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:Wg(u,i.index),routesMeta:c})};return e.forEach((i,a)=>{var o;if(i.path===""||!((o=i.path)!=null&&o.includes("?")))s(i,a);else for(let l of gf(i.path))s(i,a,l)}),t}function gf(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let a=gf(n.join("/")),o=[];return o.push(...a.map(l=>l===""?i:[i,l].join("/"))),s&&o.push(...a),o.map(l=>e.startsWith("/")&&l===""?"/":l)}function Dg(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:qg(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const $g=/^:[\w-]+$/,Ug=3,Mg=2,zg=1,Bg=10,Fg=-2,gc=e=>e==="*";function Wg(e,t){let r=e.split("/"),n=r.length;return r.some(gc)&&(n+=Fg),t&&(n+=Mg),r.filter(s=>!gc(s)).reduce((s,i)=>s+($g.test(i)?Ug:i===""?zg:Bg),n)}function qg(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function Vg(e,t,r){let{routesMeta:n}=e,s={},i="/",a=[];for(let o=0;o<n.length;++o){let l=n[o],u=o===n.length-1,c=i==="/"?t:t.slice(i.length)||"/",h=Hg({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),f=l.route;if(!h)return null;Object.assign(s,h.params),a.push({params:s,pathname:Mt([i,h.pathname]),pathnameBase:Zg(Mt([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=Mt([i,h.pathnameBase]))}return a}function Hg(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=Kg(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:n.reduce((u,c,h)=>{let{paramName:f,isOptional:m}=c;if(f==="*"){let w=o[h]||"";a=i.slice(0,i.length-w.length).replace(/(.)\/+$/,"$1")}const y=o[h];return m&&!y?u[f]=void 0:u[f]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:a,pattern:e}}function Kg(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Jl(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(n.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function Gg(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Jl(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Yl(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}const Jg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Yg=e=>Jg.test(e);function Qg(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?on(e):e,i;if(r)if(Yg(r))i=r;else{if(r.includes("//")){let a=r;r=r.replace(/\/\/+/g,"/"),Jl(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+r))}r.startsWith("/")?i=vc(r.substring(1),"/"):i=vc(r,t)}else i=t;return{pathname:i,search:e0(n),hash:t0(s)}}function vc(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function La(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Xg(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Ql(e,t){let r=Xg(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Xl(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=on(e):(s=is({},e),te(!s.pathname||!s.pathname.includes("?"),La("?","pathname","search",s)),te(!s.pathname||!s.pathname.includes("#"),La("#","pathname","hash",s)),te(!s.search||!s.search.includes("#"),La("#","search","hash",s)));let i=e===""||s.pathname==="",a=i?"/":s.pathname,o;if(a==null)o=r;else{let h=t.length-1;if(!n&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}o=h>=0?t[h]:"/"}let l=Qg(s,o),u=a&&a!=="/"&&a.endsWith("/"),c=(i||a===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const Mt=e=>e.join("/").replace(/\/\/+/g,"/"),Zg=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),e0=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,t0=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function r0(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const vf=["post","put","patch","delete"];new Set(vf);const n0=["get",...vf];new Set(n0);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function as(){return as=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},as.apply(this,arguments)}const Zl=k.createContext(null),s0=k.createContext(null),Kt=k.createContext(null),Zi=k.createContext(null),vt=k.createContext({outlet:null,matches:[],isDataRoute:!1}),yf=k.createContext(null);function i0(e,t){let{relative:r}=t===void 0?{}:t;ln()||te(!1);let{basename:n,navigator:s}=k.useContext(Kt),{hash:i,pathname:a,search:o}=_f(e,{relative:r}),l=a;return n!=="/"&&(l=a==="/"?n:Mt([n,a])),s.createHref({pathname:l,search:o,hash:i})}function ln(){return k.useContext(Zi)!=null}function ws(){return ln()||te(!1),k.useContext(Zi).location}function wf(e){k.useContext(Kt).static||k.useLayoutEffect(e)}function yr(){let{isDataRoute:e}=k.useContext(vt);return e?w0():a0()}function a0(){ln()||te(!1);let e=k.useContext(Zl),{basename:t,future:r,navigator:n}=k.useContext(Kt),{matches:s}=k.useContext(vt),{pathname:i}=ws(),a=JSON.stringify(Ql(s,r.v7_relativeSplatPath)),o=k.useRef(!1);return wf(()=>{o.current=!0}),k.useCallback(function(u,c){if(c===void 0&&(c={}),!o.current)return;if(typeof u=="number"){n.go(u);return}let h=Xl(u,JSON.parse(a),i,c.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:Mt([t,h.pathname])),(c.replace?n.replace:n.push)(h,c.state,c)},[t,n,a,i,e])}function o0(){let{matches:e}=k.useContext(vt),t=e[e.length-1];return t?t.params:{}}function _f(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=k.useContext(Kt),{matches:s}=k.useContext(vt),{pathname:i}=ws(),a=JSON.stringify(Ql(s,n.v7_relativeSplatPath));return k.useMemo(()=>Xl(e,JSON.parse(a),i,r==="path"),[e,a,i,r])}function l0(e,t){return u0(e,t)}function u0(e,t,r,n){ln()||te(!1);let{navigator:s}=k.useContext(Kt),{matches:i}=k.useContext(vt),a=i[i.length-1],o=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let u=ws(),c;if(t){var h;let _=typeof t=="string"?on(t):t;l==="/"||(h=_.pathname)!=null&&h.startsWith(l)||te(!1),c=_}else c=u;let f=c.pathname||"/",m=f;if(l!=="/"){let _=l.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(_.length).join("/")}let y=Ig(e,{pathname:m}),w=p0(y&&y.map(_=>Object.assign({},_,{params:Object.assign({},o,_.params),pathname:Mt([l,s.encodeLocation?s.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?l:Mt([l,s.encodeLocation?s.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),i,r,n);return t&&w?k.createElement(Zi.Provider,{value:{location:as({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Ot.Pop}},w):w}function c0(){let e=y0(),t=r0(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},t),r?k.createElement("pre",{style:s},r):null,null)}const d0=k.createElement(c0,null);class h0 extends k.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?k.createElement(vt.Provider,{value:this.props.routeContext},k.createElement(yf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function f0(e){let{routeContext:t,match:r,children:n}=e,s=k.useContext(Zl);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),k.createElement(vt.Provider,{value:t},n)}function p0(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let a=e,o=(s=r)==null?void 0:s.errors;if(o!=null){let c=a.findIndex(h=>h.route.id&&(o==null?void 0:o[h.route.id])!==void 0);c>=0||te(!1),a=a.slice(0,Math.min(a.length,c+1))}let l=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let c=0;c<a.length;c++){let h=a[c];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=c),h.route.id){let{loaderData:f,errors:m}=r,y=h.route.loader&&f[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||y){l=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((c,h,f)=>{let m,y=!1,w=null,_=null;r&&(m=o&&h.route.id?o[h.route.id]:void 0,w=h.route.errorElement||d0,l&&(u<0&&f===0?(_0("route-fallback"),y=!0,_=null):u===f&&(y=!0,_=h.route.hydrateFallbackElement||null)));let v=t.concat(a.slice(0,f+1)),p=()=>{let g;return m?g=w:y?g=_:h.route.Component?g=k.createElement(h.route.Component,null):h.route.element?g=h.route.element:g=c,k.createElement(f0,{match:h,routeContext:{outlet:c,matches:v,isDataRoute:r!=null},children:g})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?k.createElement(h0,{location:r.location,revalidation:r.revalidation,component:w,error:m,children:p(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):p()},null)}var xf=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(xf||{}),kf=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(kf||{});function m0(e){let t=k.useContext(Zl);return t||te(!1),t}function g0(e){let t=k.useContext(s0);return t||te(!1),t}function v0(e){let t=k.useContext(vt);return t||te(!1),t}function Sf(e){let t=v0(),r=t.matches[t.matches.length-1];return r.route.id||te(!1),r.route.id}function y0(){var e;let t=k.useContext(yf),r=g0(),n=Sf();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function w0(){let{router:e}=m0(xf.UseNavigateStable),t=Sf(kf.UseNavigateStable),r=k.useRef(!1);return wf(()=>{r.current=!0}),k.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,as({fromRouteId:t},i)))},[e,t])}const yc={};function _0(e,t,r){yc[e]||(yc[e]=!0)}function x0(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function it(e){let{to:t,replace:r,state:n,relative:s}=e;ln()||te(!1);let{future:i,static:a}=k.useContext(Kt),{matches:o}=k.useContext(vt),{pathname:l}=ws(),u=yr(),c=Xl(t,Ql(o,i.v7_relativeSplatPath),l,s==="path"),h=JSON.stringify(c);return k.useEffect(()=>u(JSON.parse(h),{replace:r,state:n,relative:s}),[u,h,s,r,n]),null}function xt(e){te(!1)}function k0(e){let{basename:t="/",children:r=null,location:n,navigationType:s=Ot.Pop,navigator:i,static:a=!1,future:o}=e;ln()&&te(!1);let l=t.replace(/^\/*/,"/"),u=k.useMemo(()=>({basename:l,navigator:i,static:a,future:as({v7_relativeSplatPath:!1},o)}),[l,o,i,a]);typeof n=="string"&&(n=on(n));let{pathname:c="/",search:h="",hash:f="",state:m=null,key:y="default"}=n,w=k.useMemo(()=>{let _=Yl(c,l);return _==null?null:{location:{pathname:_,search:h,hash:f,state:m,key:y},navigationType:s}},[l,c,h,f,m,y,s]);return w==null?null:k.createElement(Kt.Provider,{value:u},k.createElement(Zi.Provider,{children:r,value:w}))}function S0(e){let{children:t,location:r}=e;return l0(Bo(t),r)}new Promise(()=>{});function Bo(e,t){t===void 0&&(t=[]);let r=[];return k.Children.forEach(e,(n,s)=>{if(!k.isValidElement(n))return;let i=[...t,s];if(n.type===k.Fragment){r.push.apply(r,Bo(n.props.children,i));return}n.type!==xt&&te(!1),!n.props.index||!n.props.children||te(!1);let a={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=Bo(n.props.children,i)),r.push(a)}),r}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fo(){return Fo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fo.apply(this,arguments)}function b0(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,i;for(i=0;i<n.length;i++)s=n[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function E0(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function j0(e,t){return e.button===0&&(!t||t==="_self")&&!E0(e)}const C0=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],T0="6";try{window.__reactRouterVersion=T0}catch{}const N0="startTransition",wc=wp[N0];function O0(e){let{basename:t,children:r,future:n,window:s}=e,i=k.useRef();i.current==null&&(i.current=Pg({window:s,v5Compat:!0}));let a=i.current,[o,l]=k.useState({action:a.action,location:a.location}),{v7_startTransition:u}=n||{},c=k.useCallback(h=>{u&&wc?wc(()=>l(h)):l(h)},[l,u]);return k.useLayoutEffect(()=>a.listen(c),[a,c]),k.useEffect(()=>x0(n),[n]),k.createElement(k0,{basename:t,children:r,location:o.location,navigationType:o.action,navigator:a,future:n})}const P0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",R0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Nn=k.forwardRef(function(t,r){let{onClick:n,relative:s,reloadDocument:i,replace:a,state:o,target:l,to:u,preventScrollReset:c,viewTransition:h}=t,f=b0(t,C0),{basename:m}=k.useContext(Kt),y,w=!1;if(typeof u=="string"&&R0.test(u)&&(y=u,P0))try{let g=new URL(window.location.href),x=u.startsWith("//")?new URL(g.protocol+u):new URL(u),E=Yl(x.pathname,m);x.origin===g.origin&&E!=null?u=E+x.search+x.hash:w=!0}catch{}let _=i0(u,{relative:s}),v=A0(u,{replace:a,state:o,target:l,preventScrollReset:c,relative:s,viewTransition:h});function p(g){n&&n(g),g.defaultPrevented||v(g)}return k.createElement("a",Fo({},f,{href:y||_,onClick:w||i?n:p,ref:r,target:l}))});var _c;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(_c||(_c={}));var xc;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(xc||(xc={}));function A0(e,t){let{target:r,replace:n,state:s,preventScrollReset:i,relative:a,viewTransition:o}=t===void 0?{}:t,l=yr(),u=ws(),c=_f(e,{relative:a});return k.useCallback(h=>{if(j0(h,r)){h.preventDefault();let f=n!==void 0?n:Pi(u)===Pi(c);l(e,{replace:f,state:s,preventScrollReset:i,relative:a,viewTransition:o})}},[u,l,c,n,s,r,e,i,a,o])}function ea(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function I0(e,t,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function o(c){try{u(n.next(c))}catch(h){a(h)}}function l(c){try{u(n.throw(c))}catch(h){a(h)}}function u(c){c.done?i(c.value):s(c.value).then(o,l)}u((n=n.apply(e,t||[])).next())})}const L0=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class eu extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class D0 extends eu{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class kc extends eu{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Sc extends eu{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Wo;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Wo||(Wo={}));class $0{constructor(t,{headers:r={},customFetch:n,region:s=Wo.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=L0(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return I0(this,arguments,void 0,function*(r,n={}){var s;let i,a;try{const{headers:o,method:l,body:u,signal:c,timeout:h}=n;let f={},{region:m}=n;m||(m=this.region);const y=new URL(`${this.url}/${r}`);m&&m!=="any"&&(f["x-region"]=m,y.searchParams.set("forceFunctionRegion",m));let w;u&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",w=u):typeof u=="string"?(f["Content-Type"]="text/plain",w=u):typeof FormData<"u"&&u instanceof FormData?w=u:(f["Content-Type"]="application/json",w=JSON.stringify(u)):u&&typeof u!="string"&&!(typeof Blob<"u"&&u instanceof Blob)&&!(u instanceof ArrayBuffer)&&!(typeof FormData<"u"&&u instanceof FormData)?w=JSON.stringify(u):w=u;let _=c;h&&(a=new AbortController,i=setTimeout(()=>a.abort(),h),c?(_=a.signal,c.addEventListener("abort",()=>a.abort())):_=a.signal);const v=yield this.fetch(y.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),o),body:w,signal:_}).catch(E=>{throw new D0(E)}),p=v.headers.get("x-relay-error");if(p&&p==="true")throw new kc(v);if(!v.ok)throw new Sc(v);let g=((s=v.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),x;return g==="application/json"?x=yield v.json():g==="application/octet-stream"||g==="application/pdf"?x=yield v.blob():g==="text/event-stream"?x=v:g==="multipart/form-data"?x=yield v.formData():x=yield v.text(),{data:x,error:null,response:v}}catch(o){return{data:null,error:o,response:o instanceof Sc||o instanceof kc?o.context:void 0}}finally{i&&clearTimeout(i)}})}}var U0=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},M0=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let a=null,o=null,l=null,u=i.status,c=i.statusText;if(i.ok){var h,f;if(r.method!=="HEAD"){var m;const v=await i.text();v===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((m=r.headers.get("Accept"))===null||m===void 0)&&m.includes("application/vnd.pgrst.plan+text"))?o=v:o=JSON.parse(v))}const w=(h=r.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),_=(f=i.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");w&&_&&_.length>1&&(l=parseInt(_[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(o)&&(o.length>1?(a={code:"PGRST116",details:`Results contain ${o.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,l=null,u=406,c="Not Acceptable"):o.length===1?o=o[0]:o=null)}else{var y;const w=await i.text();try{a=JSON.parse(w),Array.isArray(a)&&i.status===404&&(o=[],a=null,u=200,c="OK")}catch{i.status===404&&w===""?(u=204,c="No Content"):a={message:w}}if(a&&r.isMaybeSingle&&(!(a==null||(y=a.details)===null||y===void 0)&&y.includes("0 rows"))&&(a=null,u=200,c="OK"),a&&r.shouldThrowOnError)throw new U0(a)}return{error:a,data:o,count:l,status:u,statusText:c}});return this.shouldThrowOnError||(s=s.catch(i=>{var a;let o="";const l=i==null?void 0:i.cause;if(l){var u,c,h,f;const y=(u=l==null?void 0:l.message)!==null&&u!==void 0?u:"",w=(c=l==null?void 0:l.code)!==null&&c!==void 0?c:"";o=`${(h=i==null?void 0:i.name)!==null&&h!==void 0?h:"FetchError"}: ${i==null?void 0:i.message}`,o+=`

Caused by: ${(f=l==null?void 0:l.name)!==null&&f!==void 0?f:"Error"}: ${y}`,w&&(o+=` (${w})`),l!=null&&l.stack&&(o+=`
${l.stack}`)}else{var m;o=(m=i==null?void 0:i.stack)!==null&&m!==void 0?m:""}return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:o,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}},z0=class extends M0{select(e){let t=!1;const r=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:s=n}={}){const i=s?`${s}.order`:"order",a=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"offset":`${n}.offset`,i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:s=!1,format:i="text"}={}){var a;const o=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,s?"wal":null].filter(Boolean).join("|"),l=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${l}"; options=${o};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const bc=new RegExp("[,()]");var Cr=class extends z0{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&bc.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&bc.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let s="";n==="plain"?s="pl":n==="phrase"?s="ph":n==="websearch"&&(s="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}},B0=class{constructor(e,{headers:t={},schema:r,fetch:n}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=n}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:r=!1,count:n}=t??{},s=r?"HEAD":"GET";let i=!1;const a=(e??"*").split("").map(u=>/\s/.test(u)&&!i?"":(u==='"'&&(i=!i),u)).join(""),{url:o,headers:l}=this.cloneRequestState();return o.searchParams.set("select",a),n&&l.append("Prefer",`count=${n}`),new Cr({method:s,url:o,headers:l,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var n;const s="POST",{url:i,headers:a}=this.cloneRequestState();if(t&&a.append("Prefer",`count=${t}`),r||a.append("Prefer","missing=default"),Array.isArray(e)){const o=e.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(o.length>0){const l=[...new Set(o)].map(u=>`"${u}"`);i.searchParams.set("columns",l.join(","))}}return new Cr({method:s,url:i,headers:a,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:s=!0}={}){var i;const a="POST",{url:o,headers:l}=this.cloneRequestState();if(l.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&o.searchParams.set("on_conflict",t),n&&l.append("Prefer",`count=${n}`),s||l.append("Prefer","missing=default"),Array.isArray(e)){const u=e.reduce((c,h)=>c.concat(Object.keys(h)),[]);if(u.length>0){const c=[...new Set(u)].map(h=>`"${h}"`);o.searchParams.set("columns",c.join(","))}}return new Cr({method:a,url:o,headers:l,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:t}={}){var r;const n="PATCH",{url:s,headers:i}=this.cloneRequestState();return t&&i.append("Prefer",`count=${t}`),new Cr({method:n,url:s,headers:i,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var t;const r="DELETE",{url:n,headers:s}=this.cloneRequestState();return e&&s.append("Prefer",`count=${e}`),new Cr({method:r,url:n,headers:s,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},F0=class bf{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=s}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new B0(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new bf(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:i}={}){var a;let o;const l=new URL(`${this.url}/rpc/${t}`);let u;const c=m=>m!==null&&typeof m=="object"&&(!Array.isArray(m)||m.some(c)),h=n&&Object.values(r).some(c);h?(o="POST",u=r):n||s?(o=n?"HEAD":"GET",Object.entries(r).filter(([m,y])=>y!==void 0).map(([m,y])=>[m,Array.isArray(y)?`{${y.join(",")}}`:`${y}`]).forEach(([m,y])=>{l.searchParams.append(m,y)})):(o="POST",u=r);const f=new Headers(this.headers);return h?f.set("Prefer",i?`count=${i},return=minimal`:"return=minimal"):i&&f.set("Prefer",`count=${i}`),new Cr({method:o,url:l,headers:f,schema:this.schemaName,body:u,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};class W0{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const n=r.versions;if(n&&n.node){const s=n.node,i=parseInt(s.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const q0="2.93.3",V0=`realtime-js/${q0}`,H0="1.0.0",Ef="2.0.0",Ec=Ef,qo=1e4,K0=1e3,G0=100;var bt;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(bt||(bt={}));var se;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(se||(se={}));var Je;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Je||(Je={}));var Vo;(function(e){e.websocket="websocket"})(Vo||(Vo={}));var rr;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(rr||(rr={}));class J0{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n;const s=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(t){var r,n;const s=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},a=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,a)}_encodeUserBroadcastPush(t,r,n){var s,i;const a=t.topic,o=(s=t.ref)!==null&&s!==void 0?s:"",l=(i=t.join_ref)!==null&&i!==void 0?i:"",u=t.payload.event,c=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},h=Object.keys(c).length===0?"":JSON.stringify(c);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`ref length ${o.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`topic length ${a.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`metadata length ${h.length} exceeds maximum of 255`);const f=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+o.length+a.length+u.length+h.length,m=new ArrayBuffer(this.HEADER_LENGTH+f);let y=new DataView(m),w=0;y.setUint8(w++,this.KINDS.userBroadcastPush),y.setUint8(w++,l.length),y.setUint8(w++,o.length),y.setUint8(w++,a.length),y.setUint8(w++,u.length),y.setUint8(w++,h.length),y.setUint8(w++,r),Array.from(l,v=>y.setUint8(w++,v.charCodeAt(0))),Array.from(o,v=>y.setUint8(w++,v.charCodeAt(0))),Array.from(a,v=>y.setUint8(w++,v.charCodeAt(0))),Array.from(u,v=>y.setUint8(w++,v.charCodeAt(0))),Array.from(h,v=>y.setUint8(w++,v.charCodeAt(0)));var _=new Uint8Array(m.byteLength+n.byteLength);return _.set(new Uint8Array(m),0),_.set(new Uint8Array(n),m.byteLength),_.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[s,i,a,o,l]=n;return r({join_ref:s,ref:i,topic:a,event:o,payload:l})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),s=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,s)}}_decodeUserBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2),a=r.getUint8(3),o=r.getUint8(4);let l=this.HEADER_LENGTH+4;const u=n.decode(t.slice(l,l+s));l=l+s;const c=n.decode(t.slice(l,l+i));l=l+i;const h=n.decode(t.slice(l,l+a));l=l+a;const f=t.slice(l,t.byteLength),m=o===this.JSON_ENCODING?JSON.parse(n.decode(f)):f,y={type:this.BROADCAST_EVENT,event:c,payload:m};return a>0&&(y.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:y}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([n])=>r.includes(n)))}}class jf{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var W;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(W||(W={}));const jc=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((i,a)=>(i[a]=Y0(a,e,t,s),i),{}):{}},Y0=(e,t,r,n)=>{const s=t.find(o=>o.name===e),i=s==null?void 0:s.type,a=r[e];return i&&!n.includes(i)?Cf(i,a):Ho(a)},Cf=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return ev(t,r)}switch(e){case W.bool:return Q0(t);case W.float4:case W.float8:case W.int2:case W.int4:case W.int8:case W.numeric:case W.oid:return X0(t);case W.json:case W.jsonb:return Z0(t);case W.timestamp:return tv(t);case W.abstime:case W.date:case W.daterange:case W.int4range:case W.int8range:case W.money:case W.reltime:case W.text:case W.time:case W.timestamptz:case W.timetz:case W.tsrange:case W.tstzrange:return Ho(t);default:return Ho(t)}},Ho=e=>e,Q0=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},X0=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Z0=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},ev=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const a=e.slice(1,r);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(o=>Cf(t,o))}return e},tv=e=>typeof e=="string"?e.replace(" ","T"):e,Tf=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Da{constructor(t,r,n={},s=qo){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Cc;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Cc||(Cc={}));class zn{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=zn.syncState(this.state,s,i,a),this.pendingDiffs.forEach(l=>{this.state=zn.syncDiff(this.state,l,i,a)}),this.pendingDiffs=[],o()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=zn.syncDiff(this.state,s,i,a),o())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),a=this.transformState(r),o={},l={};return this.map(i,(u,c)=>{a[u]||(l[u]=c)}),this.map(a,(u,c)=>{const h=i[u];if(h){const f=c.map(_=>_.presence_ref),m=h.map(_=>_.presence_ref),y=c.filter(_=>m.indexOf(_.presence_ref)<0),w=h.filter(_=>f.indexOf(_.presence_ref)<0);y.length>0&&(o[u]=y),w.length>0&&(l[u]=w)}else o[u]=c}),this.syncDiff(i,{joins:o,leaves:l},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:a}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(o,l)=>{var u;const c=(u=t[o])!==null&&u!==void 0?u:[];if(t[o]=this.cloneDeep(l),c.length>0){const h=t[o].map(m=>m.presence_ref),f=c.filter(m=>h.indexOf(m.presence_ref)<0);t[o].unshift(...f)}n(o,c,l)}),this.map(a,(o,l)=>{let u=t[o];if(!u)return;const c=l.map(h=>h.presence_ref);u=u.filter(h=>c.indexOf(h.presence_ref)<0),t[o]=u,s(o,u,l),u.length===0&&delete t[o]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Tc;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Tc||(Tc={}));var Bn;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Bn||(Bn={}));var ot;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(ot||(ot={}));class Fr{constructor(t,r={config:{}},n){var s,i;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=se.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Da(this,Je.join,this.params,this.timeout),this.rejoinTimer=new jf(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=se.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=se.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=se.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=se.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=se.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Je.reply,{},(a,o)=>{this._trigger(this._replyEventName(o),a)}),this.presence=new zn(this),this.broadcastEndpointURL=Tf(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==se.closed){const{config:{broadcast:a,presence:o,private:l}}=this.params,u=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(m=>m.filter))!==null&&s!==void 0?s:[],c=!!this.bindings[Bn.PRESENCE]&&this.bindings[Bn.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},f={broadcast:a,presence:Object.assign(Object.assign({},o),{enabled:c}),postgres_changes:u,private:l};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(m=>t==null?void 0:t(ot.CHANNEL_ERROR,m)),this._onClose(()=>t==null?void 0:t(ot.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:m})=>{var y;if(this.socket._isManualToken()||this.socket.setAuth(),m===void 0){t==null||t(ot.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,_=(y=w==null?void 0:w.length)!==null&&y!==void 0?y:0,v=[];for(let p=0;p<_;p++){const g=w[p],{filter:{event:x,schema:E,table:S,filter:j}}=g,N=m&&m[p];if(N&&N.event===x&&Fr.isFilterValueEqual(N.schema,E)&&Fr.isFilterValueEqual(N.table,S)&&Fr.isFilterValueEqual(N.filter,j))v.push(Object.assign(Object.assign({},g),{id:N.id}));else{this.unsubscribe(),this.state=se.errored,t==null||t(ot.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,t&&t(ot.SUBSCRIBED);return}}).receive("error",m=>{this.state=se.errored,t==null||t(ot.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(ot.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===se.joined&&t===Bn.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var s;if(r==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const a={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},o=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);if(o.status===202)return{success:!0};let l=o.statusText;try{const u=await o.json();l=u.error||u.message||l}catch{}return Promise.reject(new Error(l))}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:a}=t,o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,o,l;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=se.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Je.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new Da(this,Je.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=se.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),a=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),a}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Da(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>G0){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const a=t.toLocaleLowerCase(),{close:o,error:l,leave:u,join:c}=Je;if(n&&[o,l,u,c].indexOf(a)>=0&&n!==this._joinRef())return;let f=this._onMessage(a,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(m=>{var y,w,_;return((y=m.filter)===null||y===void 0?void 0:y.event)==="*"||((_=(w=m.filter)===null||w===void 0?void 0:w.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===a}).map(m=>m.callback(f,n)):(i=this.bindings[a])===null||i===void 0||i.filter(m=>{var y,w,_,v,p,g;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in m){const x=m.id,E=(y=m.filter)===null||y===void 0?void 0:y.event;return x&&((w=r.ids)===null||w===void 0?void 0:w.includes(x))&&(E==="*"||(E==null?void 0:E.toLocaleLowerCase())===((_=r.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const x=(p=(v=m==null?void 0:m.filter)===null||v===void 0?void 0:v.event)===null||p===void 0?void 0:p.toLocaleLowerCase();return x==="*"||x===((g=r==null?void 0:r.event)===null||g===void 0?void 0:g.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===a}).map(m=>{if(typeof f=="object"&&"ids"in f){const y=f.data,{schema:w,table:_,commit_timestamp:v,type:p,errors:g}=y;f=Object.assign(Object.assign({},{schema:w,table:_,commit_timestamp:v,eventType:p,new:{},old:{},errors:g}),this._getPayloadRecords(y))}m.callback(f,n)})}_isClosed(){return this.state===se.closed}_isJoined(){return this.state===se.joined}_isJoining(){return this.state===se.joining}_isLeaving(){return this.state===se.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Fr.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Je.close,{},t)}_onError(t){this._on(Je.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=se.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=jc(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=jc(t.columns,t.old_record)),r}}const $a=()=>{},zs={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},rv=[1e3,2e3,5e3,1e4],nv=1e4,sv=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class iv{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=qo,this.transport=null,this.heartbeatIntervalMs=zs.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=$a,this.ref=0,this.reconnectTimer=null,this.vsn=Ec,this.logger=$a,this.conn=null,this.sendBuffer=[],this.serializer=new J0,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Vo.websocket}`,this.httpEndpoint=Tf(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=W0.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case bt.connecting:return rr.Connecting;case bt.open:return rr.Open;case bt.closing:return rr.Closing;default:return rr.Closed}}isConnected(){return this.connectionState()===rr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new Fr(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,a=()=>{this.encode(t,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(K0,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},zs.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const u=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",u)}catch(c){this.log("error","error in heartbeat callback",c)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:n,event:s,payload:i,ref:a}=r,o=a?`(${a})`:"",l=i.status||"";this.log("receive",`${l} ${n} ${s} ${o}`.trim(),i),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(s,i,a)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===bt.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===bt.open||this.conn.readyState===bt.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t);try{this.heartbeatCallback("error")}catch(r){this.log("error","error in heartbeat callback",r)}}_triggerChanError(){this.channels.forEach(t=>t._trigger(Je.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([sv],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,n=!1;if(t)r=t,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const i={access_token:r,version:V0};r&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(Je.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new jf(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},zs.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,i,a,o,l,u,c,h,f,m;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:qo,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:zs.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(a=t==null?void 0:t.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(o=t==null?void 0:t.heartbeatCallback)!==null&&o!==void 0?o:$a,this.vsn=(l=t==null?void 0:t.vsn)!==null&&l!==void 0?l:Ec,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:y=>rv[y-1]||nv,this.vsn){case H0:this.encode=(c=t==null?void 0:t.encode)!==null&&c!==void 0?c:(y,w)=>w(JSON.stringify(y)),this.decode=(h=t==null?void 0:t.decode)!==null&&h!==void 0?h:(y,w)=>w(JSON.parse(y));break;case Ef:this.encode=(f=t==null?void 0:t.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(m=t==null?void 0:t.decode)!==null&&m!==void 0?m:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var os=class extends Error{constructor(e,t){var r;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((r=t.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function av(e,t,r){const n=new URL(t,e);if(r)for(const[s,i]of Object.entries(r))i!==void 0&&n.searchParams.set(s,i);return n.toString()}async function ov(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function lv(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:s,body:i,headers:a}){const o=av(e.baseUrl,n,s),l=await ov(e.auth),u=await t(o,{method:r,headers:{...i?{"Content-Type":"application/json"}:{},...l,...a},body:i?JSON.stringify(i):void 0}),c=await u.text(),h=(u.headers.get("content-type")||"").includes("application/json"),f=h&&c?JSON.parse(c):c;if(!u.ok){const m=h?f:void 0,y=m==null?void 0:m.error;throw new os((y==null?void 0:y.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:y==null?void 0:y.type,icebergCode:y==null?void 0:y.code,details:m})}return{status:u.status,headers:u.headers,data:f}}}}function Bs(e){return e.join("")}var uv=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:Bs(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Bs(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Bs(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Bs(e.namespace)}`}),!0}catch(t){if(t instanceof os&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof os&&r.status===409)return;throw r}}};function _r(e){return e.join("")}var cv=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${_r(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${_r(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${_r(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${_r(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${_r(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${_r(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof os&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof os&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},dv=class{constructor(e){var n;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=lv({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(n=e.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new uv(this.client,t),this.tableOps=new cv(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},ta=class extends Error{constructor(e,t="storage",r,n){super(e),this.__isStorageError=!0,this.namespace=t,this.name=t==="vectors"?"StorageVectorsError":"StorageError",this.status=r,this.statusCode=n}};function ra(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var Fs=class extends ta{constructor(e,t,r,n="storage"){super(e,n,t,r),this.name=n==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Nf=class extends ta{constructor(e,t,r="storage"){super(e,r),this.name=r==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=t}};const hv=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),fv=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Ko=e=>{if(Array.isArray(e))return e.map(r=>Ko(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=Ko(n)}),t},pv=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function ls(e){"@babel/helpers - typeof";return ls=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ls(e)}function mv(e,t){if(ls(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ls(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gv(e){var t=mv(e,"string");return ls(t)=="symbol"?t:t+""}function vv(e,t,r){return(t=gv(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Nc(Object(r),!0).forEach(function(n){vv(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nc(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const Oc=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},yv=async(e,t,r,n)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const s=e,i=s.status||500;if(typeof s.json=="function")s.json().then(a=>{const o=(a==null?void 0:a.statusCode)||(a==null?void 0:a.code)||i+"";t(new Fs(Oc(a),i,o,n))}).catch(()=>{if(n==="vectors"){const a=i+"";t(new Fs(s.statusText||`HTTP ${i} error`,i,a,n))}else{const a=i+"";t(new Fs(s.statusText||`HTTP ${i} error`,i,a,n))}});else{const a=i+"";t(new Fs(s.statusText||`HTTP ${i} error`,i,a,n))}}else t(new Nf(Oc(e),e,n))},wv=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||e==="HEAD"||!n?R(R({},s),r):(fv(n)?(s.headers=R({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),R(R({},s),r))};async function _n(e,t,r,n,s,i,a){return new Promise((o,l)=>{e(r,wv(t,n,s,i)).then(u=>{if(!u.ok)throw u;if(n!=null&&n.noResolveJson)return u;if(a==="vectors"){const c=u.headers.get("content-type");if(u.headers.get("content-length")==="0"||u.status===204)return{};if(!c||!c.includes("application/json"))return{}}return u.json()}).then(u=>o(u)).catch(u=>yv(u,l,n,a))})}function Of(e="storage"){return{get:async(t,r,n,s)=>_n(t,"GET",r,n,s,void 0,e),post:async(t,r,n,s,i)=>_n(t,"POST",r,s,i,n,e),put:async(t,r,n,s,i)=>_n(t,"PUT",r,s,i,n,e),head:async(t,r,n,s)=>_n(t,"HEAD",r,R(R({},n),{},{noResolveJson:!0}),s,void 0,e),remove:async(t,r,n,s,i)=>_n(t,"DELETE",r,s,i,n,e)}}const _v=Of("storage"),{get:us,post:Ke,put:Go,head:xv,remove:tu}=_v,Oe=Of("vectors");var un=class{constructor(e,t={},r,n="storage"){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.fetch=hv(r),this.namespace=n}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(e){var t=this;try{return{data:await e(),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ra(r))return{data:null,error:r};throw r}}},kv=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ra(t))return{data:null,error:t};throw t}}};let Pf;Pf=Symbol.toStringTag;var Sv=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[Pf]="BlobDownloadBuilder",this.promise=null}asStream(){return new kv(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ra(t))return{data:null,error:t};throw t}}};const bv={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Pc={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Ev=class extends un{constructor(e,t={},r,n){super(e,t,n,"storage"),this.bucketId=r}async uploadOrUpdate(e,t,r,n){var s=this;return s.handleOperation(async()=>{let i;const a=R(R({},Pc),n);let o=R(R({},s.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const l=a.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),l&&i.append("metadata",s.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.has("cacheControl")||i.append("cacheControl",a.cacheControl),l&&!i.has("metadata")&&i.append("metadata",s.encodeMetadata(l))):(i=r,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,l&&(o["x-metadata"]=s.toBase64(s.encodeMetadata(l))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!a.duplex&&(a.duplex="half")),n!=null&&n.headers&&(o=R(R({},o),n.headers));const u=s._removeEmptyFolders(t),c=s._getFinalPath(u),h=await(e=="PUT"?Go:Ke)(s.fetch,`${s.url}/object/${c}`,i,R({headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{path:u,id:h.Id,fullPath:h.Key}})}async upload(e,t,r){return this.uploadOrUpdate("POST",e,t,r)}async uploadToSignedUrl(e,t,r,n){var s=this;const i=s._removeEmptyFolders(e),a=s._getFinalPath(i),o=new URL(s.url+`/object/upload/sign/${a}`);return o.searchParams.set("token",t),s.handleOperation(async()=>{let l;const u=R({upsert:Pc.upsert},n),c=R(R({},s.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType),{path:i,fullPath:(await Go(s.fetch,o.toString(),l,{headers:c})).Key}})}async createSignedUploadUrl(e,t){var r=this;return r.handleOperation(async()=>{let n=r._getFinalPath(e);const s=R({},r.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const i=await Ke(r.fetch,`${r.url}/object/upload/sign/${n}`,{},{headers:s}),a=new URL(r.url+i.url),o=a.searchParams.get("token");if(!o)throw new ta("No token returned by API");return{signedUrl:a.toString(),path:e,token:o}})}async update(e,t,r){return this.uploadOrUpdate("PUT",e,t,r)}async move(e,t,r){var n=this;return n.handleOperation(async()=>await Ke(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers}))}async copy(e,t,r){var n=this;return n.handleOperation(async()=>({path:(await Ke(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers})).Key}))}async createSignedUrl(e,t,r){var n=this;return n.handleOperation(async()=>{let s=n._getFinalPath(e),i=await Ke(n.fetch,`${n.url}/object/sign/${s}`,R({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:n.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{signedUrl:encodeURI(`${n.url}${i.signedURL}${a}`)}})}async createSignedUrls(e,t,r){var n=this;return n.handleOperation(async()=>{const s=await Ke(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:t,paths:e},{headers:n.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s.map(a=>R(R({},a),{},{signedUrl:a.signedURL?encodeURI(`${n.url}${a.signedURL}${i}`):null}))})}download(e,t){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),s=n?`?${n}`:"",i=this._getFinalPath(e),a=()=>us(this.fetch,`${this.url}/${r}/${i}${s}`,{headers:this.headers,noResolveJson:!0});return new Sv(a,this.shouldThrowOnError)}async info(e){var t=this;const r=t._getFinalPath(e);return t.handleOperation(async()=>Ko(await us(t.fetch,`${t.url}/object/info/${r}`,{headers:t.headers})))}async exists(e){var t=this;const r=t._getFinalPath(e);try{return await xv(t.fetch,`${t.url}/object/${r}`,{headers:t.headers}),{data:!0,error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ra(n)&&n instanceof Nf){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&n.push(s);const i=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",a=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});a!==""&&n.push(a);let o=n.join("&");return o!==""&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${r}${o}`)}}}async remove(e){var t=this;return t.handleOperation(async()=>await tu(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}))}async list(e,t,r){var n=this;return n.handleOperation(async()=>{const s=R(R(R({},bv),t),{},{prefix:e||""});return await Ke(n.fetch,`${n.url}/object/list/${n.bucketId}`,s,{headers:n.headers},r)})}async listV2(e,t){var r=this;return r.handleOperation(async()=>{const n=R({},e);return await Ke(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,n,{headers:r.headers},t)})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const jv="2.93.3",_s={"X-Client-Info":`storage-js/${jv}`};var Cv=class extends un{constructor(e,t={},r,n){const s=new URL(e);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase."));const i=s.href.replace(/\/$/,""),a=R(R({},_s),t);super(i,a,r,"storage")}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const r=t.listBucketOptionsToQueryString(e);return await us(t.fetch,`${t.url}/bucket${r}`,{headers:t.headers})})}async getBucket(e){var t=this;return t.handleOperation(async()=>await us(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}))}async createBucket(e,t={public:!1}){var r=this;return r.handleOperation(async()=>await Ke(r.fetch,`${r.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}))}async updateBucket(e,t){var r=this;return r.handleOperation(async()=>await Go(r.fetch,`${r.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}))}async emptyBucket(e){var t=this;return t.handleOperation(async()=>await Ke(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await tu(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},Tv=class extends un{constructor(e,t={},r){const n=e.replace(/\/$/,""),s=R(R({},_s),t);super(n,s,r,"storage")}async createBucket(e){var t=this;return t.handleOperation(async()=>await Ke(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}))}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),s=n?`${t.url}/bucket?${n}`:`${t.url}/bucket`;return await us(t.fetch,s,{headers:t.headers})})}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await tu(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}from(e){var t=this;if(!pv(e))throw new ta("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new dv({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(s,i){const a=s[i];return typeof a!="function"?a:async(...o)=>{try{return{data:await a.apply(s,o),error:null}}catch(l){if(n)throw l;return{data:null,error:l}}}}})}},Nv=class extends un{constructor(e,t={},r){const n=e.replace(/\/$/,""),s=R(R({},_s),{},{"Content-Type":"application/json"},t);super(n,s,r,"vectors")}async createIndex(e){var t=this;return t.handleOperation(async()=>await Oe.post(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{})}async getIndex(e,t){var r=this;return r.handleOperation(async()=>await Oe.post(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers}))}async listIndexes(e){var t=this;return t.handleOperation(async()=>await Oe.post(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}))}async deleteIndex(e,t){var r=this;return r.handleOperation(async()=>await Oe.post(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers})||{})}},Ov=class extends un{constructor(e,t={},r){const n=e.replace(/\/$/,""),s=R(R({},_s),{},{"Content-Type":"application/json"},t);super(n,s,r,"vectors")}async putVectors(e){var t=this;if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return t.handleOperation(async()=>await Oe.post(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{})}async getVectors(e){var t=this;return t.handleOperation(async()=>await Oe.post(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}))}async listVectors(e){var t=this;if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return t.handleOperation(async()=>await Oe.post(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}))}async queryVectors(e){var t=this;return t.handleOperation(async()=>await Oe.post(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}))}async deleteVectors(e){var t=this;if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return t.handleOperation(async()=>await Oe.post(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{})}},Pv=class extends un{constructor(e,t={},r){const n=e.replace(/\/$/,""),s=R(R({},_s),{},{"Content-Type":"application/json"},t);super(n,s,r,"vectors")}async createBucket(e){var t=this;return t.handleOperation(async()=>await Oe.post(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}async getBucket(e){var t=this;return t.handleOperation(async()=>await Oe.post(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}))}async listBuckets(e={}){var t=this;return t.handleOperation(async()=>await Oe.post(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await Oe.post(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}},Rv=class extends Pv{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new Av(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,r=this;return t().call(r,e)}async getBucket(e){var t=()=>super.getBucket,r=this;return t().call(r,e)}async listBuckets(e={}){var t=()=>super.listBuckets,r=this;return t().call(r,e)}async deleteBucket(e){var t=()=>super.deleteBucket,r=this;return t().call(r,e)}},Av=class extends Nv{constructor(e,t,r,n){super(e,t,n),this.vectorBucketName=r}async createIndex(e){var t=()=>super.createIndex,r=this;return t().call(r,R(R({},e),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,r=this;return t().call(r,R(R({},e),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,r=this;return t().call(r,r.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,r=this;return t().call(r,r.vectorBucketName,e)}index(e){return new Iv(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},Iv=class extends Ov{constructor(e,t,r,n,s){super(e,t,s),this.vectorBucketName=r,this.indexName=n}async putVectors(e){var t=()=>super.putVectors,r=this;return t().call(r,R(R({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(e){var t=()=>super.getVectors,r=this;return t().call(r,R(R({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,r=this;return t().call(r,R(R({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,r=this;return t().call(r,R(R({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,r=this;return t().call(r,R(R({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},Lv=class extends Cv{constructor(e,t={},r,n){super(e,t,r,n)}from(e){return new Ev(this.url,this.headers,e,this.fetch)}get vectors(){return new Rv(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Tv(this.url+"/iceberg",this.headers,this.fetch)}};const Rf="2.93.3",Tr=30*1e3,Jo=3,Ua=Jo*Tr,Dv="http://localhost:9999",$v="supabase.auth.token",Uv={"X-Client-Info":`gotrue-js/${Rf}`},Yo="X-Supabase-Api-Version",Af={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Mv=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,zv=10*60*1e3;class cs extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function O(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Bv extends cs{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function Fv(e){return O(e)&&e.name==="AuthApiError"}class nr extends cs{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class yt extends cs{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class Te extends yt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Ma(e){return O(e)&&e.name==="AuthSessionMissingError"}class xr extends yt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ws extends yt{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class qs extends yt{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Wv(e){return O(e)&&e.name==="AuthImplicitGrantRedirectError"}class Rc extends yt{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class qv extends yt{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Qo extends yt{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function za(e){return O(e)&&e.name==="AuthRetryableFetchError"}class Ac extends yt{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Xo extends yt{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ri="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ic=` 	
\r=`.split(""),Vv=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Ic.length;t+=1)e[Ic[t].charCodeAt(0)]=-2;for(let t=0;t<Ri.length;t+=1)e[Ri[t].charCodeAt(0)]=t;return e})();function Lc(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Ri[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Ri[n]),t.queuedBits-=6}}function If(e,t,r){const n=Vv[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Dc(e){const t=[],r=a=>{t.push(String.fromCodePoint(a))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=a=>{Gv(a,n,r)};for(let a=0;a<e.length;a+=1)If(e.charCodeAt(a),s,i);return t.join("")}function Hv(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Kv(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}Hv(n,t)}}function Gv(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Jr(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)If(e.charCodeAt(s),r,n);return new Uint8Array(t)}function Jv(e){const t=[];return Kv(e,r=>t.push(r)),new Uint8Array(t)}function or(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>Lc(s,r,n)),Lc(null,r,n),t.join("")}function Yv(e){return Math.round(Date.now()/1e3)+e}function Qv(){return Symbol("auth-callback")}const de=()=>typeof window<"u"&&typeof document<"u",Yt={tested:!1,writable:!1},Lf=()=>{if(!de())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Yt.tested)return Yt.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Yt.tested=!0,Yt.writable=!0}catch{Yt.tested=!0,Yt.writable=!1}return Yt.writable};function Xv(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const Df=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Zv=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Nr=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Qt=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},ce=async(e,t)=>{await e.removeItem(t)};class na{constructor(){this.promise=new na.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}na.promiseConstructor=Promise;function Vs(e){const t=e.split(".");if(t.length!==3)throw new Xo("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!Mv.test(t[n]))throw new Xo("JWT not in base64url format");return{header:JSON.parse(Dc(t[0])),payload:JSON.parse(Dc(t[1])),signature:Jr(t[2]),raw:{header:t[0],payload:t[1]}}}async function ey(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function ty(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await e(i);if(!t(i,null,a)){n(a);return}}catch(a){if(!t(i,a)){s(a);return}}})()})}function ry(e){return("0"+e.toString(16)).substr(-2)}function ny(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,ry).join("")}async function sy(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function iy(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await sy(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function kr(e,t,r=!1){const n=ny();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Nr(e,`${t}-code-verifier`,s);const i=await iy(n);return[i,n===i?"plain":"s256"]}const ay=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function oy(e){const t=e.headers.get(Yo);if(!t||!t.match(ay))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function ly(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function uy(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const cy=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Sr(e){if(!cy.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ba(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function dy(e,t){return new Proxy(e,{get:(r,n,s)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,s)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,s)}})}function $c(e){return JSON.parse(JSON.stringify(e))}const er=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),hy=[502,503,504];async function Uc(e){var t;if(!Zv(e))throw new Qo(er(e),0);if(hy.includes(e.status))throw new Qo(er(e),e.status);let r;try{r=await e.json()}catch(i){throw new nr(er(i),i)}let n;const s=oy(e);if(s&&s.getTime()>=Af["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Ac(er(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Te}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new Ac(er(r),e.status,r.weak_password.reasons);throw new Bv(er(r),e.status||500,n)}const fy=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function P(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[Yo]||(i[Yo]=Af["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const a=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(a.redirect_to=n.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await py(e,t,r+o,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function py(e,t,r,n,s,i){const a=fy(t,n,s,i);let o;try{o=await e(r,Object.assign({},a))}catch(l){throw console.error(l),new Qo(er(l),0)}if(o.ok||await Uc(o),n!=null&&n.noResolveJson)return o;try{return await o.json()}catch(l){await Uc(l)}}function Ve(e){var t;let r=null;vy(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=Yv(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function Mc(e){const t=Ve(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Ct(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function my(e){return{data:e,error:null}}function gy(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,a=ea(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},l=Object.assign({},a);return{data:{properties:o,user:l},error:null}}function zc(e){return e}function vy(e){return e.access_token&&e.refresh_token&&e.expires_in}const Fa=["global","local","others"];class yy{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=Df(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=Fa[0]){if(Fa.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Fa.join(", ")}`);try{return await P(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(O(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await P(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Ct})}catch(n){if(O(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=ea(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await P(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:gy,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(O(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await P(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ct})}catch(r){if(O(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,a,o,l;try{const u={nextPage:null,lastPage:0,total:0},c=await P(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:zc});if(c.error)throw c.error;const h=await c.json(),f=(a=c.headers.get("x-total-count"))!==null&&a!==void 0?a:0,m=(l=(o=c.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(y=>{const w=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(y.split(";")[1].split("=")[1]);u[`${_}Page`]=w}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(O(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Sr(t);try{return await P(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ct})}catch(r){if(O(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Sr(t);try{return await P(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Ct})}catch(n){if(O(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Sr(t);try{return await P(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Ct})}catch(n){if(O(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Sr(t.userId);try{const{data:r,error:n}=await P(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(O(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Sr(t.userId),Sr(t.id);try{return{data:await P(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(O(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,s,i,a,o,l;try{const u={nextPage:null,lastPage:0,total:0},c=await P(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:zc});if(c.error)throw c.error;const h=await c.json(),f=(a=c.headers.get("x-total-count"))!==null&&a!==void 0?a:0,m=(l=(o=c.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(y=>{const w=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(y.split(";")[1].split("=")[1]);u[`${_}Page`]=w}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(O(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await P(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(O(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await P(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(O(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await P(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(O(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await P(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(O(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await P(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(O(r))return{data:null,error:r};throw r}}}function Bc(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const br={debug:!!(globalThis&&Lf()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class $f extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class wy extends $f{}async function _y(e,t,r){br.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),br.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){br.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{br.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw br.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new wy(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(br.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function xy(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Uf(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function ky(e){return parseInt(e,16)}function Sy(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function by(e){var t;const{chainId:r,domain:n,expirationTime:s,issuedAt:i=new Date,nonce:a,notBefore:o,requestId:l,resources:u,scheme:c,uri:h,version:f}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const m=Uf(e.address),y=c?`${c}://${n}`:n,w=e.statement?`${e.statement}
`:"",_=`${y} wants you to sign in with your Ethereum account:
${m}

${w}`;let v=`URI: ${h}
Version: ${f}
Chain ID: ${r}${a?`
Nonce: ${a}`:""}
Issued At: ${i.toISOString()}`;if(s&&(v+=`
Expiration Time: ${s.toISOString()}`),o&&(v+=`
Not Before: ${o.toISOString()}`),l&&(v+=`
Request ID: ${l}`),u){let p=`
Resources:`;for(const g of u){if(!g||typeof g!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${g}`);p+=`
- ${g}`}v+=p}return`${_}
${v}`}class re extends Error{constructor({message:t,code:r,cause:n,name:s}){var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=s??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class Ai extends re{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function Ey({error:e,options:t}){var r,n,s;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new re({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new re({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new re({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new re({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new re({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new re({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(o=>o.type==="public-key").length===0?new re({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new re({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const a=window.location.hostname;if(Mf(a)){if(i.rp.id!==a)return new re({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new re({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new re({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new re({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new re({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function jy({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new re({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new re({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(Mf(n)){if(r.rpId!==n)return new re({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new re({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new re({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new re({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class Cy{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const Ty=new Cy;function Ny(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,s=ea(e,["challenge","user","excludeCredentials"]),i=Jr(t).buffer,a=Object.assign(Object.assign({},r),{id:Jr(r.id).buffer}),o=Object.assign(Object.assign({},s),{challenge:i,user:a});if(n&&n.length>0){o.excludeCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const u=n[l];o.excludeCredentials[l]=Object.assign(Object.assign({},u),{id:Jr(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return o}function Oy(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=ea(e,["challenge","allowCredentials"]),s=Jr(t).buffer,i=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let a=0;a<r.length;a++){const o=r[a];i.allowCredentials[a]=Object.assign(Object.assign({},o),{id:Jr(o.id).buffer,type:o.type||"public-key",transports:o.transports})}}return i}function Py(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:or(new Uint8Array(e.response.attestationObject)),clientDataJSON:or(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Ry(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:or(new Uint8Array(s.authenticatorData)),clientDataJSON:or(new Uint8Array(s.clientDataJSON)),signature:or(new Uint8Array(s.signature)),userHandle:s.userHandle?or(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Mf(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Fc(){var e,t;return!!(de()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function Ay(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Ai("Browser returned unexpected credential type",t)}:{data:null,error:new Ai("Empty credential response",t)}}catch(t){return{data:null,error:Ey({error:t,options:e})}}}async function Iy(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Ai("Browser returned unexpected credential type",t)}:{data:null,error:new Ai("Empty credential response",t)}}catch(t){return{data:null,error:jy({error:t,options:e})}}}const Ly={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Dy={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Ii(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of e)if(s)for(const i in s){const a=s[i];if(a!==void 0)if(Array.isArray(a))n[i]=a;else if(r(a))n[i]=a;else if(t(a)){const o=n[i];t(o)?n[i]=Ii(o,a):n[i]=Ii(a)}else n[i]=a}return n}function $y(e,t){return Ii(Ly,e,t||{})}function Uy(e,t){return Ii(Dy,e,t||{})}class My{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:s},i){var a;try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!o)return{data:null,error:l};const u=s??Ty.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:c}=o.webauthn.credential_options.publicKey;if(!c.name){const h=n;if(h)c.name=`${c.id}:${h}`;else{const m=(await this.client.getUser()).data.user,y=((a=m==null?void 0:m.user_metadata)===null||a===void 0?void 0:a.name)||(m==null?void 0:m.email)||(m==null?void 0:m.id)||"User";c.name=`${c.id}:${y}`}}c.displayName||(c.displayName=c.name)}switch(o.webauthn.type){case"create":{const c=$y(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:h,error:f}=await Ay({publicKey:c,signal:u});return h?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:h}},error:null}:{data:null,error:f}}case"request":{const c=Uy(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:h,error:f}=await Iy(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:c,signal:u}));return h?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:h}},error:null}:{data:null,error:f}}}}catch(o){return O(o)?{data:null,error:o}:{data:null,error:new nr("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new cs("rpId is required for WebAuthn authentication")};try{if(!Fc())return{data:null,error:new nr("Browser does not support WebAuthn",null)};const{data:a,error:o}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:i});if(!a)return{data:null,error:o};const{webauthn:l}=a;return this._verify({factorId:t,challengeId:a.challengeId,webauthn:{type:l.type,rpId:r,rpOrigins:n,credential_response:l.credential_response}})}catch(a){return O(a)?{data:null,error:a}:{data:null,error:new nr("Unexpected error in authenticate",a)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new cs("rpId is required for WebAuthn registration")};try{if(!Fc())return{data:null,error:new nr("Browser does not support WebAuthn",null)};const{data:a,error:o}=await this._enroll({friendlyName:t});if(!a)return await this.client.mfa.listFactors().then(c=>{var h;return(h=c.data)===null||h===void 0?void 0:h.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===t&&f.status!=="unverified")}).then(c=>c?this.client.mfa.unenroll({factorId:c==null?void 0:c.id}):void 0),{data:null,error:o};const{data:l,error:u}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:i});return l?this._verify({factorId:a.id,challengeId:l.challengeId,webauthn:{rpId:r,rpOrigins:n,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:u}}catch(a){return O(a)?{data:null,error:a}:{data:null,error:new nr("Unexpected error in register",a)}}}}xy();const zy={url:Dv,storageKey:$v,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Uv,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Wc(e,t,r){return await r()}const Er={};class ds{get jwks(){var t,r;return(r=(t=Er[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Er[this.storageKey]=Object.assign(Object.assign({},Er[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Er[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Er[this.storageKey]=Object.assign(Object.assign({},Er[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},zy),t);if(this.storageKey=i.storageKey,this.instanceID=(r=ds.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,ds.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&de()){const a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new yy({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Df(i.fetch),this.lock=i.lock||Wc,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,this.lockAcquireTimeout=i.lockAcquireTimeout,i.lock?this.lock=i.lock:this.persistSession&&de()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=_y:this.lock=Wc,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new My(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:Lf()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Bc(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Bc(this.memoryStorage)),de()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a);try{await this._notifyAllSubscribers(a.data.event,a.data.session,!1)}catch(o){this._debug("#broadcastChannel","error",o)}})}this.initialize().catch(a=>{this._debug("#initialize()","error",a)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Rf}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(de()&&(r=Xv(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),de()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Wv(i)){const l=(t=i.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return{error:i}}const{session:a,redirectType:o}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return O(r)?this._returnResult({error:r}):this._returnResult({error:new nr("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await P(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:Ve}),{data:a,error:o}=i;if(o||!a)return this._returnResult({data:{user:null,session:null},error:o});const l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(i){if(O(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:c,password:h,options:f}=t;let m=null,y=null;this.flowType==="pkce"&&([m,y]=await kr(this.storage,this.storageKey)),i=await P(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:c,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:m,code_challenge_method:y},xform:Ve})}else if("phone"in t){const{phone:c,password:h,options:f}=t;i=await P(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Ve})}else throw new Ws("You must provide either an email or phone number and a password");const{data:a,error:o}=i;if(o||!a)return await ce(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:o});const l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(i){if(await ce(this.storage,`${this.storageKey}-code-verifier`),O(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:a,options:o}=t;r=await P(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Mc})}else if("phone"in t){const{phone:i,password:a,options:o}=t;r=await P(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Mc})}else throw new Ws("You must provide either an email or phone number and a password");const{data:n,error:s}=r;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!n||!n.session||!n.user){const i=new xr;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(O(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,s,i,a,o,l,u,c,h,f;let m,y;if("message"in t)m=t.message,y=t.signature;else{const{chain:w,wallet:_,statement:v,options:p}=t;let g;if(de())if(typeof _=="object")g=_;else{const z=window;if("ethereum"in z&&typeof z.ethereum=="object"&&"request"in z.ethereum&&typeof z.ethereum.request=="function")g=z.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!(p!=null&&p.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");g=_}const x=new URL((r=p==null?void 0:p.url)!==null&&r!==void 0?r:window.location.href),E=await g.request({method:"eth_requestAccounts"}).then(z=>z).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!E||E.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const S=Uf(E[0]);let j=(n=p==null?void 0:p.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!j){const z=await g.request({method:"eth_chainId"});j=ky(z)}const N={domain:x.host,address:S,statement:v,uri:x.href,version:"1",chainId:j,nonce:(s=p==null?void 0:p.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(a=(i=p==null?void 0:p.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(o=p==null?void 0:p.signInWithEthereum)===null||o===void 0?void 0:o.expirationTime,notBefore:(l=p==null?void 0:p.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(u=p==null?void 0:p.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(c=p==null?void 0:p.signInWithEthereum)===null||c===void 0?void 0:c.resources};m=by(N),y=await g.request({method:"personal_sign",params:[Sy(m),S]})}try{const{data:w,error:_}=await P(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:y},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Ve});if(_)throw _;if(!w||!w.session||!w.user){const v=new xr;return this._returnResult({data:{user:null,session:null},error:v})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:_})}catch(w){if(O(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async signInWithSolana(t){var r,n,s,i,a,o,l,u,c,h,f,m;let y,w;if("message"in t)y=t.message,w=t.signature;else{const{chain:_,wallet:v,statement:p,options:g}=t;let x;if(de())if(typeof v=="object")x=v;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))x=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=v}const E=new URL((r=g==null?void 0:g.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in x&&x.signIn){const S=await x.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},g==null?void 0:g.signInWithSolana),{version:"1",domain:E.host,uri:E.href}),p?{statement:p}:null));let j;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")j=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)j=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in j&&"signature"in j&&(typeof j.signedMessage=="string"||j.signedMessage instanceof Uint8Array)&&j.signature instanceof Uint8Array)y=typeof j.signedMessage=="string"?j.signedMessage:new TextDecoder().decode(j.signedMessage),w=j.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in x)||typeof x.signMessage!="function"||!("publicKey"in x)||typeof x!="object"||!x.publicKey||!("toBase58"in x.publicKey)||typeof x.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${E.host} wants you to sign in with your Solana account:`,x.publicKey.toBase58(),...p?["",p,""]:[""],"Version: 1",`URI: ${E.href}`,`Issued At: ${(s=(n=g==null?void 0:g.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=g==null?void 0:g.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...!((a=g==null?void 0:g.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...!((o=g==null?void 0:g.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...!((l=g==null?void 0:g.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...!((u=g==null?void 0:g.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...!((h=(c=g==null?void 0:g.signInWithSolana)===null||c===void 0?void 0:c.resources)===null||h===void 0)&&h.length?["Resources",...g.signInWithSolana.resources.map(j=>`- ${j}`)]:[]].join(`
`);const S=await x.signMessage(new TextEncoder().encode(y),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=S}}try{const{data:_,error:v}=await P(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:or(w)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Ve});if(v)throw v;if(!_||!_.session||!_.user){const p=new xr;return this._returnResult({data:{user:null,session:null},error:p})}return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),this._returnResult({data:Object.assign({},_),error:v})}catch(_){if(O(_))return this._returnResult({data:{user:null,session:null},error:_});throw _}}async _exchangeCodeForSession(t){const r=await Qt(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new qv;const{data:i,error:a}=await P(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Ve});if(await ce(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!i||!i.session||!i.user){const o=new xr;return this._returnResult({data:{user:null,session:null,redirectType:null},error:o})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:a})}catch(i){if(await ce(this.storage,`${this.storageKey}-code-verifier`),O(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:a}=t,o=await P(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Ve}),{data:l,error:u}=o;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!l||!l.session||!l.user){const c=new xr;return this._returnResult({data:{user:null,session:null},error:c})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:u})}catch(r){if(O(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,s,i,a;try{if("email"in t){const{email:o,options:l}=t;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await kr(this.storage,this.storageKey));const{error:h}=await P(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in t){const{phone:o,options:l}=t,{data:u,error:c}=await P(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(a=l==null?void 0:l.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c})}throw new Ws("You must provide either an email or phone number.")}catch(o){if(await ce(this.storage,`${this.storageKey}-code-verifier`),O(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:a,error:o}=await P(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Ve});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,u=a.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(s){if(O(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(t){var r,n,s,i,a;try{let o=null,l=null;this.flowType==="pkce"&&([o,l]=await kr(this.storage,this.storageKey));const u=await P(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:l}),headers:this.headers,xform:my});return!((i=u.data)===null||i===void 0)&&i.url&&de()&&!(!((a=t.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(o){if(await ce(this.storage,`${this.storageKey}-code-verifier`),O(o))return this._returnResult({data:null,error:o});throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Te;const{error:s}=await P(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(t){if(O(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:a}=await P(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:a,error:o}=await P(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o})}throw new Ws("You must provide either an email or phone number and a type")}catch(r){if(O(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Qt(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Ua:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const a=await Qt(this.userStorage,this.storageKey+"-user");a!=null&&a.user?t.user=a.user:t.user=Ba()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};t.user=dy(t.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await P(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ct}):await this._useSession(async r=>{var n,s,i;const{data:a,error:o}=r;if(o)throw o;return!(!((n=a.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Te}:await P(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Ct})})}catch(r){if(O(r))return Ma(r)&&(await this._removeSession(),await ce(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new Te;const a=s.session;let o=null,l=null;this.flowType==="pkce"&&t.email!=null&&([o,l]=await kr(this.storage,this.storageKey));const{data:u,error:c}=await P(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:o,code_challenge_method:l}),jwt:a.access_token,xform:Ct});if(c)throw c;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(n){if(await ce(this.storage,`${this.storageKey}-code-verifier`),O(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Te;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:a}=Vs(t.access_token);if(a.exp&&(n=a.exp,s=n<=r),s){const{data:o,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:l}=await this._getUser(t.access_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});i={access_token:t.access_token,refresh_token:t.refresh_token,user:o.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(O(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:a,error:o}=r;if(o)throw o;t=(n=a.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Te;const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(O(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!de())throw new qs("No browser detected.");if(t.error||t.error_description||t.error_code)throw new qs(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Rc("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new qs("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Rc("No code detected.");const{data:p,error:g}=await this._exchangeCodeForSession(t.code);if(g)throw g;const x=new URL(window.location.href);return x.searchParams.delete("code"),window.history.replaceState(window.history.state,"",x.toString()),{data:{session:p.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:a,expires_in:o,expires_at:l,token_type:u}=t;if(!i||!o||!a||!u)throw new qs("No session defined in URL");const c=Math.round(Date.now()/1e3),h=parseInt(o);let f=c+h;l&&(f=parseInt(l));const m=f-c;m*1e3<=Tr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);const y=f-h;c-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,f,c):c-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,f,c);const{data:w,error:_}=await this._getUser(i);if(_)throw _;const v={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:a,token_type:u,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:v,redirectType:t.type},error:null})}catch(n){if(O(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Qt(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i&&!Ma(i))return this._returnResult({error:i});const a=(n=s.session)===null||n===void 0?void 0:n.access_token;if(a){const{error:o}=await this.admin.signOut(a,t);if(o&&!(Fv(o)&&(o.status===404||o.status===401||o.status===403)||Ma(o)))return this._returnResult({error:o})}return t!=="others"&&(await this._removeSession(),await ce(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=Qv(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:a}=r;if(a)throw a;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await kr(this.storage,this.storageKey,!0));try{return await P(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(await ce(this.storage,`${this.storageKey}-code-verifier`),O(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(O(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var a,o,l,u,c;const{data:h,error:f}=i;if(f)throw f;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=t.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await P(this.fetch,"GET",m,{headers:this.headers,jwt:(c=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(s)throw s;return de()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(O(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:i}}=r;if(s)throw s;const{options:a,provider:o,token:l,access_token:u,nonce:c}=t,h=await P(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:o,id_token:l,access_token:u,nonce:c,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Ve}),{data:f,error:m}=h;return m?this._returnResult({data:{user:null,session:null},error:m}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new xr}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:m}))}catch(s){if(await ce(this.storage,`${this.storageKey}-code-verifier`),O(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:a}=r;if(a)throw a;return await P(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(O(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await ty(async s=>(s>0&&await ey(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await P(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Ve})),(s,i)=>{const a=200*Math.pow(2,s);return i&&za(i)&&Date.now()+a-n<Tr})}catch(n){if(this._debug(r,"error",n),O(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),de()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await Qt(this.storage,this.storageKey);if(s&&this.userStorage){let a=await Qt(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:s.user},await Nr(this.userStorage,this.storageKey+"-user",a)),s.user=(t=a==null?void 0:a.user)!==null&&t!==void 0?t:Ba()}else if(s&&!s.user&&!s.user){const a=await Qt(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(s.user=a.user,await ce(this.storage,this.storageKey+"-user"),await Nr(this.storage,this.storageKey,s)):s.user=Ba()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Ua;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Ua}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),za(a)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:o}=await this._getUser(s.access_token);!o&&(a!=null&&a.user)?(s.user=a.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(n,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Te;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new na;const{data:i,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!i.session)throw new Te;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={data:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(s,"error",i),O(i)){const a={data:null,error:i};return za(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(t,r)}catch(l){i.push(l)}});if(await Promise.all(a),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await ce(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Nr(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=$c(s);await Nr(this.storage,this.storageKey,i)}else{const s=$c(r);await Nr(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await ce(this.storage,this.storageKey),await ce(this.storage,this.storageKey+"-code-verifier"),await ce(this.storage,this.storageKey+"-user"),this.userStorage&&await ce(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&de()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Tr);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/Tr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Tr}ms, refresh threshold is ${Jo} ticks`),s<=Jo&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof $f)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!de()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(t){this._debug("#visibilityChangedCallback","error",t)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,a]=await kr(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(o.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?this._returnResult({data:null,error:i}):await P(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(O(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:a}=r;if(a)return this._returnResult({data:null,error:a});const o=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:l,error:u}=await P(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&l.type==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(r){if(O(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const a=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?Py(t.webauthn.credential_response):Ry(t.webauthn.credential_response)})}:{code:t.code}),{data:o,error:l}=await P(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:a,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),this._returnResult({data:o,error:l}))})}catch(r){if(O(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const a=await P(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(a.error)return a;const{data:o}=a;if(o.type!=="webauthn")return{data:o,error:null};switch(o.webauthn.type){case"create":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:Ny(o.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:Oy(o.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(O(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(t){var r,n,s,i;if(t)try{const{payload:m}=Vs(t);let y=null;m.aal&&(y=m.aal);let w=y;const{data:{user:_},error:v}=await this.getUser(t);if(v)return this._returnResult({data:null,error:v});((n=(r=_==null?void 0:_.factors)===null||r===void 0?void 0:r.filter(x=>x.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(w="aal2");const g=m.amr||[];return{data:{currentLevel:y,nextLevel:w,currentAuthenticationMethods:g},error:null}}catch(m){if(O(m))return this._returnResult({data:null,error:m});throw m}const{data:{session:a},error:o}=await this.getSession();if(o)return this._returnResult({data:null,error:o});if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Vs(a.access_token);let u=null;l.aal&&(u=l.aal);let c=u;((i=(s=a.user.factors)===null||s===void 0?void 0:s.filter(m=>m.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(c="aal2");const f=l.amr||[];return{data:{currentLevel:u,nextLevel:c,currentAuthenticationMethods:f},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?await P(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Te})})}catch(r){if(O(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Te});const a=await P(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:o=>({data:o,error:null})});return a.data&&a.data.redirect_url&&de()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(n){if(O(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Te});const a=await P(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:o=>({data:o,error:null})});return a.data&&a.data.redirect_url&&de()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(n){if(O(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await P(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Te})})}catch(t){if(O(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?(await P(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Te})})}catch(r){if(O(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(o=>o.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(o=>o.kid===t),n&&this.jwks_cached_at+zv>s)return n;const{data:i,error:a}=await P(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(o=>o.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:m,error:y}=await this.getSession();if(y||!m.session)return this._returnResult({data:null,error:y});n=m.session.access_token}const{header:s,payload:i,signature:a,raw:{header:o,payload:l}}=Vs(n);r!=null&&r.allowExpired||ly(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:i,header:s,signature:a},error:null}}const c=uy(s.alg),h=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,h,a,Jv(`${o}.${l}`)))throw new Xo("Invalid JWT signature");return{data:{claims:i,header:s,signature:a},error:null}}catch(n){if(O(n))return this._returnResult({data:null,error:n});throw n}}}ds.nextInstanceID={};const By=ds,Fy="2.93.3";let On="";typeof Deno<"u"?On="deno":typeof document<"u"?On="web":typeof navigator<"u"&&navigator.product==="ReactNative"?On="react-native":On="node";const Wy={"X-Client-Info":`supabase-js-${On}/${Fy}`},qy={headers:Wy},Vy={schema:"public"},Hy={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Ky={};function hs(e){"@babel/helpers - typeof";return hs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hs(e)}function Gy(e,t){if(hs(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(hs(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Jy(e){var t=Gy(e,"string");return hs(t)=="symbol"?t:t+""}function Yy(e,t,r){return(t=Jy(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Q(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qc(Object(r),!0).forEach(function(n){Yy(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qc(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const Qy=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Xy=()=>Headers,Zy=(e,t,r)=>{const n=Qy(r),s=Xy();return async(i,a)=>{var o;const l=(o=await t())!==null&&o!==void 0?o:e;let u=new s(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),n(i,Q(Q({},a),{},{headers:u}))}};function ew(e){return e.endsWith("/")?e:e+"/"}function tw(e,t){var r,n;const{db:s,auth:i,realtime:a,global:o}=e,{db:l,auth:u,realtime:c,global:h}=t,f={db:Q(Q({},l),s),auth:Q(Q({},u),i),realtime:Q(Q({},c),a),storage:{},global:Q(Q(Q({},h),o),{},{headers:Q(Q({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=o==null?void 0:o.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}function rw(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(ew(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var nw=class extends By{constructor(e){super(e)}},sw=class{constructor(e,t,r){var n,s;this.supabaseUrl=e,this.supabaseKey=t;const i=rw(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const a=`sb-${i.hostname.split(".")[0]}-auth-token`,o={db:Vy,realtime:Ky,auth:Q(Q({},Hy),{},{storageKey:a}),global:qy},l=tw(r??{},o);if(this.storageKey=(n=l.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(s=l.global.headers)!==null&&s!==void 0?s:{},l.accessToken)this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(c,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=l.auth)!==null&&u!==void 0?u:{},this.headers,l.global.fetch)}this.fetch=Zy(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Q({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(c=>this.realtime.setAuth(c)).catch(c=>console.warn("Failed to set initial Realtime auth token:",c)),this.rest=new F0(new URL("rest/v1",i).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new Lv(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new $0(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,r;if(e.accessToken)return await e.accessToken();const{data:n}=await e.auth.getSession();return(t=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:s,storageKey:i,flowType:a,lock:o,debug:l,throwOnError:u},c,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new nw({url:this.authUrl.href,headers:Q(Q({},f),c),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:s,flowType:a,lock:o,debug:l,throwOnError:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new iv(this.realtimeUrl.href,Q(Q({},e),{},{params:Q(Q({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const iw=(e,t,r)=>new sw(e,t,r);function aw(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const r=t.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}aw()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const ow="https://abvpumfdfupwrertyhzs.supabase.co",lw="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFidnB1bWZkZnVwd3JlcnR5aHpzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk3MTA1OTQsImV4cCI6MjA4NTI4NjU5NH0.vwI3T3TvCAGKJAoQ9kh8y81rwSC-W2pMuieVt9Gpq_Y",A=iw(ow,lw);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var uw={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cw=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),M=(e,t)=>{const r=k.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:o="",children:l,...u},c)=>k.createElement("svg",{ref:c,...uw,width:s,height:s,stroke:n,strokeWidth:a?Number(i)*24/Number(s):i,className:["lucide",`lucide-${cw(e)}`,o].join(" "),...u},[...t.map(([h,f])=>k.createElement(h,f)),...Array.isArray(l)?l:[l]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dw=M("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hw=M("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fw=M("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zf=M("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pw=M("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bf=M("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ff=M("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wf=M("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zo=M("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mw=M("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gw=M("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vw=M("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yw=M("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vc=M("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ww=M("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _w=M("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xw=M("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=M("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const el=M("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hc=M("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kw=M("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sw=M("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kc=M("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bw=M("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gc=M("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qf=M("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ew=M("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jc=M("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jw=M("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ru=M("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cw=M("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vf=M("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function Tw(){const[e,t]=k.useState(!1),[r,n]=k.useState(""),[s,i]=k.useState(""),[a,o]=k.useState(!0),[l,u]=k.useState(null),[c,h]=k.useState(null),f=async()=>{t(!0);try{const{error:y}=await A.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.origin}});if(y)throw y}catch(y){u(y.message),t(!1)}},m=async y=>{y.preventDefault(),t(!0),u(null),h(null);try{if(a){const{error:w}=await A.auth.signInWithPassword({email:r,password:s});if(w)throw w}else{const{data:w,error:_}=await A.auth.signUp({email:r,password:s});if(_)throw _;w&&!w.session&&h("Account created! Please check your email to verify.")}}catch(w){u(w.message)}finally{t(!1)}};return d.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-slate-950 relative overflow-hidden",children:[d.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden z-0",children:[d.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[500px] h-[500px] bg-indigo-600/20 rounded-full blur-[120px]"}),d.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[500px] h-[500px] bg-purple-600/20 rounded-full blur-[120px]"})]}),d.jsx("div",{className:"w-full max-w-md p-8 relative z-10",children:d.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-xl border border-slate-800 rounded-2xl p-8 shadow-2xl",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-indigo-400 to-purple-400 bg-clip-text text-transparent mb-2",children:"Streakholic"}),d.jsx("p",{className:"text-slate-400",children:a?"Welcome back, soldier.":"Start your consistency journey."})]}),d.jsx("div",{className:"mb-6",children:d.jsxs("button",{onClick:f,disabled:e,className:"w-full bg-white hover:bg-slate-100 text-slate-900 font-bold py-3 px-4 rounded-lg transition-colors flex items-center justify-center gap-2",children:[d.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[d.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),d.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),d.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),d.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Sign in with Google"]})}),d.jsxs("div",{className:"relative mb-6",children:[d.jsx("div",{className:"absolute inset-0 flex items-center",children:d.jsx("div",{className:"w-full border-t border-slate-700"})}),d.jsx("div",{className:"relative flex justify-center text-sm",children:d.jsx("span",{className:"px-2 bg-slate-900/50 text-slate-500",children:"Or continue with email"})})]}),d.jsxs("form",{onSubmit:m,className:"space-y-6",children:[d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"relative",children:[d.jsx(kw,{className:"absolute left-3 top-3 h-5 w-5 text-slate-500"}),d.jsx("input",{type:"email",placeholder:"Email address",value:r,onChange:y=>n(y.target.value),className:"w-full bg-slate-800/50 border border-slate-700 rounded-lg py-3 pl-10 pr-4 text-slate-200 placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",required:!0})]}),d.jsxs("div",{className:"relative",children:[d.jsx(el,{className:"absolute left-3 top-3 h-5 w-5 text-slate-500"}),d.jsx("input",{type:"password",placeholder:"Password",value:s,onChange:y=>i(y.target.value),className:"w-full bg-slate-800/50 border border-slate-700 rounded-lg py-3 pl-10 pr-4 text-slate-200 placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",required:!0})]})]}),l&&d.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/20 rounded-lg text-red-400 text-sm text-center",children:l}),c&&d.jsx("div",{className:"p-3 bg-green-500/10 border border-green-500/20 rounded-lg text-green-400 text-sm text-center",children:c}),d.jsx("button",{type:"submit",disabled:e,className:"w-full bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white font-semibold py-3 px-6 rounded-lg shadow-lg shadow-indigo-500/20 transition-all duration-200 flex items-center justify-center group disabled:opacity-70 disabled:cursor-not-allowed",children:e?d.jsx(zt,{className:"h-5 w-5 animate-spin"}):d.jsxs(d.Fragment,{children:[a?"Sign In":"Create Account",d.jsx(zf,{className:"ml-2 h-4 w-4 group-hover:translate-x-1 transition-transform"})]})})]}),d.jsx("div",{className:"mt-6 text-center",children:d.jsx("button",{onClick:()=>o(!a),className:"text-slate-400 hover:text-indigo-400 text-sm transition-colors",children:a?"Don't have an account? Sign up":"Already have an account? Sign in"})})]})})]})}async function sa(e){try{const r=await(await fetch(`https://leetcode-stats-api.herokuapp.com/${e}`)).json();return r.status==="error"||r.message==="user does not exist"?{valid:!1,message:"User not found"}:{valid:!0,data:r}}catch(t){return console.error("LeetCode verification error:",t),{valid:!1,message:"Could not verify user. API might be down."}}}function Nw({session:e,setProfile:t}){const[r,n]=k.useState(""),[s,i]=k.useState(!1),[a,o]=k.useState(null),l=yr(),u=async c=>{c.preventDefault(),i(!0),o(null);try{const h=await sa(r);if(!h.valid)throw new Error(h.message||"Invalid LeetCode username");const{data:f}=await A.from("profiles").select("id").eq("leetcode_username",r).single();if(f)throw new Error("This LeetCode account is already linked to another user.");const{error:m}=await A.from("profiles").update({leetcode_username:r,last_activity_date:new Date().toISOString()}).eq("id",e.user.id);if(m)throw m;const{data:y}=await A.from("profiles").select("*").eq("id",e.user.id).single();t&&t(y),l("/")}catch(h){o(h.message)}finally{i(!1)}};return d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-950 p-4",children:d.jsxs("div",{className:"w-full max-w-md bg-slate-900/50 backdrop-blur-md border border-slate-800 rounded-2xl p-8 shadow-xl",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("div",{className:"mx-auto w-12 h-12 bg-indigo-500/20 rounded-full flex items-center justify-center mb-4",children:d.jsx(xw,{className:"h-6 w-6 text-indigo-400"})}),d.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Link LeetCode"}),d.jsx("p",{className:"text-slate-400 text-sm",children:"We need to verify your LeetCode account to track your streaks automatically."})]}),d.jsxs("form",{onSubmit:u,className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"LeetCode Username"}),d.jsx("input",{type:"text",placeholder:"e.g. aditya123",value:r,onChange:c=>n(c.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-lg py-3 px-4 text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-all",required:!0})]}),a&&d.jsxs("div",{className:"p-3 bg-red-500/10 border border-red-500/20 rounded-lg flex items-start space-x-2",children:[d.jsx(dw,{className:"h-5 w-5 text-red-400 shrink-0"}),d.jsx("p",{className:"text-red-400 text-sm",children:a})]}),d.jsx("button",{type:"submit",disabled:s,className:"w-full bg-indigo-600 hover:bg-indigo-500 text-white font-semibold py-3 px-6 rounded-lg transition-colors flex items-center justify-center disabled:opacity-50",children:s?d.jsx(zt,{className:"animate-spin h-5 w-5"}):"Verify & Link"})]})]})})}function cr({children:e,profile:t}){var s,i;const r=yr(),n=async()=>{await A.auth.signOut(),r("/auth")};return d.jsxs("div",{className:"min-h-screen bg-slate-950 text-slate-100 flex",children:[d.jsxs("aside",{className:"w-64 border-r border-slate-800 bg-slate-900/50 hidden md:flex flex-col",children:[d.jsx("div",{className:"p-6",children:d.jsxs("h1",{className:"text-2xl font-bold bg-gradient-to-r from-indigo-400 to-purple-400 bg-clip-text text-transparent flex items-center gap-2",children:[d.jsx(Vf,{className:"text-indigo-400 fill-current"}),"Streakholic"]})}),d.jsxs("nav",{className:"flex-1 px-4 space-y-2",children:[d.jsxs(Nn,{to:"/",className:"flex items-center gap-3 px-4 py-3 bg-indigo-500/10 text-indigo-400 rounded-lg border border-indigo-500/20",children:[d.jsx(_w,{size:20}),d.jsx("span",{className:"font-medium",children:"Dashboard"})]}),d.jsxs(Nn,{to:"/profile",className:"flex items-center gap-3 px-4 py-3 text-slate-400 hover:text-slate-100 hover:bg-slate-800/50 rounded-lg transition-colors",children:[d.jsx(jw,{size:20}),d.jsx("span",{className:"font-medium",children:"Profile"})]}),d.jsxs(Nn,{to:"/groups",className:"flex items-center gap-3 px-4 py-3 text-slate-400 hover:text-slate-100 hover:bg-slate-800/50 rounded-lg transition-colors",children:[d.jsx(ru,{size:20}),d.jsx("span",{className:"font-medium",children:"Squads"})]}),d.jsxs(Nn,{to:"/wallet",className:"flex items-center gap-3 px-4 py-3 text-slate-400 hover:text-slate-100 hover:bg-slate-800/50 rounded-lg transition-colors",children:[d.jsx(Zo,{size:20}),d.jsx("span",{className:"font-medium",children:"Wallet"})]})]}),d.jsxs("div",{className:"p-4 border-t border-slate-800",children:[d.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 mb-2",children:[d.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-tr from-indigo-500 to-purple-500 flex items-center justify-center text-xs font-bold",children:(i=(s=t.username)==null?void 0:s[0])==null?void 0:i.toUpperCase()}),d.jsxs("div",{className:"flex-1 overflow-hidden",children:[d.jsx("p",{className:"text-sm font-medium truncate",children:t.username}),d.jsxs("p",{className:"text-xs text-slate-500 truncate",children:["@",t.leetcode_username]})]})]}),d.jsxs("button",{onClick:n,className:"flex items-center gap-3 px-4 py-2 text-sm text-red-400 hover:bg-red-500/10 rounded-lg w-full transition-colors",children:[d.jsx(Hc,{size:16}),"Sign Out"]})]})]}),d.jsxs("div",{className:"md:hidden fixed top-0 w-full bg-slate-900/80 backdrop-blur-md border-b border-slate-800 z-50 p-4 flex justify-between items-center",children:[d.jsx("span",{className:"font-bold text-lg text-indigo-400",children:"Streakholic"}),d.jsx("button",{onClick:n,className:"p-2 text-slate-400",children:d.jsx(Hc,{size:20})})]}),d.jsx("main",{className:"flex-1 p-6 md:p-10 pt-20 md:pt-10 overflow-y-auto",children:e})]})}function Fe(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function Wt(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const Hf=6048e5,Ow=864e5,Kf=6e4,Gf=36e5;let Pw={};function ia(){return Pw}function fs(e,t){var o,l,u,c;const r=ia(),n=(t==null?void 0:t.weekStartsOn)??((l=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??r.weekStartsOn??((c=(u=r.locale)==null?void 0:u.options)==null?void 0:c.weekStartsOn)??0,s=Fe(e),i=s.getDay(),a=(i<n?7:0)+i-n;return s.setDate(s.getDate()-a),s.setHours(0,0,0,0),s}function Li(e){return fs(e,{weekStartsOn:1})}function Jf(e){const t=Fe(e),r=t.getFullYear(),n=Wt(e,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const s=Li(n),i=Wt(e,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const a=Li(i);return t.getTime()>=s.getTime()?r+1:t.getTime()>=a.getTime()?r:r-1}function Di(e){const t=Fe(e);return t.setHours(0,0,0,0),t}function Yc(e){const t=Fe(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function Yf(e,t){const r=Di(e),n=Di(t),s=+r-Yc(r),i=+n-Yc(n);return Math.round((s-i)/Ow)}function Rw(e){const t=Jf(e),r=Wt(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),Li(r)}function Aw(e){return Wt(e,Date.now())}function Iw(e,t){const r=Di(e),n=Di(t);return+r==+n}function Lw(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Dw(e){if(!Lw(e)&&typeof e!="number")return!1;const t=Fe(e);return!isNaN(Number(t))}function $w(e){const t=Fe(e),r=Wt(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}const Uw={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Mw=(e,t,r)=>{let n;const s=Uw[e];return typeof s=="string"?n=s:t===1?n=s.one:n=s.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function Wa(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const zw={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Bw={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Fw={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Ww={date:Wa({formats:zw,defaultWidth:"full"}),time:Wa({formats:Bw,defaultWidth:"full"}),dateTime:Wa({formats:Fw,defaultWidth:"full"})},qw={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Vw=(e,t,r,n)=>qw[e];function xn(e){return(t,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let s;if(n==="formatting"&&e.formattingValues){const a=e.defaultFormattingWidth||e.defaultWidth,o=r!=null&&r.width?String(r.width):a;s=e.formattingValues[o]||e.formattingValues[a]}else{const a=e.defaultWidth,o=r!=null&&r.width?String(r.width):e.defaultWidth;s=e.values[o]||e.values[a]}const i=e.argumentCallback?e.argumentCallback(t):t;return s[i]}}const Hw={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Kw={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Gw={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Jw={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Yw={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Qw={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Xw=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Zw={ordinalNumber:Xw,era:xn({values:Hw,defaultWidth:"wide"}),quarter:xn({values:Kw,defaultWidth:"wide",argumentCallback:e=>e-1}),month:xn({values:Gw,defaultWidth:"wide"}),day:xn({values:Jw,defaultWidth:"wide"}),dayPeriod:xn({values:Yw,defaultWidth:"wide",formattingValues:Qw,defaultFormattingWidth:"wide"})};function kn(e){return(t,r={})=>{const n=r.width,s=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=t.match(s);if(!i)return null;const a=i[0],o=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(o)?t_(o,h=>h.test(a)):e_(o,h=>h.test(a));let u;u=e.valueCallback?e.valueCallback(l):l,u=r.valueCallback?r.valueCallback(u):u;const c=t.slice(a.length);return{value:u,rest:c}}}function e_(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function t_(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function r_(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const s=n[0],i=t.match(e.parsePattern);if(!i)return null;let a=e.valueCallback?e.valueCallback(i[0]):i[0];a=r.valueCallback?r.valueCallback(a):a;const o=t.slice(s.length);return{value:a,rest:o}}}const n_=/^(\d+)(th|st|nd|rd)?/i,s_=/\d+/i,i_={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},a_={any:[/^b/i,/^(a|c)/i]},o_={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},l_={any:[/1/i,/2/i,/3/i,/4/i]},u_={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},c_={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},d_={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},h_={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},f_={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},p_={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},m_={ordinalNumber:r_({matchPattern:n_,parsePattern:s_,valueCallback:e=>parseInt(e,10)}),era:kn({matchPatterns:i_,defaultMatchWidth:"wide",parsePatterns:a_,defaultParseWidth:"any"}),quarter:kn({matchPatterns:o_,defaultMatchWidth:"wide",parsePatterns:l_,defaultParseWidth:"any",valueCallback:e=>e+1}),month:kn({matchPatterns:u_,defaultMatchWidth:"wide",parsePatterns:c_,defaultParseWidth:"any"}),day:kn({matchPatterns:d_,defaultMatchWidth:"wide",parsePatterns:h_,defaultParseWidth:"any"}),dayPeriod:kn({matchPatterns:f_,defaultMatchWidth:"any",parsePatterns:p_,defaultParseWidth:"any"})},g_={code:"en-US",formatDistance:Mw,formatLong:Ww,formatRelative:Vw,localize:Zw,match:m_,options:{weekStartsOn:0,firstWeekContainsDate:1}};function v_(e){const t=Fe(e);return Yf(t,$w(t))+1}function y_(e){const t=Fe(e),r=+Li(t)-+Rw(t);return Math.round(r/Hf)+1}function Qf(e,t){var c,h,f,m;const r=Fe(e),n=r.getFullYear(),s=ia(),i=(t==null?void 0:t.firstWeekContainsDate)??((h=(c=t==null?void 0:t.locale)==null?void 0:c.options)==null?void 0:h.firstWeekContainsDate)??s.firstWeekContainsDate??((m=(f=s.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,a=Wt(e,0);a.setFullYear(n+1,0,i),a.setHours(0,0,0,0);const o=fs(a,t),l=Wt(e,0);l.setFullYear(n,0,i),l.setHours(0,0,0,0);const u=fs(l,t);return r.getTime()>=o.getTime()?n+1:r.getTime()>=u.getTime()?n:n-1}function w_(e,t){var o,l,u,c;const r=ia(),n=(t==null?void 0:t.firstWeekContainsDate)??((l=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:l.firstWeekContainsDate)??r.firstWeekContainsDate??((c=(u=r.locale)==null?void 0:u.options)==null?void 0:c.firstWeekContainsDate)??1,s=Qf(e,t),i=Wt(e,0);return i.setFullYear(s,0,n),i.setHours(0,0,0,0),fs(i,t)}function __(e,t){const r=Fe(e),n=+fs(r,t)-+w_(r,t);return Math.round(n/Hf)+1}function B(e,t){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}const _t={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return B(t==="yy"?n%100:n,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):B(r+1,2)},d(e,t){return B(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return B(e.getHours()%12||12,t.length)},H(e,t){return B(e.getHours(),t.length)},m(e,t){return B(e.getMinutes(),t.length)},s(e,t){return B(e.getSeconds(),t.length)},S(e,t){const r=t.length,n=e.getMilliseconds(),s=Math.trunc(n*Math.pow(10,r-3));return B(s,t.length)}},jr={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Qc={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const n=e.getFullYear(),s=n>0?n:1-n;return r.ordinalNumber(s,{unit:"year"})}return _t.y(e,t)},Y:function(e,t,r,n){const s=Qf(e,n),i=s>0?s:1-s;if(t==="YY"){const a=i%100;return B(a,2)}return t==="Yo"?r.ordinalNumber(i,{unit:"year"}):B(i,t.length)},R:function(e,t){const r=Jf(e);return B(r,t.length)},u:function(e,t){const r=e.getFullYear();return B(r,t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return B(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return B(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return _t.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return B(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const s=__(e,n);return t==="wo"?r.ordinalNumber(s,{unit:"week"}):B(s,t.length)},I:function(e,t,r){const n=y_(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):B(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):_t.d(e,t)},D:function(e,t,r){const n=v_(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):B(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const s=e.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return B(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const s=e.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return B(i,t.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),s=n===0?7:n;switch(t){case"i":return String(s);case"ii":return B(s,t.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let s;switch(n===12?s=jr.noon:n===0?s=jr.midnight:s=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let s;switch(n>=17?s=jr.evening:n>=12?s=jr.afternoon:n>=4?s=jr.morning:s=jr.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return _t.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):_t.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):B(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):B(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):_t.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):_t.s(e,t)},S:function(e,t){return _t.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return Zc(n);case"XXXX":case"XX":return tr(n);case"XXXXX":case"XXX":default:return tr(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return Zc(n);case"xxxx":case"xx":return tr(n);case"xxxxx":case"xxx":default:return tr(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Xc(n,":");case"OOOO":default:return"GMT"+tr(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Xc(n,":");case"zzzz":default:return"GMT"+tr(n,":")}},t:function(e,t,r){const n=Math.trunc(e.getTime()/1e3);return B(n,t.length)},T:function(e,t,r){const n=e.getTime();return B(n,t.length)}};function Xc(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),s=Math.trunc(n/60),i=n%60;return i===0?r+String(s):r+String(s)+t+B(i,2)}function Zc(e,t){return e%60===0?(e>0?"-":"+")+B(Math.abs(e)/60,2):tr(e,t)}function tr(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),s=B(Math.trunc(n/60),2),i=B(n%60,2);return r+s+t+i}const ed=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},Xf=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},x_=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],s=r[2];if(!s)return ed(e,t);let i;switch(n){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",ed(n,t)).replace("{{time}}",Xf(s,t))},k_={p:Xf,P:x_},S_=/^D+$/,b_=/^Y+$/,E_=["D","DD","YY","YYYY"];function j_(e){return S_.test(e)}function C_(e){return b_.test(e)}function T_(e,t,r){const n=N_(e,t,r);if(console.warn(n),E_.includes(e))throw new RangeError(n)}function N_(e,t,r){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const O_=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,P_=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,R_=/^'([^]*?)'?$/,A_=/''/g,I_=/[a-zA-Z]/;function L_(e,t,r){var c,h,f,m;const n=ia(),s=n.locale??g_,i=n.firstWeekContainsDate??((h=(c=n.locale)==null?void 0:c.options)==null?void 0:h.firstWeekContainsDate)??1,a=n.weekStartsOn??((m=(f=n.locale)==null?void 0:f.options)==null?void 0:m.weekStartsOn)??0,o=Fe(e);if(!Dw(o))throw new RangeError("Invalid time value");let l=t.match(P_).map(y=>{const w=y[0];if(w==="p"||w==="P"){const _=k_[w];return _(y,s.formatLong)}return y}).join("").match(O_).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const w=y[0];if(w==="'")return{isToken:!1,value:D_(y)};if(Qc[w])return{isToken:!0,value:y};if(w.match(I_))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");return{isToken:!1,value:y}});s.localize.preprocessor&&(l=s.localize.preprocessor(o,l));const u={firstWeekContainsDate:i,weekStartsOn:a,locale:s};return l.map(y=>{if(!y.isToken)return y.value;const w=y.value;(C_(w)||j_(w))&&T_(w,t,String(e));const _=Qc[w[0]];return _(o,w,s.localize,u)}).join("")}function D_(e){const t=e.match(R_);return t?t[1].replace(A_,"'"):e}function $_(e){return Fe(e*1e3)}function Hs(e){return Iw(e,Aw(e))}function Sn(e,t){const n=B_(e);let s;if(n.date){const l=F_(n.date,2);s=W_(l.restDateString,l.year)}if(!s||isNaN(s.getTime()))return new Date(NaN);const i=s.getTime();let a=0,o;if(n.time&&(a=q_(n.time),isNaN(a)))return new Date(NaN);if(n.timezone){if(o=V_(n.timezone),isNaN(o))return new Date(NaN)}else{const l=new Date(i+a),u=new Date(0);return u.setFullYear(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()),u.setHours(l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds(),l.getUTCMilliseconds()),u}return new Date(i+a+o)}const Ks={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},U_=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,M_=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,z_=/^([+-])(\d{2})(?::?(\d{2}))?$/;function B_(e){const t={},r=e.split(Ks.dateTimeDelimiter);let n;if(r.length>2)return t;if(/:/.test(r[0])?n=r[0]:(t.date=r[0],n=r[1],Ks.timeZoneDelimiter.test(t.date)&&(t.date=e.split(Ks.timeZoneDelimiter)[0],n=e.substr(t.date.length,e.length))),n){const s=Ks.timezone.exec(n);s?(t.time=n.replace(s[1],""),t.timezone=s[1]):t.time=n}return t}function F_(e,t){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=e.match(r);if(!n)return{year:NaN,restDateString:""};const s=n[1]?parseInt(n[1]):null,i=n[2]?parseInt(n[2]):null;return{year:i===null?s:i*100,restDateString:e.slice((n[1]||n[2]).length)}}function W_(e,t){if(t===null)return new Date(NaN);const r=e.match(U_);if(!r)return new Date(NaN);const n=!!r[4],s=bn(r[1]),i=bn(r[2])-1,a=bn(r[3]),o=bn(r[4]),l=bn(r[5])-1;if(n)return Y_(t,o,l)?H_(t,o,l):new Date(NaN);{const u=new Date(0);return!G_(t,i,a)||!J_(t,s)?new Date(NaN):(u.setUTCFullYear(t,i,Math.max(s,a)),u)}}function bn(e){return e?parseInt(e):1}function q_(e){const t=e.match(M_);if(!t)return NaN;const r=qa(t[1]),n=qa(t[2]),s=qa(t[3]);return Q_(r,n,s)?r*Gf+n*Kf+s*1e3:NaN}function qa(e){return e&&parseFloat(e.replace(",","."))||0}function V_(e){if(e==="Z")return 0;const t=e.match(z_);if(!t)return 0;const r=t[1]==="+"?-1:1,n=parseInt(t[2]),s=t[3]&&parseInt(t[3])||0;return X_(n,s)?r*(n*Gf+s*Kf):NaN}function H_(e,t,r){const n=new Date(0);n.setUTCFullYear(e,0,4);const s=n.getUTCDay()||7,i=(t-1)*7+r+1-s;return n.setUTCDate(n.getUTCDate()+i),n}const K_=[31,null,31,30,31,30,31,31,30,31,30,31];function Zf(e){return e%400===0||e%4===0&&e%100!==0}function G_(e,t,r){return t>=0&&t<=11&&r>=1&&r<=(K_[t]||(Zf(e)?29:28))}function J_(e,t){return t>=1&&t<=(Zf(e)?366:365)}function Y_(e,t,r){return t>=1&&t<=53&&r>=0&&r<=6}function Q_(e,t,r){return e===24?t===0&&r===0:r>=0&&r<60&&t>=0&&t<60&&e>=0&&e<25}function X_(e,t){return t>=0&&t<=59}const Z_=async e=>{console.log(`Processing penalties for user ${e}...`);const{data:t,error:r}=await A.from("group_members").select(`
            id,
            locked_balance,
            group_id,
            groups (
                id,
                name,
                is_coin_enabled,
                daily_penalty,
                stake_amount
            )
        `).eq("user_id",e);if(r){console.error("Error fetching memberships for penalty:",r);return}const n=t.filter(s=>s.groups&&s.groups.is_coin_enabled&&s.groups.daily_penalty>0&&s.locked_balance>0);if(n.length===0){console.log("No applicable penalties found.");return}for(const s of n)await ex(e,s)},ex=async(e,t)=>{const r=t.groups,n=Math.min(r.daily_penalty,t.locked_balance);if(!(n<=0))try{console.log(`Applying penalty of ${n} coins for group ${r.name}`);const{error:s}=await A.from("group_members").update({locked_balance:t.locked_balance-n}).eq("id",t.id);if(s)throw s;const{data:i}=await A.from("groups").select("reward_pool").eq("id",r.id).single(),a=((i==null?void 0:i.reward_pool)||0)+n;await A.from("groups").update({reward_pool:a}).eq("id",r.id);const{data:o}=await A.from("profiles").select("coins_balance, coins_locked").eq("id",e).single();await A.from("profiles").update({coins_balance:o.coins_balance-n,coins_locked:o.coins_locked-n}).eq("id",e),await A.from("coin_transactions").insert({user_id:e,amount:-n,type:"penalty",description:`Missed streak in ${r.name}`,group_id:r.id})}catch(s){console.error(`Failed to apply penalty for group ${r.id}:`,s)}},tx=async e=>{try{console.log(`Checking streak for ${e}...`);const{data:t}=await A.from("profiles").select("*").eq("id",e).single();if(!t||!t.leetcode_username)throw new Error("No linked LeetCode account.");const{data:r}=await A.from("daily_logs").select("*").eq("user_id",e).order("date",{ascending:!1}).limit(2),n=new Date,s=r==null?void 0:r[0],i=r==null?void 0:r.find(v=>!Hs(Sn(v.date))),{valid:a,data:o}=await sa(t.leetcode_username);if(!a)throw new Error("Failed to fetch LeetCode user data.");const l=o.totalSolved||0;let u=0,c=!1;!i&&!s?(c=!0,u=l):!i&&s&&Hs(Sn(s.date))?(c=!0,u=s.problems_solved):i?u=i.problems_solved:u=s.problems_solved;const h=l-u;let f="pending",m="No new problems solved yet today.";const y=r==null?void 0:r.find(v=>v.status==="success");let w=!1;y&&Yf(n,Sn(y.date))>1&&(w=!0),w&&(await A.from("profiles").update({current_streak:0}).eq("id",e),t.current_streak=0,await Z_(e)),h>0&&!c?(f="success",m=`Streak Active! You solved ${h} problems.`):c&&(f="pending",m="Welcome! Activity tracking starts tomorrow. Solved count saved.");let _=s&&Hs(Sn(s.date))?s:null;if(_?await A.from("daily_logs").update({status:f==="success"||_.status==="success"?"success":"pending",problems_solved:l,accepted_submissions:o.totalSolved}).eq("id",_.id):await A.from("daily_logs").insert({user_id:e,date:n.toISOString(),status:f,problems_solved:l,accepted_submissions:o.totalSolved}),f==="success"){const v=t.last_activity_date?Sn(t.last_activity_date):null;if(!v||!Hs(v)){const p=(t.current_streak||0)+1,g=Math.max(p,t.longest_streak||0),{count:x}=await A.from("daily_logs").select("*",{count:"exact",head:!0}).eq("user_id",e).eq("status","success");await A.from("profiles").update({current_streak:p,longest_streak:g,last_activity_date:n.toISOString(),total_active_days:x}).eq("id",e)}}return{status:f,message:m,delta:h}}catch(t){return console.error("Streak Check Error:",t),{status:"error",message:t.message}}},rx=async(e,t)=>{try{console.log(`Syncing history for ${t}...`);const{valid:r,data:n}=await sa(t);if(!r)throw new Error("Could not fetch LeetCode data");const s=n.totalSolved,i=JSON.parse(n.submissionCalendar||"{}"),a=Object.entries(i).map(([w,_])=>({timestamp:parseInt(w),date:$_(parseInt(w)),count:_,dateStr:new Date(parseInt(w)*1e3).toISOString()})).sort((w,_)=>_.timestamp-w.timestamp);if(a.length===0)return{status:"success",message:"No history to sync."};let o=s;const l=[],u=a.map(w=>({user_id:e,date:w.dateStr,status:"success",problems_solved:s,accepted_submissions:w.count})),{error:c}=await A.from("daily_logs").upsert(u,{onConflict:"user_id, date",ignoreDuplicates:!1});if(c)throw c;const h=a.map(w=>w.date).sort((w,_)=>w-_);let f=0,m=0,y=null;return h.forEach(w=>{if(!y)m=1;else{const _=(w-y)/864e5;Math.abs(_-1)<.1?m++:Math.abs(_)<.1||(m=1)}m>f&&(f=m),y=w}),await A.from("profiles").update({longest_streak:f,total_active_days:a.length}).eq("id",e),{status:"success",message:`Synced ${a.length} days of history.`,count:a.length}}catch(r){return console.error("History Sync Error:",r),{status:"error",message:r.message}}},Gs=({title:e,value:t,subtitle:r,icon:n,colorClass:s})=>d.jsxs("div",{className:"bg-slate-900/50 border border-slate-800 rounded-xl p-6 backdrop-blur-sm relative overflow-hidden group hover:border-slate-700 transition-colors",children:[d.jsx("div",{className:`absolute -right-4 -top-4 w-24 h-24 rounded-full opacity-5 group-hover:opacity-10 transition-opacity ${s}`}),d.jsxs("div",{className:"flex items-start justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-slate-400 text-sm font-medium mb-1",children:e}),d.jsx("h3",{className:"text-3xl font-bold text-white mb-1",children:t}),r&&d.jsx("p",{className:"text-xs text-slate-500",children:r})]}),d.jsx("div",{className:`p-3 rounded-lg bg-slate-800/50 ${s.replace("bg-","text-")}`,children:d.jsx(n,{size:24})})]})]}),Va=({label:e,count:t,total:r,color:n})=>d.jsxs("div",{className:"bg-slate-900/30 rounded-lg p-4 border border-slate-800 flex flex-col items-center",children:[d.jsx("span",{className:`text-xs font-bold uppercase tracking-wider mb-1 ${n}`,children:e}),d.jsx("span",{className:"text-2xl font-bold text-white",children:t}),d.jsxs("span",{className:"text-xs text-slate-500",children:["of ",r]})]});function nx({profile:e}){var c,h;const[t,r]=k.useState(!0),[n,s]=k.useState([]),[i,a]=k.useState(null),[o,l]=k.useState(null),u={currentStreak:e.current_streak||0,longestStreak:e.longest_streak||0,totalActive:e.total_active_days||n.filter(f=>f.status==="success").length,lastActivity:e.last_activity_date?new Date(e.last_activity_date).toLocaleDateString():"Never"};return k.useEffect(()=>{let f=!0;const m=async()=>{if(e.leetcode_username)try{const{valid:w,data:_}=await sa(e.leetcode_username);f&&w&&a(_);const v=tx(e.id).then(g=>{g.status==="success"&&f&&(l({type:"success",text:`Streak updated: ${g.message}`}),y())}),p=rx(e.id,e.leetcode_username).then(g=>{g.status==="success"&&g.count>0&&f&&y()});await y(),r(!1)}catch(w){console.error("Dashboard init error:",w),f&&r(!1)}},y=async()=>{const{data:w}=await A.from("daily_logs").select("*").eq("user_id",e.id).order("date",{ascending:!1});f&&w&&s(w)};return m(),()=>{f=!1}},[e.id,e.leetcode_username]),d.jsx(cr,{profile:e,children:d.jsxs("div",{className:"max-w-6xl mx-auto space-y-8",children:[d.jsxs("div",{className:"bg-indigo-500/10 border border-indigo-500/20 rounded-xl p-6 flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-xl font-bold text-indigo-100 mb-1",children:"Welcome to the Arena"}),d.jsx("p",{className:"text-indigo-200/60 text-sm",children:"Your stats are automatically synced live."})]}),d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-amber-500/10 border border-amber-500/20 rounded-lg text-amber-400 font-bold",children:[d.jsx("div",{className:"w-5 h-5 rounded-full border-2 border-amber-400 flex items-center justify-center text-[10px]",children:"$"}),d.jsx("span",{children:((c=e.coins_balance)==null?void 0:c.toLocaleString())||0})]}),d.jsxs("a",{href:`https://leetcode.com/${e.leetcode_username}`,target:"_blank",rel:"noreferrer",className:"px-5 py-2.5 bg-indigo-600 hover:bg-indigo-500 text-white text-sm font-semibold rounded-lg transition-colors whitespace-nowrap inline-flex items-center gap-2",children:["Solve on LeetCode ",d.jsx(Gc,{size:16})]})]})]}),o&&d.jsxs("div",{className:"animate-in fade-in slide-in-from-top-2 duration-300 bg-green-500/10 border border-green-500/20 text-green-400 p-4 rounded-lg flex items-center gap-2",children:[d.jsx(bw,{size:16,className:"animate-spin"}),o.text]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[d.jsx(Gs,{title:"Current Streak",value:u.currentStreak,subtitle:"Days in a row",icon:vw,colorClass:"bg-orange-500"}),d.jsx(Gs,{title:"Longest Streak",value:u.longestStreak,subtitle:"All-time best",icon:qf,colorClass:"bg-yellow-500"}),d.jsx(Gs,{title:"Total Active Days",value:u.totalActive,subtitle:"Consistency score",icon:Ff,colorClass:"bg-green-500"}),d.jsx(Gs,{title:"Last Activity",value:u.lastActivity,subtitle:"UTC Time",icon:Gc,colorClass:"bg-blue-500"})]}),i&&d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[d.jsxs("div",{className:"bg-slate-900/50 border border-slate-800 rounded-xl p-6 backdrop-blur-sm md:col-span-2",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[d.jsx("div",{className:"p-2 bg-indigo-500/20 rounded-lg text-indigo-400",children:d.jsx(ww,{size:20})}),d.jsx("h3",{className:"text-lg font-bold text-white",children:"Problems Solved"})]}),d.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"text-slate-400 text-xs uppercase mb-1",children:"Total"}),d.jsx("span",{className:"text-3xl font-bold text-white",children:i.totalSolved}),d.jsxs("span",{className:"text-xs text-slate-500",children:["/ ",i.totalQuestions]})]}),d.jsx(Va,{label:"Easy",count:i.easySolved,total:i.totalEasy,color:"text-teal-400"}),d.jsx(Va,{label:"Medium",count:i.mediumSolved,total:i.totalMedium,color:"text-yellow-400"}),d.jsx(Va,{label:"Hard",count:i.hardSolved,total:i.totalHard,color:"text-red-400"})]})]}),d.jsxs("div",{className:"bg-slate-900/50 border border-slate-800 rounded-xl p-6 backdrop-blur-sm flex flex-col justify-between space-y-6",children:[d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[d.jsx(yw,{size:16,className:"text-slate-500"}),d.jsx("span",{className:"text-sm font-medium text-slate-400",children:"Global Ranking"})]}),d.jsx("div",{className:"text-2xl font-bold text-white",children:((h=i.ranking)==null?void 0:h.toLocaleString())||"N/A"})]}),d.jsx("div",{className:"h-px bg-slate-800 w-full"}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[d.jsx(Bf,{size:16,className:"text-slate-500"}),d.jsx("span",{className:"text-sm font-medium text-slate-400",children:"Acceptance Rate"})]}),d.jsxs("div",{className:"text-2xl font-bold text-white",children:[i.acceptanceRate,"%"]})]})]})]})]})})}function sx({profile:e,setProfile:t}){var c,h,f;const[r,n]=k.useState(!1),[s,i]=k.useState(e.username||""),[a,o]=k.useState(!1),l=async()=>{o(!0);try{const{error:m}=await A.from("profiles").update({username:s}).eq("id",e.id);if(m)throw m;t({...e,username:s}),n(!1)}catch(m){console.error("Error updating profile:",m),alert("Failed to update profile")}finally{o(!1)}},u=m=>m?new Date(m).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}):"N/A";return d.jsx(cr,{profile:e,children:d.jsx("div",{className:"max-w-4xl mx-auto",children:d.jsxs("div",{className:"bg-slate-900/50 border border-slate-800 rounded-2xl p-8 backdrop-blur-sm",children:[d.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-6 mb-8",children:[d.jsx("div",{className:"w-24 h-24 rounded-full bg-gradient-to-tr from-indigo-500 to-purple-500 flex items-center justify-center text-3xl font-bold text-white shadow-xl shadow-indigo-500/20",children:(h=(c=e.username)==null?void 0:c[0])==null?void 0:h.toUpperCase()}),d.jsxs("div",{className:"text-center md:text-left flex-1",children:[r?d.jsxs("div",{className:"flex items-center gap-2 mb-2 justify-center md:justify-start",children:[d.jsx("input",{type:"text",value:s,onChange:m=>i(m.target.value),className:"bg-slate-800 border border-slate-700 text-white rounded px-2 py-1 text-2xl font-bold focus:outline-none focus:ring-2 focus:ring-indigo-500 w-full max-w-xs",autoFocus:!0}),d.jsx("button",{onClick:l,disabled:a,className:"bg-green-500/20 text-green-400 p-2 rounded hover:bg-green-500/30",children:a?d.jsx(zt,{className:"animate-spin",size:20}):d.jsx(Wf,{size:20})}),d.jsx("button",{onClick:()=>{n(!1),i(e.username)},className:"bg-slate-800 text-slate-400 p-2 rounded hover:bg-slate-700",children:d.jsx(Cw,{size:20})})]}):d.jsxs("div",{className:"flex items-center gap-3 justify-center md:justify-start mb-2 group",children:[d.jsx("h1",{className:"text-3xl font-bold text-white max-w-[250px] md:max-w-md truncate",title:e.username,children:e.username}),d.jsx("button",{onClick:()=>{n(!0),i(e.username||"")},className:"opacity-0 group-hover:opacity-100 transition-opacity text-slate-500 hover:text-indigo-400 p-1",children:d.jsx(Sw,{size:16})})]}),d.jsxs("p",{className:"text-slate-400 font-mono bg-slate-800 py-1 px-3 rounded-md inline-block",children:["@",e.leetcode_username]})]}),d.jsxs("div",{className:"text-center md:text-right",children:[d.jsx("p",{className:"text-slate-500 text-sm",children:"Member since"}),d.jsx("p",{className:"text-slate-300 font-medium",children:u(e.created_at)})]})]}),d.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[d.jsxs("div",{className:"bg-slate-800/30 p-4 rounded-xl border border-slate-800",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-2 text-slate-400",children:[d.jsx(Vf,{size:16}),d.jsx("span",{className:"text-xs font-medium uppercase tracking-wider",children:"Current Streak"})]}),d.jsxs("p",{className:"text-2xl font-bold text-white",children:[e.current_streak," ",d.jsx("span",{className:"text-slate-500 text-sm font-normal",children:"days"})]})]}),d.jsxs("div",{className:"bg-slate-800/30 p-4 rounded-xl border border-slate-800",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-2 text-slate-400",children:[d.jsx(Bf,{size:16}),d.jsx("span",{className:"text-xs font-medium uppercase tracking-wider",children:"Best Streak"})]}),d.jsxs("p",{className:"text-2xl font-bold text-white",children:[e.longest_streak," ",d.jsx("span",{className:"text-slate-500 text-sm font-normal",children:"days"})]})]}),d.jsxs("div",{className:"bg-slate-800/30 p-4 rounded-xl border border-slate-800",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-2 text-slate-400",children:[d.jsx(Ff,{size:16}),d.jsx("span",{className:"text-xs font-medium uppercase tracking-wider",children:"Total Active"})]}),d.jsxs("p",{className:"text-2xl font-bold text-white",children:[e.total_active_days||0," ",d.jsx("span",{className:"text-slate-500 text-sm font-normal",children:"days"})]})]}),d.jsxs("div",{className:"bg-slate-800/30 p-4 rounded-xl border border-slate-800",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-2 text-slate-400",children:[d.jsx("span",{className:"text-yellow-400",children:""}),d.jsx("span",{className:"text-xs font-medium uppercase tracking-wider",children:"Coins"})]}),d.jsx("p",{className:"text-2xl font-bold text-white",children:((f=e.coins_balance)==null?void 0:f.toLocaleString())||0})]})]}),d.jsxs("div",{className:"border-t border-slate-800 pt-8",children:[d.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Account Settings"}),d.jsx("p",{className:"text-slate-500 text-sm",children:"Your LeetCode username is permanently linked to this account to ensure streak integrity. It cannot be changed manually."})]})]})})})}const ix=async e=>{const{data:t,error:r}=await A.from("profiles").select("coins_balance, coins_locked").eq("id",e).single();if(r)throw r;return t},ax=async(e,t,r,n,s=null)=>{try{const{data:i,error:a}=await A.from("profiles").select("coins_balance, coins_locked").eq("id",e).single();if(a)throw new Error("User not found");t<0&&i.coins_balance+t<0;const{error:o}=await A.from("coin_transactions").insert({user_id:e,amount:t,type:r,description:n,group_id:s});if(o)throw o;const l=i.coins_balance+t,{error:u}=await A.from("profiles").update({coins_balance:l}).eq("id",e);if(u)throw u;return{success:!0,newBalance:l}}catch(i){return console.error("Transaction Error:",i),{success:!1,error:i.message}}},ox=async e=>{const{data:t,error:r}=await A.from("coin_transactions").select("*").eq("user_id",e).order("created_at",{ascending:!1});if(r)throw r;return t},lx=async(e,t,r={})=>{const n=Math.random().toString(36).substring(2,8).toUpperCase(),{data:s,error:i}=await A.from("groups").insert({name:t,invite_code:n,created_by:e,is_coin_enabled:r.enabled||!1,stake_amount:r.stake||0,daily_penalty:r.penalty||0,reward_pool:0}).select().single();if(i)throw i;return await ep(e,n,"admin")},ep=async(e,t,r="member")=>{const{data:n,error:s}=await A.from("groups").select("*").eq("invite_code",t.toUpperCase()).single();if(s||!n)throw new Error("Invalid invite code");const{data:i}=await A.from("group_members").select("id").eq("group_id",n.id).eq("user_id",e).single();if(i)throw new Error("You are already in this group");let a=0;if(n.is_coin_enabled&&n.stake_amount>0&&await ax(e,0),n.is_coin_enabled&&n.stake_amount>0){a=n.stake_amount;const{data:l}=await A.from("profiles").select("coins_balance, coins_locked").eq("id",e).single();if(l.coins_balance-l.coins_locked<a)throw new Error(`Insufficient coins. You need ${a} available coins to join.`);const{error:c}=await A.from("profiles").update({coins_locked:l.coins_locked+a}).eq("id",e);if(c)throw c;await A.from("coin_transactions").insert({user_id:e,amount:-a,type:"lock",description:`Locked stake for group ${n.name}`,group_id:n.id})}const{error:o}=await A.from("group_members").insert({group_id:n.id,user_id:e,role:r,locked_balance:a});if(o)throw o;return{success:!0,group:n}};function ux({profile:e}){const[t,r]=k.useState([]),[n,s]=k.useState(!0),[i,a]=k.useState("list"),[o,l]=k.useState(""),[u,c]=k.useState({enabled:!1,stake:50,penalty:10}),[h,f]=k.useState(!1),[m,y]=k.useState(""),[w,_]=k.useState(!1),[v,p]=k.useState(null);yr(),k.useEffect(()=>{g()},[e.id]);const g=async()=>{try{const{data:S,error:j}=await A.from("group_members").select(`
            role,
            groups (
                id,
                name,
                invite_code,
                created_by,
                is_coin_enabled,
                stake_amount
            )
        `).eq("user_id",e.id);if(j)throw j;r(S||[])}catch(S){console.error("Error fetching groups:",S)}finally{s(!1)}},x=async S=>{S.preventDefault(),f(!0);try{await lx(e.id,o,u),l(""),c({enabled:!1,stake:50,penalty:10}),a("list"),g()}catch(j){console.error("Error creating group:",j),alert("Failed to create group: "+j.message)}finally{f(!1)}},E=async S=>{S.preventDefault(),_(!0),p(null);try{await ep(e.id,m),y(""),a("list"),g()}catch(j){p(j.message)}finally{_(!1)}};return d.jsx(cr,{profile:e,children:d.jsxs("div",{className:"max-w-4xl mx-auto mb-8",children:[d.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end mb-8 gap-4",children:[d.jsxs("div",{children:[d.jsxs("h1",{className:"text-3xl font-bold text-white mb-2 flex items-center gap-3",children:["Squads ",d.jsx("span",{className:"text-xs bg-indigo-500/20 text-indigo-300 px-2 py-1 rounded border border-indigo-500/30",children:"Beta"})]}),d.jsx("p",{className:"text-slate-400",children:"Compete with friends, stake coins, and keep each other accountable."})]}),d.jsxs("div",{className:"flex gap-4 w-full md:w-auto",children:[d.jsxs("button",{onClick:()=>a("join"),className:`flex-1 md:flex-none px-6 py-3 rounded-xl font-bold text-sm transition-all flex items-center justify-center gap-2 border shadow-lg ${i==="join"?"bg-indigo-600 border-indigo-500 text-white shadow-indigo-500/20":"bg-slate-800 border-slate-700 text-slate-300 hover:bg-slate-700 hover:border-slate-600"}`,children:[d.jsx(Jc,{size:18}),"Join Squad"]}),d.jsxs("button",{onClick:()=>a("create"),className:`flex-1 md:flex-none px-6 py-3 rounded-xl font-bold text-sm transition-all flex items-center justify-center gap-2 border shadow-lg ${i==="create"?"bg-indigo-600 border-indigo-500 text-white shadow-indigo-500/20":"bg-white text-slate-900 border-white hover:bg-slate-200"}`,children:[d.jsx(Kc,{size:18}),"Create Squad"]})]})]}),i==="create"&&d.jsxs("div",{className:"bg-slate-900/50 border border-slate-800 rounded-xl p-8 max-w-lg mx-auto backdrop-blur-sm animate-in fade-in zoom-in duration-300",children:[d.jsxs("h2",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[d.jsx(Kc,{className:"text-indigo-500"})," Create a New Squad"]}),d.jsxs("form",{onSubmit:x,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-1",children:"Squad Name"}),d.jsx("input",{type:"text",value:o,onChange:S=>l(S.target.value),placeholder:"e.g. LeetCode Grinders",className:"w-full bg-slate-950 border border-slate-800 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",required:!0})]}),d.jsxs("div",{className:`p-4 rounded-lg border transition-all ${u.enabled?"bg-indigo-900/10 border-indigo-500/30":"bg-slate-950/50 border-slate-800"}`,children:[d.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>c({...u,enabled:!u.enabled}),children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-lg ${u.enabled?"bg-indigo-500 text-white":"bg-slate-800 text-slate-500"}`,children:""}),d.jsxs("div",{children:[d.jsx("span",{className:`block font-medium ${u.enabled?"text-indigo-200":"text-slate-400"}`,children:"High Stakes Mode"}),d.jsx("span",{className:"text-xs text-slate-500",children:"Require coins to join and punish missed days"})]})]}),d.jsx("input",{type:"checkbox",checked:u.enabled,onChange:S=>c({...u,enabled:S.target.checked}),className:"accent-indigo-500 h-5 w-5"})]}),u.enabled&&d.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-2",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"Stake to Join"}),d.jsx("input",{type:"number",min:"0",value:u.stake,onChange:S=>c({...u,stake:parseInt(S.target.value)}),className:"w-full bg-slate-900 border border-slate-800 rounded px-3 py-2 text-white text-sm"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"Daily Penalty"}),d.jsx("input",{type:"number",min:"0",value:u.penalty,onChange:S=>c({...u,penalty:parseInt(S.target.value)}),className:"w-full bg-slate-900 border border-slate-800 rounded px-3 py-2 text-white text-sm"})]})]})]}),d.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[d.jsx("button",{type:"button",onClick:()=>a("list"),className:"text-slate-400 hover:text-white text-sm font-medium",children:"Cancel"}),d.jsx("button",{type:"submit",disabled:h,className:"bg-indigo-600 hover:bg-indigo-500 text-white px-6 py-2 rounded-lg font-medium text-sm flex items-center gap-2",children:h?d.jsx(zt,{className:"animate-spin h-4 w-4"}):"Create Squad"})]})]})]}),i==="join"&&d.jsxs("div",{className:"bg-slate-900/50 border border-slate-800 rounded-xl p-8 max-w-lg mx-auto backdrop-blur-sm animate-in fade-in zoom-in duration-300",children:[d.jsxs("h2",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[d.jsx(Jc,{className:"text-indigo-500"})," Join a Squad"]}),d.jsxs("form",{onSubmit:E,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-1",children:"Invite Code"}),d.jsx("input",{type:"text",value:m,onChange:S=>y(S.target.value),placeholder:"ENTER CODE",className:"w-full bg-slate-950 border border-slate-800 rounded-lg px-4 py-3 text-white font-mono uppercase focus:outline-none focus:ring-2 focus:ring-indigo-500",required:!0})]}),d.jsx("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-lg p-3 text-xs text-blue-300",children:"If the group requires a stake, it will be locked from your balance automatically upon joining."}),v&&d.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/20 rounded-lg text-red-400 text-sm",children:v}),d.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[d.jsx("button",{type:"button",onClick:()=>a("list"),className:"text-slate-400 hover:text-white text-sm font-medium",children:"Cancel"}),d.jsx("button",{type:"submit",disabled:w,className:"bg-indigo-600 hover:bg-indigo-500 text-white px-6 py-2 rounded-lg font-medium text-sm flex items-center gap-2",children:w?d.jsx(zt,{className:"animate-spin h-4 w-4"}):"Join Squad"})]})]})]}),i==="list"&&(n?d.jsx("div",{className:"flex justify-center p-10",children:d.jsx(zt,{className:"animate-spin text-indigo-500"})}):t.length===0?d.jsxs("div",{className:"text-center py-20 bg-slate-900/30 border border-slate-800/50 rounded-xl border-dashed",children:[d.jsx("div",{className:"w-16 h-16 bg-indigo-500/10 rounded-full flex items-center justify-center mx-auto mb-4",children:d.jsx(ru,{className:"text-indigo-400 h-8 w-8"})}),d.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"No Squads Yet"}),d.jsx("p",{className:"text-slate-400 max-w-xs mx-auto mb-6",children:"Create a squad to challenge friends or join one with an invite code."}),d.jsx("button",{onClick:()=>a("create"),className:"text-indigo-400 hover:text-indigo-300 font-medium text-sm",children:"Create your first squad "})]}):d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(S=>d.jsx(cx,{group:S.groups,role:S.role},S.groups.id))}))]})})}function cx({group:e,role:t}){const[r,n]=k.useState(!1),s=()=>{navigator.clipboard.writeText(e.invite_code),n(!0),setTimeout(()=>n(!1),2e3)};return d.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-xl p-6 hover:border-slate-700 transition-colors group relative overflow-hidden flex flex-col h-full",children:[d.jsxs("div",{className:"absolute top-4 right-4 text-xs font-mono text-slate-500 flex items-center gap-2 bg-slate-950 px-2 py-1 rounded border border-slate-800",children:[d.jsx("span",{className:"text-slate-600 select-none",children:"CODE:"}),d.jsx("span",{className:"text-slate-300",children:e.invite_code}),d.jsx("button",{onClick:s,className:"text-indigo-400 hover:text-white transition-colors",children:r?d.jsx(Wf,{size:12}):d.jsx(mw,{size:12})})]}),d.jsx("h3",{className:"text-lg font-bold text-white mb-1 pr-24 truncate",title:e.name,children:e.name}),d.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[d.jsx("span",{className:"text-xs text-slate-400 uppercase tracking-wider font-semibold bg-slate-800 px-2 py-0.5 rounded",children:t}),e.is_coin_enabled&&d.jsxs("span",{className:"text-xs text-amber-400 font-bold flex items-center gap-1 bg-amber-500/10 px-2 py-0.5 rounded border border-amber-500/20",children:[" ",e.stake_amount," Stake"]})]}),d.jsx("div",{className:"mt-auto",children:d.jsxs(Nn,{to:`/groups/${e.id}`,className:"w-full py-2 bg-slate-800 hover:bg-slate-700 text-slate-200 text-sm font-medium rounded-lg transition-colors flex items-center justify-center gap-2",children:["View Details ",d.jsx(zf,{size:14})]})})]})}function dx({profile:e}){const{id:t}=o0(),r=yr(),[n,s]=k.useState(null),[i,a]=k.useState([]),[o,l]=k.useState(!0);k.useEffect(()=>{u()},[t]);const u=async()=>{try{const{data:c,error:h}=await A.from("groups").select("*").eq("id",t).single();if(h)throw h;s(c);const{data:f,error:m}=await A.from("group_members").select(`
                role,
                joined_at,
                profiles (
                    id,
                    username,
                    leetcode_username,
                    current_streak,
                    longest_streak,
                    last_activity_date
                )
            `).eq("group_id",t).order("current_streak",{foreignTable:"profiles",ascending:!1});if(m)throw m;const y=f==null?void 0:f.map(w=>({...w,profile:w.profiles})).sort((w,_)=>(_.profile.current_streak||0)-(w.profile.current_streak||0));a(y||[])}catch(c){console.error("Error fetching group details:",c)}finally{l(!1)}};return o?d.jsx(cr,{profile:e,children:d.jsx("div",{className:"flex justify-center items-center h-64",children:d.jsx(zt,{className:"animate-spin text-indigo-500 h-8 w-8"})})}):n?d.jsx(cr,{profile:e,children:d.jsxs("div",{className:"max-w-4xl mx-auto",children:[d.jsxs("button",{onClick:()=>r("/groups"),className:"flex items-center text-slate-400 hover:text-white mb-6 text-sm transition-colors",children:[d.jsx(fw,{size:16,className:"mr-1"})," Back to Squads"]}),d.jsx("div",{className:"flex items-start justify-between mb-8",children:d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:n.name}),d.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[d.jsxs("span",{className:"bg-slate-800 text-slate-300 px-3 py-1 rounded-full flex items-center gap-2 border border-slate-700",children:[d.jsx(ru,{size:14})," ",i.length," Members"]}),d.jsxs("span",{className:"text-slate-500 font-mono",children:["CODE: ",d.jsx("span",{className:"text-slate-300 select-all",children:n.invite_code})]})]})]})}),d.jsxs("div",{className:"bg-slate-900/50 border border-slate-800 rounded-xl overflow-hidden backdrop-blur-sm",children:[d.jsxs("div",{className:"p-6 border-b border-slate-800 flex items-center gap-2",children:[d.jsx(qf,{className:"text-yellow-500"}),d.jsx("h2",{className:"text-xl font-bold text-white",children:"Leaderboard"})]}),d.jsx("div",{className:"divide-y divide-slate-800",children:i.map((c,h)=>{var f,m;return d.jsxs("div",{className:"p-4 flex items-center gap-4 hover:bg-slate-800/30 transition-colors",children:[d.jsx("div",{className:`w-8 h-8 flex items-center justify-center font-bold text-lg ${h===0?"text-yellow-500":h===1?"text-slate-300":h===2?"text-amber-700":"text-slate-600"}`,children:h===0?d.jsx(gw,{size:20}):`#${h+1}`}),d.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-tr from-indigo-500/20 to-purple-500/20 border border-indigo-500/30 flex items-center justify-center text-indigo-400 font-bold",children:(m=(f=c.profile.username)==null?void 0:f[0])==null?void 0:m.toUpperCase()}),d.jsxs("div",{className:"flex-1",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("h3",{className:"text-white font-medium",children:c.profile.username}),c.role==="admin"&&d.jsx("span",{className:"text-[10px] bg-indigo-500 text-white px-1.5 py-0.5 rounded uppercase tracking-wider",children:"Admin"}),c.profile.id===e.id&&d.jsx("span",{className:"text-[10px] bg-slate-700 text-slate-300 px-1.5 py-0.5 rounded uppercase tracking-wider",children:"You"})]}),d.jsxs("p",{className:"text-slate-500 text-xs",children:["@",c.profile.leetcode_username]})]}),d.jsxs("div",{className:"text-right",children:[d.jsxs("p",{className:"text-lg font-bold text-white",children:[c.profile.current_streak," ",d.jsx("span",{className:"text-sm font-normal text-slate-500",children:""})]}),d.jsx("p",{className:"text-xs text-slate-500",children:"Current Streak"})]})]},c.profile.id)})})]})]})}):d.jsx(cr,{profile:e,children:d.jsx("div",{className:"text-center p-10",children:"Group not found"})})}function hx({profile:e}){const[t,r]=k.useState([]),[n,s]=k.useState({coins_balance:0,coins_locked:0}),[i,a]=k.useState(!0);k.useEffect(()=>{o()},[e.id]);const o=async()=>{try{const[u,c]=await Promise.all([ox(e.id),ix(e.id)]);r(u||[]),c&&s(c)}catch(u){console.error("Error fetching wallet data:",u)}finally{a(!1)}},l=u=>{switch(u){case"initial_grant":return d.jsx(Zo,{className:"text-yellow-400"});case"reward":return d.jsx(hw,{className:"text-green-400"});case"penalty":return d.jsx(pw,{className:"text-red-400"});case"lock":return d.jsx(el,{className:"text-slate-400"});case"unlock":return d.jsx(Ew,{className:"text-slate-400"});default:return d.jsx(Vc,{className:"text-slate-400"})}};return d.jsx(cr,{profile:e,children:d.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[d.jsxs("div",{className:"bg-gradient-to-br from-indigo-900 to-slate-900 border border-indigo-500/20 rounded-2xl p-8 relative overflow-hidden",children:[d.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-indigo-500/10 rounded-full blur-3xl -mr-32 -mt-32 pointer-events-none"}),d.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row items-center justify-between gap-8",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-indigo-200 text-sm font-semibold uppercase tracking-wider mb-2",children:"Total Balance"}),d.jsxs("div",{className:"text-5xl font-bold text-white flex items-center gap-3",children:[d.jsx("span",{className:"text-yellow-400",children:""}),n.coins_balance.toLocaleString()]}),d.jsx("p",{className:"text-slate-400 mt-2 text-sm",children:"Streakholic Coins (STC)"})]}),d.jsxs("div",{className:"bg-slate-950/50 rounded-xl p-6 border border-slate-800 min-w-[200px]",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-2 text-slate-400 text-sm",children:[d.jsx(el,{size:14})," Locked for Stakes"]}),d.jsx("div",{className:"text-2xl font-mono text-white",children:n.coins_locked.toLocaleString()})]})]})]}),t.length===0&&!i&&d.jsxs("div",{className:"bg-slate-900/50 border border-slate-800 rounded-xl p-8 text-center",children:[d.jsx(Zo,{className:"mx-auto h-12 w-12 text-slate-600 mb-4"}),d.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"No Transactions Yet"}),d.jsx("p",{className:"text-slate-400",children:"Your initial grant should appear here shortly via system sync."})]}),t.length>0&&d.jsxs("div",{className:"bg-slate-900/50 border border-slate-800 rounded-xl overflow-hidden backdrop-blur-sm",children:[d.jsxs("div",{className:"p-6 border-b border-slate-800 flex items-center gap-2",children:[d.jsx(Vc,{className:"text-indigo-400",size:20}),d.jsx("h3",{className:"text-lg font-bold text-white",children:"Transaction History"})]}),d.jsx("div",{className:"divide-y divide-slate-800",children:t.map(u=>d.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-slate-800/30 transition-colors",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-slate-800 border border-slate-700",children:l(u.type)}),d.jsxs("div",{children:[d.jsx("p",{className:"text-white font-medium capitalize",children:u.type==="lock"?"Staked":u.type.replace("_"," ")}),d.jsx("p",{className:"text-slate-500 text-xs",children:u.description||"No description"})]})]}),d.jsxs("div",{className:"text-right",children:[d.jsxs("p",{className:`font-mono font-bold ${u.type==="lock"?"text-amber-400":u.amount>0?"text-green-400":u.amount<0?"text-red-400":"text-slate-400"}`,children:[u.amount>0?"+":"",u.amount]}),d.jsx("p",{className:"text-slate-600 text-xs",children:L_(new Date(u.created_at),"MMM d, h:mm a")})]})]},u.id))})]})]})})}function fx(){const[e,t]=k.useState(null),[r,n]=k.useState(null),[s,i]=k.useState(!0);yr(),k.useEffect(()=>{A.auth.getSession().then(({data:{session:l}})=>{t(l),l?a(l.user.id):i(!1)});const{data:{subscription:o}}=A.auth.onAuthStateChange((l,u)=>{t(u),u?a(u.user.id):(n(null),i(!1))});return()=>o.unsubscribe()},[]);const a=async o=>{try{const{data:l,error:u}=await A.from("profiles").select("*").eq("id",o).single();u&&u.code!=="PGRST116"&&console.error("Error fetching profile:",u),n(l)}finally{i(!1)}};return s?d.jsx("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center",children:d.jsx(zt,{className:"h-8 w-8 text-indigo-500 animate-spin"})}):d.jsxs(S0,{children:[d.jsx(xt,{path:"/auth",element:e?d.jsx(it,{to:"/",replace:!0}):d.jsx(Tw,{})}),d.jsx(xt,{path:"/link-leetcode",element:e?r!=null&&r.leetcode_username?d.jsx(it,{to:"/",replace:!0}):d.jsx(Nw,{session:e,setProfile:n}):d.jsx(it,{to:"/auth",replace:!0})}),d.jsx(xt,{path:"/",element:e?r!=null&&r.leetcode_username?d.jsx(nx,{profile:r}):d.jsx(it,{to:"/link-leetcode",replace:!0}):d.jsx(it,{to:"/auth",replace:!0})}),d.jsx(xt,{path:"/profile",element:e&&(r!=null&&r.leetcode_username)?d.jsx(sx,{profile:r,setProfile:n}):d.jsx(it,{to:"/",replace:!0})}),d.jsx(xt,{path:"/groups",element:e&&(r!=null&&r.leetcode_username)?d.jsx(ux,{profile:r}):d.jsx(it,{to:"/",replace:!0})}),d.jsx(xt,{path:"/groups/:id",element:e&&(r!=null&&r.leetcode_username)?d.jsx(dx,{profile:r}):d.jsx(it,{to:"/",replace:!0})}),d.jsx(xt,{path:"/wallet",element:e&&(r!=null&&r.leetcode_username)?d.jsx(hx,{profile:r}):d.jsx(it,{to:"/",replace:!0})})]})}Ha.createRoot(document.getElementById("root")).render(d.jsx(dd.StrictMode,{children:d.jsx(O0,{children:d.jsx(fx,{})})}));
